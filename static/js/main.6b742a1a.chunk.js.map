{"version":3,"sources":["Theme/index.js","DemoSite/Editor.js","SidebarBoxContainer/index.js","TaskDescriptionSidebarBox/index.js","ImageSelectorSidebarBox/index.js","RegionSelectorSidebarBox/styles.js","RegionSelectorSidebarBox/index.js","HistorySidebarBox/index.js","DebugSidebarBox/index.js","TagsSidebarBox/index.js","Sidebar/index.js","Crosshairs/index.js","RegionLabel/styles.js","RegionLabel/index.js","HighlightBox/index.js","ImageCanvas/index.js","ImageCanvas/styles.js","ImageCanvas/region-tools.js","ImageCanvas/xpattern.js","HeaderButton/index.js","Header/styles.js","Header/index.js","SmallToolButton/index.js","IconTools/index.js","MainLayout/styles.js","SettingsProvider/index.js","SettingsDialog/index.js","MainLayout/index.js","Annotator/reducer.js","Annotator/index.js","DemoSite/ErrorBoundaryDialog.js","index.js","DemoSite/index.js"],"names":["useStyles","makeStyles","container","fontFamily","theme","createMuiTheme","typography","overrides","MuiButton","root","textTransform","editBar","padding","borderBottom","backgroundColor","display","alignItems","& .button","margin","select","width","fontSize","contentArea","specificationArea","loadSavedInput","JSON","parse","window","localStorage","getItem","e","examples","Simple Bounding Box","taskDescription","regionTagList","regionClsList","enabledTools","images","src","name","Custom","Editor","_ref","onOpenAnnotator","lastOutput","c","_useState","useState","_useState2","Object","slicedToArray","currentError","changeCurrentError","_useState3","_useState4","selectedExample","changeSelectedExample","_useState5","_useState6","outputDialogOpen","changeOutputOpen","_useState7","stringify","_useState8","currentJSONValue","changeCurrentJSONValue","react_default","a","createElement","className","style","flexGrow","react_select_esm","value","label","options","keys","map","s","onChange","selectedOption","Button_default","disabled","onClick","variant","Boolean","border","lib_default","language","code","setItem","toString","height","default_highlight","Dialog_default","fullScreen","open","DialogTitle_default","DialogContent_default","minWidth","DialogActions_default","header","flexDirection","paddingLeft","paddingRight","title","fontWeight","color","grey","& span","expandButton","& .icon","marginTop","transition","&.expanded","transform","expandedContent","maxHeight","overflowY","&.noScroll","overflow","SidebarBoxContainer","icon","subTitle","children","_ref$noScroll","noScroll","_ref$expandedByDefaul","expandedByDefault","classes","content","classnames","expanded","changeExpanded","Paper_default","IconButton_default","ExpandMore_default","Collapse_default","in","markdownContainer","& h1","& h2","& h3","& h4","& h5","& h6","& p","& a","& img","TaskDescriptionSidebarBox","description","Description_default","react_markdown_default","source","img","borderRadius","ImageSelectorSidebarBox","onSelect","concat","length","Collections_default","List_default","i","ListItem_default","button","dense","key","ListItemText_default","primary","secondary","regions","styles","& .icon2","opacity","&:hover","cursor","row","&.header:hover","&.highlighted","blue","chip","& .color","marginRight","& .text","Chip","text","Row","_ref2","highlighted","order","classification","area","trash","tags","lock","visible","changeMouseOver","onMouseEnter","onMouseLeave","Grid_default","item","xs","textAlign","RegionSelectorSidebarBox","_ref3","onDeleteRegion","onChangeRegion","onSelectRegion","PictureInPicture_default","RegionSelectorSidebarBox_Row","SwapVert_default","PieChart_default","Delete_default","Lock_default","Visibility_default","borderTop","marginBottom","r","id","RegionSelectorSidebarBox_Chip","cls","locked","objectSpread","LockOpen_default","undefined","VisibilityOff_default","emptyText","HistorySidebarBox","history","onRestoreHistory","History_default","time","moment","format","ListItemSecondaryAction_default","Undo_default","DebugSidebarBox","state","lastAction","image","find","selectedImage","region","mode","TagsSidebarBox","currentImage","_ref$imageClsList","imageClsList","_ref$imageTagList","imageTagList","onChangeImage","_currentImage$tags","_currentImage$cls","Style_default","placeholder","o","paddingTop","isMulti","Sidebar","debug","labelImages","onSelectImage","Crosshairs","mousePosition","x","y","changeForceRenderState","current","useEffect","interval","setInterval","clearInterval","react","position","left","pointerEvents","top","RegionLabel_styles","regionInfo","& .name","& .circle","boxShadow","& .tags","& .tag","textDecoration","RegionLabel","editing","_ref$allowedClasses","allowedClasses","_ref$allowedTags","allowedTags","onDelete","onClose","onOpen","textShadow","type","tabIndex","size","newTags","t","Check_default","@keyframes borderDance","from","strokeDashoffset","to","highlightBox","&:not(.highlighted)","&:not(.highlighted):hover","& path","vectorEffect","strokeWidth","stroke","fill","strokeDasharray","animationName","animationDuration","animationTimingFunction","animationIterationCount","animationPlayState","HighlightBox","mouseEvents","dragWithPrimary","zoomWithPrimary","createWithPrimary","onBeginMovePoint","pbox","assign","onMouseDown","w","h","d","canvas","transformGrabber","zoomIndicator","bottom","right","pointDistanceIndicator","& text","boxCursorMap","getDefaultMat","Matrix","ImageCanvas","imageSrc","realSize","showTags","_ref$onMouseMove","onMouseMove","p","_ref$onMouseDown","_ref$onMouseUp","onMouseUp","_ref$dragWithPrimary","_ref$zoomWithPrimary","_ref$createWithPrimar","_ref$pointDistancePre","pointDistancePrecision","showCrosshairs","showPointDistances","allowedArea","onImageLoaded","onBeginRegionEdit","onCloseRegionEdit","onBeginBoxTransform","onBeginMovePolygonPoint","onAddPolygonPoint","canvasEl","useRef","layoutParams","excludePattern","changeImageLoaded","dragging","changeDragging","maskImagesLoaded","changeMaskImagesLoaded","zoomStart","changeZoomStart","_useState9","_useState10","zoomEnd","changeZoomEnd","prevMousePosition","_useState11","_useState12","mat","changeMat","maskImages","projectRegionBox","applyToPoint","_layoutParams$current","iw","ih","bbox","box","Math","min","apply","toConsumableArray","points","_ref4","max","_ref5","_ref6","_ref7","_ref8","sx","sy","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","Error","getEnclosingBox","cbox","clone","inverse","useLayoutEffect","Image","onload","naturalWidth","naturalHeight","clientWidth","clientHeight","context","getContext","pattern","createPattern","save","toArray","fitScale","canvasWidth","canvasHeight","drawImage","globalAlpha","outer","inner","moveTo","forEach","lineTo","closePath","reverse","fillStyle","restore","lineWidth","shadowColor","shadowBlur","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","beginPath","strokeStyle","arc","PI","strokeRect","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","Symbol","iterator","next","done","point","err","return","nodeName","newCanvas","document","ctx","imgData","getImageData","data","_imgData$data$slice","slice","_imgData$data$slice2","g","b","black","clearRect","putImageData","_iterator","filter","zoomIn","direction","mx","my","scale","translate","scaleU","_canvasEl$current$get","getBoundingClientRect","clientX","clientY","projMouse","_layoutParams$current2","preventDefault","specialEvent","arguments","_layoutParams$current3","abs","_layoutParams$current4","newMat","_layoutParams$current5","onWheel","deltaY","_layoutParams$current6","zoomBox","_layoutParams$current7","px","py","proj","p1","p2","pa","_layoutParams$current8","labelBoxHeight","editingLabels","coords","zIndex","paddingBottom","r1","flatMap","i1","r2","i2","displayDistance","pr1","pr2","prm","unitName","sqrt","pow","toFixed","ref","HeaderButtonContext","createContext","HeaderButton","Icon","Consumer","onHeaderButtonClick","Header_styles","flexShrink","fileInfo","Header","inFullScreen","headerActions","Provider","BackIcon","NextIcon","SettingsIcon","FullscreenIcon","ExitIcon","SelectedTool","SmallToolButton","selected","togglable","_ref$alwaysShowing","alwaysShowing","_useContext","useContext","selectedTool","onClickTool","includes","Tooltip_default","placement","aria-label","iconTools","borderRight","IconTools","_ref$enabledTools","react_fontawesome_index_es","fixedWidth","faMousePointer","faHandPaper","faSearch","faTag","faCrosshairs","faVectorSquare","faDrawPolygon","MainLayout_styles","minHeight","&.fullscreen","workspace","iconToolsContainer","imageCanvasContainer","justifyContent","noImageSelected","sidebarContainer","borderLeft","SettingsContext","useSettings","SettingsProvider","settings","startsWith","replace","pullSettingsFromLocalStorage","changeState","changeSetting","setting","defineProperty","SettingsDialog","Survey","noActions","defaultAnswers","onQuestionChange","q","answers","form","questions","MainLayout","_Object$assign","dispatch","action","_len","params","Array","_key","_len2","args","_key2","reduce","acc","useKey","detectKeys","dist_default","enabled","headerContainer","$ANNOTATE_DEBUG_MODE","settingsOpen","buttonName","getRandomId","random","split","getRandomColor","floor","typesToSaveWithHistory","BEGIN_BOX_TRANSFORM","BEGIN_MOVE_POINT","DELETE_REGION","reducer","setIn","currentImageIndex","findIndex","getRegionIndex","regionId","regionIndex","getRegion","modifyRegion","obj","_getRegion","_getRegion2","unselectRegions","saveToHistory","updateIn","toDate","closeEditors","setNewImage","newImage","oldRegion","isEqual","delta","_arr","_i","directions","freedom","original","polygon","pointIndex","splice","_state$mode","moveRegion","_state$mode2","_state$mode2$freedom","xFree","yFree","_state$mode2$original","ox","oy","ow","oh","dx","dw","dy","dh","_getRegion3","_getRegion4","newRegion","aa","editLabelEditorAfter","_getRegion5","_getRegion6","newRegions","toLowerCase","some","Annotator","_ref$selectedImage","_ref$showTags","_ref$regionTagList","_ref$regionClsList","onExit","_useReducer","useReducer","_useReducer2","dispatchToReducer","ErrorBoundaryDialog","hasError","info","this","setState","componentStack","props","Component","ReactDOM","render","MuiThemeProvider_default","annotatorOpen","changeAnnotatorOpen","annotatorProps","changeAnnotatorProps","changeLastOutput","ErrorBoundaryDialog_ErrorBoundaryDialog","output","DemoSite_Editor","getElementById"],"mappings":"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","file":"static/js/main.6b742a1a.chunk.js","sourcesContent":["// @flow\n\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\"\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\"\nimport \"./theme.css\"\n\nconst useStyles = makeStyles({\n  container: {\n    fontFamily: '\"Inter UI\", sans-serif'\n  }\n})\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: '\"Inter UI\", \"Roboto\", sans-serif'\n  },\n  overrides: {\n    MuiButton: {\n      root: {\n        textTransform: \"none\"\n      }\n    }\n  }\n})\n\nexport default ({ children }: any) => {\n  const classes = useStyles()\n  return (\n    <MuiThemeProvider theme={theme}>\n      <div className={classes.container}>{children}</div>\n    </MuiThemeProvider>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport Select from \"react-select\"\nimport Code from \"react-syntax-highlighter\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport MonacoEditor from \"react-monaco-editor\"\n\nconst useStyles = makeStyles({\n  editBar: {\n    padding: 10,\n    borderBottom: \"1px solid #ccc\",\n    backgroundColor: \"#f8f8f8\",\n    display: \"flex\",\n    alignItems: \"center\",\n    \"& .button\": { margin: 5 }\n  },\n  select: { width: 240, fontSize: 14 },\n  contentArea: {\n    padding: 10\n  },\n  specificationArea: {\n    padding: 10\n  }\n})\n\nconst loadSavedInput = () => {\n  try {\n    return JSON.parse(window.localStorage.getItem(\"customInput\") || \"{}\")\n  } catch (e) {\n    return {}\n  }\n}\n\nexport const examples = {\n  \"Simple Bounding Box\": () => ({\n    taskDescription:\n      \"Annotate each image according to this _markdown_ specification.\",\n    // regionTagList: [],\n    // regionClsList: [\"hotdog\"],\n    regionTagList: [\"has-bun\"],\n    regionClsList: [\"hotdog\", \"not-hotdog\"],\n    enabledTools: [\"select\", \"create-box\"],\n    // showTags: true,\n    images: [\n      {\n        src:\n          \"https://images.unsplash.com/photo-1496905583330-eb54c7e5915a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=634&q=80\",\n        name: \"hot-dogs-1\"\n      }\n    ]\n  }),\n  Custom: () => loadSavedInput()\n}\n\nconst Editor = ({ onOpenAnnotator, lastOutput }: any) => {\n  const c = useStyles()\n  const [currentError, changeCurrentError] = useState()\n  const [selectedExample, changeSelectedExample] = useState(\n    window.localStorage.getItem(\"customInput\")\n      ? \"Custom\"\n      : \"Simple Bounding Box\"\n  )\n  const [outputDialogOpen, changeOutputOpen] = useState(false)\n  const [currentJSONValue, changeCurrentJSONValue] = useState(\n    JSON.stringify(examples[selectedExample](), null, \"  \")\n  )\n  return (\n    <div>\n      <div className={c.editBar}>\n        <h3>React Image Annotate</h3>\n        <div style={{ flexGrow: 1 }} />\n        <div>\n          <div style={{ display: \"inline-flex\" }}>\n            <Select\n              className={c.select}\n              value={{ label: selectedExample, value: selectedExample }}\n              options={Object.keys(examples).map(s => ({\n                label: s,\n                value: s\n              }))}\n              onChange={selectedOption => {\n                changeSelectedExample(selectedOption.value)\n\n                changeCurrentJSONValue(\n                  JSON.stringify(\n                    selectedOption.value === \"Custom\"\n                      ? loadSavedInput()\n                      : examples[selectedOption.value](),\n                    null,\n                    \"  \"\n                  )\n                )\n              }}\n            />\n          </div>\n          <Button\n            className=\"button\"\n            disabled={!lastOutput}\n            onClick={() => changeOutputOpen(true)}\n          >\n            View Output\n          </Button>\n          <Button\n            className=\"button\"\n            variant=\"outlined\"\n            disabled={Boolean(currentError)}\n            onClick={() =>\n              onOpenAnnotator(\n                selectedExample === \"Custom\"\n                  ? loadSavedInput()\n                  : examples[selectedExample]\n              )\n            }\n          >\n            Open Annotator\n          </Button>\n        </div>\n      </div>\n      <div\n        className={c.contentArea}\n        style={\n          currentError\n            ? { border: \"2px solid #f00\" }\n            : { border: \"2px solid #fff\" }\n        }\n      >\n        <div>\n          <MonacoEditor\n            value={currentJSONValue}\n            language=\"javascript\"\n            onChange={code => {\n              try {\n                window.localStorage.setItem(\n                  \"customInput\",\n                  JSON.stringify(JSON.parse(code))\n                )\n                changeCurrentError(null)\n              } catch (e) {\n                changeCurrentError(e.toString())\n              }\n              changeCurrentJSONValue(code)\n            }}\n            width=\"100%\"\n            height=\"550px\"\n          />\n        </div>\n      </div>\n      <div className={c.specificationArea}>\n        <h2>React Image Annotate Format</h2>\n        <Code language=\"javascript\">{`\n{\n  taskDescription?: string, // markdown\n  regionTagList?: Array<string>,\n  regionClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  imageClsList?: Array<string>,\n  // all tools are enabled by default\n  enabledTools?: Array< \"select\" | \"create-point\" | \"create-box\" | \"create-polygon\">,\n  selectedImage?: string, // initial selected image\n  images: Array<{\n    src: string,\n    thumbnailSrc?: string, // use this if you are using high-res images\n    name: string,\n    regions?: Array<{\n      id: string | number,\n      cls?: string,\n      color?: string,\n      tags?: Array<string>,\n\n      // Point\n      type: \"point\",\n      x: number, // [0-1] % of image width\n      y: number, // [0-1] % of image height\n\n      // Bounding Box\n      type: \"box\",\n      x: number, // [0-1] % of image width\n      y: number, // [0-1] % of image height\n      w: number, // [0-1] % of image width\n      h: number, // [0-1] % of image height\n\n      // Polygon\n      type: \"polygon\",\n      open?: boolean, // should last and first points be connected, default: true\n      points: Array<[number, number]> // [0-1] % of image width/height\n    }>\n  }>,\n}\n`}</Code>\n      </div>\n      <Dialog fullScreen open={outputDialogOpen}>\n        <DialogTitle>React Image Annotate Output</DialogTitle>\n        <DialogContent style={{ minWidth: 400 }}>\n          <MonacoEditor\n            value={JSON.stringify(lastOutput, null, \"  \")}\n            language=\"javascript\"\n            width=\"100%\"\n            height=\"550px\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => changeOutputOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nexport default Editor\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Paper from \"@material-ui/core/Paper\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport ExpandIcon from \"@material-ui/icons/ExpandMore\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Collapse from \"@material-ui/core/Collapse\"\nimport { grey } from \"@material-ui/core/colors\"\nimport classnames from \"classnames\"\n\nconst useStyles = makeStyles({\n  container: { margin: 8 },\n  header: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: 8,\n    paddingLeft: 16,\n    paddingRight: 16\n  },\n  title: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    flexGrow: 1,\n    paddingLeft: 8,\n    color: grey[800],\n    \"& span\": {\n      color: grey[600],\n      fontSize: 12\n    }\n  },\n  expandButton: {\n    padding: 0,\n    width: 30,\n    height: 30,\n    \"& .icon\": {\n      marginTop: -6,\n      width: 20,\n      height: 20,\n      transition: \"500ms transform\",\n      \"&.expanded\": {\n        transform: \"rotate(180deg)\"\n      }\n    }\n  },\n  expandedContent: {\n    maxHeight: 300,\n    overflowY: \"auto\",\n    \"&.noScroll\": {\n      overflowY: \"visible\",\n      overflow: \"visible\"\n    }\n  }\n})\n\nexport default ({\n  icon,\n  title,\n  subTitle,\n  children,\n  noScroll = false,\n  expandedByDefault = false\n}) => {\n  const classes = useStyles()\n  const content = (\n    <div\n      className={classnames(classes.expandedContent, noScroll && \"noScroll\")}\n    >\n      {children}\n    </div>\n  )\n\n  const [expanded, changeExpanded] = useState(expandedByDefault)\n  return (\n    <Paper className={classes.container}>\n      <div className={classes.header}>\n        {icon}\n        <div className={classes.title}>\n          {title} <span>{subTitle}</span>\n        </div>\n        <IconButton\n          onClick={() => changeExpanded(!expanded)}\n          className={classes.expandButton}\n        >\n          <ExpandIcon className={classnames(\"icon\", expanded && \"expanded\")} />\n        </IconButton>\n      </div>\n      {noScroll ? (\n        expanded ? (\n          content\n        ) : null\n      ) : (\n        <Collapse in={expanded}>{content}</Collapse>\n      )}\n    </Paper>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport DescriptionIcon from \"@material-ui/icons/Description\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport { grey } from \"@material-ui/core/colors\"\nimport Markdown from \"react-markdown\"\n\nconst useStyles = makeStyles({\n  markdownContainer: {\n    paddingLeft: 16,\n    paddingRight: 16,\n    fontSize: 12,\n    \"& h1\": { fontSize: 18 },\n    \"& h2\": { fontSize: 14 },\n    \"& h3\": { fontSize: 12 },\n    \"& h4\": { fontSize: 12 },\n    \"& h5\": { fontSize: 12 },\n    \"& h6\": { fontSize: 12 },\n    \"& p\": { fontSize: 12 },\n    \"& a\": {},\n    \"& img\": { width: \"100%\" }\n  }\n})\n\nexport default ({ description }) => {\n  const classes = useStyles()\n\n  return (\n    <SidebarBoxContainer\n      title=\"Task Description\"\n      icon={<DescriptionIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      <div className={classes.markdownContainer}>\n        <Markdown source={description} />\n      </div>\n    </SidebarBoxContainer>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport CollectionsIcon from \"@material-ui/icons/Collections\"\nimport { grey } from \"@material-ui/core/colors\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport Avatar from \"@material-ui/core/Avatar\"\n\nconst useStyles = makeStyles({\n  img: { width: 40, height: 40, borderRadius: 8 }\n})\n\nexport default ({ images, onSelect }) => {\n  const classes = useStyles()\n  return (\n    <SidebarBoxContainer\n      title=\"Images\"\n      subTitle={`(${images.length})`}\n      icon={<CollectionsIcon style={{ color: grey[700] }} />}\n    >\n      <div>\n        <List>\n          {images.map((img, i) => (\n            <ListItem button onClick={() => onSelect(img)} dense key={i}>\n              <img className={classes.img} src={img.src} />\n              <ListItemText\n                primary={img.name}\n                secondary={`${(img.regions || []).length} Labels`}\n              />\n            </ListItem>\n          ))}\n        </List>\n      </div>\n    </SidebarBoxContainer>\n  )\n}\n","import { grey, blue, orange, purple } from \"@material-ui/core/colors\"\n\nexport default {\n  container: {\n    fontSize: 11,\n    fontWeight: \"bold\",\n    color: grey[700],\n    \"& .icon\": {\n      marginTop: 4,\n      width: 16,\n      height: 16\n    },\n    \"& .icon2\": {\n      opacity: 0.5,\n      width: 16,\n      height: 16,\n      transition: \"200ms opacity\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n        opacity: 1\n      }\n    }\n  },\n  row: {\n    padding: 4,\n    cursor: \"pointer\",\n    \"&.header:hover\": {\n      backgroundColor: \"#fff\"\n    },\n    \"&.highlighted\": {\n      backgroundColor: blue[100]\n    },\n    \"&:hover\": {\n      backgroundColor: blue[50],\n      color: grey[800]\n    }\n  },\n  chip: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    padding: 2,\n    borderRadius: 2,\n    paddingLeft: 4,\n    paddingRight: 4,\n    alignItems: \"center\",\n    \"& .color\": {\n      borderRadius: 5,\n      width: 10,\n      height: 10,\n      marginRight: 4\n    },\n    \"& .text\": {}\n  }\n}\n","// @flow\n\nimport React, { Fragment, useState } from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport { grey } from \"@material-ui/core/colors\"\nimport RegionIcon from \"@material-ui/icons/PictureInPicture\"\nimport Grid from \"@material-ui/core/Grid\"\nimport ReorderIcon from \"@material-ui/icons/SwapVert\"\nimport PieChartIcon from \"@material-ui/icons/PieChart\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport LockIcon from \"@material-ui/icons/Lock\"\nimport UnlockIcon from \"@material-ui/icons/LockOpen\"\nimport VisibleIcon from \"@material-ui/icons/Visibility\"\nimport VisibleOffIcon from \"@material-ui/icons/VisibilityOff\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\n\nconst useStyles = makeStyles(styles)\n\nconst Chip = ({ color, text }) => {\n  const classes = useStyles()\n  return (\n    <span className={classes.chip}>\n      <div className=\"color\" style={{ backgroundColor: color }} />\n      <div className=\"text\">{text}</div>\n    </span>\n  )\n}\n\nconst Row = ({\n  header,\n  highlighted,\n  order,\n  classification,\n  area,\n  tags,\n  trash,\n  lock,\n  visible,\n  onClick\n}) => {\n  const classes = useStyles()\n  const [mouseOver, changeMouseOver] = useState(false)\n  return (\n    <div\n      onClick={onClick}\n      onMouseEnter={() => changeMouseOver(true)}\n      onMouseLeave={() => changeMouseOver(false)}\n      className={classnames(classes.row, { header, highlighted })}\n    >\n      <Grid container alignItems=\"center\">\n        <Grid item xs={2}>\n          <div style={{ textAlign: \"right\", paddingRight: 10 }}>{order}</div>\n        </Grid>\n        <Grid item xs={5}>\n          {classification}\n        </Grid>\n        <Grid item xs={2}>\n          <div style={{ textAlign: \"right\", paddingRight: 6 }}>{area}</div>\n        </Grid>\n        <Grid item xs={1}>\n          {trash}\n        </Grid>\n        <Grid item xs={1}>\n          {lock}\n        </Grid>\n        <Grid item xs={1}>\n          {visible}\n        </Grid>\n      </Grid>\n    </div>\n  )\n}\n\nexport default ({\n  regions,\n  onDeleteRegion,\n  onChangeRegion,\n  onSelectRegion\n}) => {\n  const classes = useStyles()\n  return (\n    <SidebarBoxContainer\n      title=\"Regions\"\n      subTitle=\"\"\n      icon={<RegionIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      <div className={classes.container}>\n        <Row\n          header\n          highlighted={false}\n          order={<ReorderIcon className=\"icon\" />}\n          classification={<div style={{ paddingLeft: 10 }}>Class</div>}\n          area={<PieChartIcon className=\"icon\" />}\n          trash={<TrashIcon className=\"icon\" />}\n          lock={<LockIcon className=\"icon\" />}\n          visible={<VisibleIcon className=\"icon\" />}\n        />\n        <div\n          style={{\n            borderTop: `1px solid ${grey[200]}`,\n            marginTop: 2,\n            marginBottom: 2\n          }}\n        />\n        {regions.map((r, i) => (\n          <Row\n            header={false}\n            highlighted={r.highlighted}\n            onClick={() => onSelectRegion(r)}\n            key={r.id}\n            order={`#${i + 1}`}\n            classification={\n              <Chip text={r.cls || \"\"} color={r.color || \"#ddd\"} />\n            }\n            area=\"\"\n            trash={\n              <TrashIcon onClick={() => onDeleteRegion(r)} className=\"icon2\" />\n            }\n            lock={\n              r.locked ? (\n                <LockIcon\n                  onClick={() => onChangeRegion({ ...r, locked: false })}\n                  className=\"icon2\"\n                />\n              ) : (\n                <UnlockIcon\n                  onClick={() => onChangeRegion({ ...r, locked: true })}\n                  className=\"icon2\"\n                />\n              )\n            }\n            visible={\n              r.visible || r.visible === undefined ? (\n                <VisibleIcon\n                  onClick={() => onChangeRegion({ ...r, visible: false })}\n                  className=\"icon2\"\n                />\n              ) : (\n                <VisibleOffIcon\n                  onClick={() => onChangeRegion({ ...r, visible: true })}\n                  className=\"icon2\"\n                />\n              )\n            }\n          />\n        ))}\n      </div>\n    </SidebarBoxContainer>\n  )\n}\n","// @flow\n\nimport React, { setState } from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport HistoryIcon from \"@material-ui/icons/History\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\"\nimport UndoIcon from \"@material-ui/icons/Undo\"\nimport moment from \"moment\"\nimport { grey } from \"@material-ui/core/colors\"\n\nconst useStyles = makeStyles({\n  emptyText: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    color: grey[500],\n    textAlign: \"center\",\n    padding: 20\n  }\n})\n\nexport default ({\n  history,\n  onRestoreHistory\n}: {\n  history: Array<{ name: string, time: Date }>\n}) => {\n  const classes = useStyles()\n\n  return (\n    <SidebarBoxContainer\n      title=\"History\"\n      icon={<HistoryIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      <List>\n        {history.length === 0 && (\n          <div className={classes.emptyText}>No History Yet</div>\n        )}\n        {history.map(({ name, time }, i) => (\n          <ListItem button dense key={i}>\n            <ListItemText\n              primary={name}\n              secondary={moment(time).format(\"LT\")}\n            />\n            {i === 0 && (\n              <ListItemSecondaryAction onClick={onRestoreHistory}>\n                <IconButton>\n                  <UndoIcon />\n                </IconButton>\n              </ListItemSecondaryAction>\n            )}\n          </ListItem>\n        ))}\n      </List>\n    </SidebarBoxContainer>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\n\nexport default ({ state, lastAction }: any) => {\n  const image = (state.images || []).find(\n    img => img.src === state.selectedImage\n  )\n  const region = image ? (image.regions || []).find(r => r.highlighted) : null\n\n  return (\n    <SidebarBoxContainer title=\"Debug\" icon={<span />} expandedByDefault>\n      <div style={{ padding: 4 }}>\n        <div>\n          <b>region</b>:\n        </div>\n        <pre>{JSON.stringify(region, null, \"  \")}</pre>\n        <div>\n          <b>lastAction</b>:\n        </div>\n        <pre>{JSON.stringify(lastAction, null, \"  \")}</pre>\n        <div>\n          <b>mode</b>:\n        </div>\n        <pre>{JSON.stringify(state.mode, null, \"  \")}</pre>\n      </div>\n    </SidebarBoxContainer>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport StyleIcon from \"@material-ui/icons/Style\"\nimport { grey } from \"@material-ui/core/colors\"\nimport Select from \"react-select\"\n\nconst useStyles = makeStyles({})\n\ntype Props = {\n  tags: Array<string>,\n  currentImage: { cls?: string, tags?: Array<string> },\n  imageClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  onChangeImage: (Array<string>) => any\n}\n\nexport default ({\n  currentImage,\n  imageClsList = [],\n  imageTagList = [],\n  onChangeImage\n}: Props) => {\n  const { tags = [], cls = null } = currentImage\n  return (\n    <SidebarBoxContainer\n      title=\"Image Tags\"\n      expandedByDefault\n      noScroll\n      icon={<StyleIcon style={{ color: grey[700] }} />}\n    >\n      {imageClsList.length > 0 && (\n        <div style={{ padding: 8 }}>\n          <Select\n            placeholder=\"Image Classification\"\n            onChange={o => onChangeImage({ cls: o.value })}\n            value={cls ? { value: cls, label: cls } : cls}\n            options={imageClsList.map(c => ({ value: c, label: c }))}\n          />\n        </div>\n      )}\n      {imageTagList.length > 0 && (\n        <div style={{ padding: 8, paddingTop: 0 }}>\n          <Select\n            isMulti\n            placeholder=\"Image Tags\"\n            onChange={o => onChangeImage({ tags: o.map(a => a.value) })}\n            value={tags.map(r => ({ value: r, label: r }))}\n            options={imageTagList.map(c => ({ value: c, label: c }))}\n          />\n        </div>\n      )}\n    </SidebarBoxContainer>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport TaskDescription from \"../TaskDescriptionSidebarBox\"\nimport ImageSelector from \"../ImageSelectorSidebarBox\"\nimport RegionSelector from \"../RegionSelectorSidebarBox\"\nimport History from \"../HistorySidebarBox\"\nimport DebugBox from \"../DebugSidebarBox\"\nimport TagsSidebarBox from \"../TagsSidebarBox\"\nimport type { Region } from \"../ImageCanvas/region-tools.js\"\n\nconst useStyles = makeStyles({})\n\ntype Image = {\n  name: string,\n  src: string,\n  cls?: string,\n  tags?: Array<string>,\n  thumbnailSrc?: string,\n  regions?: Array<Region>\n}\n\ntype Props = {\n  debug: any,\n  taskDescription: string,\n  images: Array<Image>,\n  regions: Array<Region>,\n  history: Array<{ state: Object, name: string, time: Date }>,\n\n  labelImages?: boolean,\n  currentImage?: Image,\n  imageClsList?: Array<string>,\n  imageTagList?: Array<string>,\n\n  onChangeImage: Image => any,\n  onSelectRegion: Region => any,\n  onSelectImage: Image => any,\n  onChangeRegion: Region => any,\n  onDeleteRegion: Region => any,\n  onRestoreHistory: () => any\n}\n\nexport default ({\n  debug,\n  taskDescription,\n  images,\n  regions,\n  history,\n  labelImages,\n  currentImage,\n  imageClsList,\n  imageTagList,\n  onChangeImage,\n  onSelectRegion,\n  onSelectImage,\n  onChangeRegion,\n  onDeleteRegion,\n  onRestoreHistory\n}: Props) => {\n  const classes = useStyles()\n\n  return (\n    <div>\n      {debug && <DebugBox state={debug} lastAction={debug.lastAction} />}\n      <TaskDescription description={taskDescription} />\n      {labelImages && (\n        <TagsSidebarBox\n          currentImage={currentImage}\n          imageClsList={imageClsList}\n          imageTagList={imageTagList}\n          onChangeImage={onChangeImage}\n          expandedByDefault\n        />\n      )}\n      <ImageSelector onSelect={onSelectImage} images={images} />\n      <RegionSelector\n        regions={regions}\n        onSelectRegion={onSelectRegion}\n        onChangeRegion={onChangeRegion}\n        onDeleteRegion={onDeleteRegion}\n      />\n      <History history={history} onRestoreHistory={() => onRestoreHistory()} />\n    </div>\n  )\n}\n","// @flow\n\nimport React, { Fragment, useEffect, useState } from \"react\"\n\nexport default ({\n  mousePosition,\n  x,\n  y\n}: {\n  mousePosition: { current: { x: number, y: number } },\n  x?: number,\n  y?: number\n}) => {\n  const [forceRenderState, changeForceRenderState] = useState()\n\n  if (mousePosition) {\n    x = mousePosition.current.x\n    y = mousePosition.current.y\n  }\n\n  useEffect(() => {\n    if (!mousePosition) return\n    const interval = setInterval(() => {\n      if (x !== mousePosition.current.x || y !== mousePosition.current.y) {\n        changeForceRenderState([\n          mousePosition.current.x,\n          mousePosition.current.y\n        ])\n      }\n    }, 10)\n    return () => clearInterval(interval)\n  })\n\n  return (\n    <Fragment>\n      <div\n        style={{\n          position: \"absolute\",\n          height: \"100%\",\n          width: 1,\n          backgroundColor: \"#f00\",\n          left: x,\n          pointerEvents: \"none\",\n          top: 0\n        }}\n      />\n      <div\n        style={{\n          position: \"absolute\",\n          width: \"100%\",\n          height: 1,\n          backgroundColor: \"#f00\",\n          top: y,\n          pointerEvents: \"none\",\n          left: 0\n        }}\n      />\n    </Fragment>\n  )\n}\n","// @flow\n\nimport { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  regionInfo: {\n    fontSize: 12,\n    cursor: \"default\",\n    transition: \"opacity 200ms\",\n    opacity: 0.7,\n    \"&:hover\": {\n      opacity: 0.9,\n      cursor: \"pointer\"\n    },\n    \"&.highlighted\": {\n      opacity: 0.9,\n      \"&:hover\": {\n        opacity: 1\n      }\n    },\n    // pointerEvents: \"none\",\n    fontWeight: 600,\n    color: grey[900],\n    padding: 8,\n    \"& .name\": {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      \"& .circle\": {\n        marginRight: 4,\n        boxShadow: \"0px 0px 2px rgba(0,0,0,0.4)\",\n        width: 10,\n        height: 10,\n        borderRadius: 5\n      }\n    },\n    \"& .tags\": {\n      \"& .tag\": {\n        color: grey[700],\n        display: \"inline-block\",\n        margin: 1,\n        fontSize: 10,\n        textDecoration: \"underline\"\n      }\n    }\n  }\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Paper from \"@material-ui/core/Paper\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\nimport type { Region } from \"../ImageCanvas/region-tools.js\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Button from \"@material-ui/core/Button\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport CheckIcon from \"@material-ui/icons/Check\"\nimport UndoIcon from \"@material-ui/icons/Undo\"\nimport Select from \"react-select\"\n\nconst useStyles = makeStyles(styles)\n\ntype Props = {\n  region: Region,\n  editing?: boolean,\n  allowedClasses?: Array<string>,\n  allowedTags?: Array<string>,\n  cls?: string,\n  tags?: Array<string>,\n  onDelete: Region => null,\n  onChange: Region => null,\n  onClose: Region => null,\n  onOpen: Region => null\n}\n\nexport default ({\n  region,\n  editing,\n  allowedClasses = [\"Laptop\", \"Mouse\", \"Compuda\"],\n  allowedTags = [\"Dog\", \"Cat\", \"Woof\", \"Electronic Device\"],\n  onDelete,\n  onChange,\n  onClose,\n  onOpen\n}: Props) => {\n  const classes = useStyles()\n\n  return (\n    <Paper\n      onClick={() => (!editing ? onOpen(region) : null)}\n      className={classnames(classes.regionInfo, {\n        highlighted: region.highlighted\n      })}\n    >\n      {!editing ? (\n        <div>\n          {region.cls && (\n            <div className=\"name\">\n              <div\n                className=\"circle\"\n                style={{ backgroundColor: region.color }}\n              />\n              {region.cls}\n            </div>\n          )}\n          {region.tags && (\n            <div className=\"tags\">\n              {region.tags.map(t => (\n                <div key={t} className=\"tag\">\n                  {t}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div style={{ width: 200 }}>\n          <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n            <div\n              style={{\n                display: \"flex\",\n                backgroundColor: region.color,\n                color: \"#fff\",\n                padding: 4,\n                paddingLeft: 8,\n                paddingRight: 8,\n                borderRadius: 4,\n                fontWeight: \"bold\",\n                textShadow: \"0px 0px 5px rgba(0,0,0,0.4)\"\n              }}\n            >\n              {region.type}\n            </div>\n            <div style={{ flexGrow: 1 }} />\n            <IconButton\n              onClick={() => onDelete(region)}\n              tabIndex={-1}\n              style={{ width: 22, height: 22 }}\n              size=\"small\"\n              variant=\"outlined\"\n            >\n              <TrashIcon style={{ marginTop: -8, width: 16, height: 16 }} />\n            </IconButton>\n          </div>\n          {allowedClasses.length > 0 && (\n            <div style={{ marginTop: 6 }}>\n              <Select\n                placeholder=\"Classification\"\n                onChange={o =>\n                  onChange({\n                    ...(region: any),\n                    cls: o.value\n                  })\n                }\n                value={\n                  region.cls ? { label: region.cls, value: region.cls } : null\n                }\n                options={allowedClasses.map(c => ({ value: c, label: c }))}\n              />\n            </div>\n          )}\n          {allowedTags.length > 0 && (\n            <div style={{ marginTop: 4 }}>\n              <Select\n                onChange={newTags =>\n                  onChange({\n                    ...(region: any),\n                    tags: newTags.map(t => t.value)\n                  })\n                }\n                placeholder=\"Tags\"\n                value={(region.tags || []).map(c => ({ label: c, value: c }))}\n                isMulti\n                options={allowedTags.map(c => ({ value: c, label: c }))}\n              />\n            </div>\n          )}\n          <div style={{ marginTop: 4, display: \"flex\" }}>\n            <div style={{ flexGrow: 1 }} />\n            <Button\n              onClick={() => onClose(region)}\n              size=\"small\"\n              variant=\"contained\"\n              color=\"primary\"\n            >\n              <CheckIcon />\n            </Button>\n          </div>\n        </div>\n      )}\n    </Paper>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport classnames from \"classnames\"\nimport { makeStyles } from \"@material-ui/styles\"\n\nconst useStyles = makeStyles({\n  \"@keyframes borderDance\": {\n    from: { strokeDashoffset: 0 },\n    to: { strokeDashoffset: 100 }\n  },\n  highlightBox: {\n    transition: \"opacity 500ms\",\n    \"&:not(.highlighted)\": {\n      opacity: 0\n    },\n    \"&:not(.highlighted):hover\": {\n      opacity: 0.6\n    },\n    \"& path\": {\n      vectorEffect: \"non-scaling-stroke\",\n      strokeWidth: 2,\n      stroke: \"#FFF\",\n      fill: \"none\",\n      strokeDasharray: 5,\n      animationName: \"$borderDance\",\n      animationDuration: \"4s\",\n      animationTimingFunction: \"linear\",\n      animationIterationCount: \"infinite\",\n      animationPlayState: \"running\"\n    }\n  }\n})\n\nexport default ({\n  mouseEvents,\n  dragWithPrimary,\n  zoomWithPrimary,\n  createWithPrimary,\n  onBeginMovePoint,\n  onSelectRegion,\n  region: r,\n  pbox\n}: {\n  mouseEvents: any,\n  dragWithPrimary: boolean,\n  zoomWithPrimary: boolean,\n  createWithPrimary: boolean,\n  onBeginMovePoint: Function,\n  onSelectRegion: Function,\n  region: any,\n  pbox: { x: number, y: number, w: number, h: number }\n}) => {\n  const classes = useStyles()\n  return (\n    <svg\n      key={r.id}\n      className={classnames(classes.highlightBox, {\n        highlighted: r.highlighted\n      })}\n      {...mouseEvents}\n      {...(!zoomWithPrimary && !dragWithPrimary\n        ? {\n            onMouseDown: e => {\n              if (\n                !r.locked &&\n                r.type === \"point\" &&\n                r.highlighted &&\n                e.button === 0\n              ) {\n                return onBeginMovePoint(r)\n              }\n              if (e.button === 0 && !createWithPrimary) return onSelectRegion(r)\n              mouseEvents.onMouseDown(e)\n            }\n          }\n        : {})}\n      style={{\n        ...(r.highlighted\n          ? {\n              pointerEvents: r.type !== \"point\" ? \"none\" : undefined,\n              cursor: \"grab\"\n            }\n          : {\n              cursor: !(zoomWithPrimary || dragWithPrimary || createWithPrimary)\n                ? \"pointer\"\n                : undefined,\n              pointerEvents:\n                zoomWithPrimary ||\n                dragWithPrimary ||\n                (createWithPrimary && !r.highlighted)\n                  ? \"none\"\n                  : undefined\n            }),\n        position: \"absolute\",\n        left: pbox.x - 5,\n        top: pbox.y - 5,\n        width: pbox.w + 10,\n        height: pbox.h + 10\n      }}\n    >\n      <path\n        d={`M5,5 L${pbox.w + 5},5 L${pbox.w + 5},${pbox.h + 5} L5,${pbox.h +\n          5} Z`}\n      />\n    </svg>\n  )\n}\n","// @flow\nimport React, { Fragment, useRef, useState, useLayoutEffect } from \"react\"\nimport { Matrix } from \"transformation-matrix-js\"\nimport getImageData from \"get-image-data\"\nimport Crosshairs from \"../Crosshairs\"\nimport type {\n  Region,\n  PixelRegion,\n  Point,\n  Polygon,\n  Box\n} from \"./region-tools.js\"\nimport { getEnclosingBox } from \"./region-tools.js\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\nimport RegionLabel from \"../RegionLabel\"\nimport LockIcon from \"@material-ui/icons/Lock\"\nimport Paper from \"@material-ui/core/Paper\"\nimport HighlightBox from \"../HighlightBox\"\n// import excludePatternSrc from \"./xpattern.png\"\nimport excludePatternSrc from \"./xpattern.js\"\n\nconst useStyles = makeStyles(styles)\n\nconst boxCursorMap = [\n  [\"nw-resize\", \"n-resize\", \"ne-resize\"],\n  [\"w-resize\", \"grab\", \"e-resize\"],\n  [\"sw-resize\", \"s-resize\", \"se-resize\"]\n]\n\ntype Props = {\n  regions: Array<Region>,\n  imageSrc: string,\n  onMouseMove?: ({ x: number, y: number }) => any,\n  onMouseDown?: ({ x: number, y: number }) => any,\n  onMouseUp?: ({ x: number, y: number }) => any,\n  dragWithPrimary?: boolean,\n  zoomWithPrimary?: boolean,\n  createWithPrimary?: boolean,\n  showTags?: boolean,\n  realSize?: { width: number, height: number, unitName: string },\n  showCrosshairs?: boolean,\n  showPointDistances?: boolean,\n  pointDistancePrecision?: number,\n  regionClsList?: Array<string>,\n  regionTagList?: Array<string>,\n  allowedArea?: { x: number, y: number, w: number, h: number },\n\n  onChangeRegion: Region => any,\n  onBeginRegionEdit: Region => any,\n  onCloseRegionEdit: Region => any,\n  onDeleteRegion: Region => any,\n  onBeginBoxTransform: (Box, [number, number]) => any,\n  onBeginMovePolygonPoint: (Polygon, index: number) => any,\n  onAddPolygonPoint: (Polygon, point: [number, number], index: number) => any,\n  onSelectRegion: Region => any,\n  onBeginMovePoint: Point => any,\n  onImageLoaded: ({ width: number, height: number }) => any\n}\n\nconst getDefaultMat = () => Matrix.from(1, 0, 0, 1, -10, -10)\n\nexport default ({\n  regions,\n  imageSrc,\n  realSize,\n  showTags,\n  onMouseMove = p => null,\n  onMouseDown = p => null,\n  onMouseUp = p => null,\n  dragWithPrimary = false,\n  zoomWithPrimary = false,\n  createWithPrimary = false,\n  pointDistancePrecision = 0,\n  regionClsList,\n  regionTagList,\n  showCrosshairs,\n  showPointDistances,\n  allowedArea,\n\n  onImageLoaded,\n  onChangeRegion,\n  onBeginRegionEdit,\n  onCloseRegionEdit,\n  onBeginBoxTransform,\n  onBeginMovePolygonPoint,\n  onAddPolygonPoint,\n  onSelectRegion,\n  onBeginMovePoint,\n  onDeleteRegion\n}: Props) => {\n  const classes = useStyles()\n\n  const canvasEl = useRef(null)\n  const image = useRef(null)\n  const layoutParams = useRef({})\n  const excludePattern = useRef(null)\n  const [imageLoaded, changeImageLoaded] = useState(false)\n  const [dragging, changeDragging] = useState(false)\n  const [maskImagesLoaded, changeMaskImagesLoaded] = useState(0)\n  const [zoomStart, changeZoomStart] = useState(null)\n  const [zoomEnd, changeZoomEnd] = useState(null)\n  const mousePosition = useRef({ x: 0, y: 0 })\n  const prevMousePosition = useRef({ x: 0, y: 0 })\n  const [mat, changeMat] = useState(getDefaultMat())\n  const maskImages = useRef({})\n\n  const innerMousePos = mat.applyToPoint(\n    mousePosition.current.x,\n    mousePosition.current.y\n  )\n\n  const projectRegionBox = r => {\n    const { iw, ih } = layoutParams.current\n    const bbox = getEnclosingBox(r)\n    const margin = r.type === \"point\" ? 15 : 2\n    const cbox = {\n      x: bbox.x * iw - margin,\n      y: bbox.y * ih - margin,\n      w: bbox.w * iw + margin * 2,\n      h: bbox.h * ih + margin * 2\n    }\n    const pbox = {\n      ...mat\n        .clone()\n        .inverse()\n        .applyToPoint(cbox.x, cbox.y),\n      w: cbox.w / mat.a,\n      h: cbox.h / mat.d\n    }\n    return pbox\n  }\n\n  useLayoutEffect(() => {\n    if (image.current === null) {\n      image.current = new Image()\n      image.current.onload = () => {\n        changeImageLoaded(true)\n        onImageLoaded({\n          width: image.current.naturalWidth,\n          height: image.current.naturalHeight\n        })\n      }\n      image.current.src = imageSrc\n    }\n    const canvas = canvasEl.current\n    const { clientWidth, clientHeight } = canvas\n    canvas.width = clientWidth\n    canvas.height = clientHeight\n    const context = canvas.getContext(\"2d\")\n    if (excludePattern.current === null) {\n      excludePattern.current = {\n        image: new Image(),\n        pattern: null\n      }\n      excludePattern.current.image.onload = () => {\n        excludePattern.current.pattern = context.createPattern(\n          excludePattern.current.image,\n          \"repeat\"\n        )\n      }\n      excludePattern.current.image.src = excludePatternSrc\n    }\n    context.save()\n    context.transform(\n      ...mat\n        .clone()\n        .inverse()\n        .toArray()\n    )\n\n    const fitScale = Math.max(\n      image.current.naturalWidth / (clientWidth - 20),\n      image.current.naturalHeight / (clientHeight - 20)\n    )\n\n    const [iw, ih] = [\n      image.current.naturalWidth / fitScale,\n      image.current.naturalHeight / fitScale\n    ]\n\n    layoutParams.current = {\n      iw,\n      ih,\n      fitScale,\n      canvasWidth: clientWidth,\n      canvasHeight: clientHeight\n    }\n\n    context.drawImage(image.current, 0, 0, iw, ih)\n\n    if (allowedArea) {\n      // Pattern to indicate the NOT allowed areas\n      const { x, y, w, h } = allowedArea\n      context.save()\n      context.globalAlpha = 0.25\n      const outer = [[0, 0], [iw, 0], [iw, ih], [0, ih]]\n      const inner = [\n        [x * iw, y * ih],\n        [x * iw + w * iw, y * ih],\n        [x * iw + w * iw, y * ih + h * ih],\n        [x * iw, y * ih + h * ih]\n      ]\n      context.moveTo(...outer[0])\n      outer.forEach(p => context.lineTo(...p))\n      context.lineTo(...outer[0])\n      context.closePath()\n\n      inner.reverse()\n      context.moveTo(...inner[0])\n      inner.forEach(p => context.lineTo(...p))\n      context.lineTo(...inner[0])\n\n      context.fillStyle = excludePattern.current.pattern || \"#f00\"\n      context.fill()\n\n      context.restore()\n    }\n\n    context.save()\n    context.globalAlpha = mat.a * 0.5 + 0.5\n    context.lineWidth = mat.a * 1 + 1\n    if (context.globalAlpha > 0.6) {\n      context.shadowColor = \"black\"\n      context.shadowBlur = 4\n    }\n    for (const region of regions.filter(\n      r => r.visible || r.visible === undefined\n    )) {\n      switch (region.type) {\n        case \"point\": {\n          context.save()\n\n          context.beginPath()\n          context.strokeStyle = region.color\n          context.moveTo(region.x * iw - 10, region.y * ih)\n          context.lineTo(region.x * iw - 2, region.y * ih)\n          context.moveTo(region.x * iw + 10, region.y * ih)\n          context.lineTo(region.x * iw + 2, region.y * ih)\n          context.moveTo(region.x * iw, region.y * ih - 10)\n          context.lineTo(region.x * iw, region.y * ih - 2)\n          context.moveTo(region.x * iw, region.y * ih + 10)\n          context.lineTo(region.x * iw, region.y * ih + 2)\n          context.moveTo(region.x * iw + 5, region.y * ih)\n          context.arc(region.x * iw, region.y * ih, 5, 0, 2 * Math.PI)\n          context.stroke()\n          context.restore()\n          break\n        }\n        case \"box\": {\n          context.save()\n\n          context.shadowColor = \"black\"\n          context.shadowBlur = 4\n          context.strokeStyle = region.color\n          context.strokeRect(\n            region.x * iw,\n            region.y * ih,\n            region.w * iw,\n            region.h * ih\n          )\n\n          context.restore()\n          break\n        }\n        case \"polygon\": {\n          context.save()\n\n          context.shadowColor = \"black\"\n          context.shadowBlur = 4\n          context.strokeStyle = region.color\n\n          context.beginPath()\n          context.moveTo(region.points[0][0] * iw, region.points[0][1] * ih)\n          for (const point of region.points) {\n            context.lineTo(point[0] * iw, point[1] * ih)\n          }\n          if (!region.open) context.closePath()\n          context.stroke()\n          context.restore()\n          break\n        }\n        case \"pixel\": {\n          context.save()\n\n          if (maskImages.current[region.src]) {\n            if (maskImages.current[region.src].nodeName === \"CANVAS\") {\n              context.globalAlpha = 0.6\n              context.drawImage(\n                maskImages.current[region.src],\n                region.sx * iw,\n                region.sy * ih,\n                region.w * iw,\n                region.h * ih\n              )\n            }\n          } else {\n            maskImages.current[region.src] = new Image()\n            maskImages.current[region.src].onload = () => {\n              const img = maskImages.current[region.src]\n              const newCanvas = document.createElement(\"canvas\")\n              newCanvas.width = img.naturalWidth\n              newCanvas.height = img.naturalHeight\n              const ctx = newCanvas.getContext(\"2d\")\n              ctx.drawImage(img, 0, 0)\n              const imgData = ctx.getImageData(\n                0,\n                0,\n                img.naturalWidth,\n                img.naturalHeight\n              )\n              for (let i = 0; i < imgData.data.length; i += 4) {\n                const [r, g, b, a] = imgData.data.slice(i, i + 4)\n                const black = r < 10 && g < 10 && b < 10\n                imgData.data[i] = 0\n                imgData.data[i + 1] = 0\n                imgData.data[i + 2] = black ? 255 : 0\n                imgData.data[i + 3] = black ? 255 : 0\n              }\n              ctx.clearRect(0, 0, img.naturalWidth, img.naturalHeight)\n              ctx.putImageData(imgData, 0, 0)\n              maskImages.current[region.src] = newCanvas\n              changeMaskImagesLoaded(maskImagesLoaded + 1)\n            }\n            maskImages.current[region.src].src = region.src\n          }\n\n          context.restore()\n          break\n        }\n      }\n    }\n    context.restore()\n    context.restore()\n  })\n\n  const zoomIn = (direction, point) => {\n    const [mx, my] = [point.x, point.y]\n    let scale =\n      typeof direction === \"object\" ? direction.to / mat.a : 1 + 0.2 * direction\n\n    // NOTE: We're mutating mat here\n    mat.translate(mx, my).scaleU(scale)\n    if (mat.a > 2) mat.scaleU(2 / mat.a)\n    if (mat.a < 0.1) mat.scaleU(0.1 / mat.a)\n    mat.translate(-mx, -my)\n\n    changeMat(mat.clone())\n  }\n\n  const mouseEvents = {\n    onMouseMove: e => {\n      const { left, top } = canvasEl.current.getBoundingClientRect()\n      prevMousePosition.current.x = mousePosition.current.x\n      prevMousePosition.current.y = mousePosition.current.y\n      mousePosition.current.x = e.clientX - left\n      mousePosition.current.y = e.clientY - top\n\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n\n      if (zoomWithPrimary && zoomStart) {\n        changeZoomEnd(projMouse)\n      }\n\n      const { iw, ih } = layoutParams.current\n      onMouseMove({ x: projMouse.x / iw, y: projMouse.y / ih })\n\n      if (dragging) {\n        mat.translate(\n          prevMousePosition.current.x - mousePosition.current.x,\n          prevMousePosition.current.y - mousePosition.current.y\n        )\n\n        changeMat(mat.clone())\n        // changeForceRenderState(Math.random())\n      }\n      e.preventDefault()\n    },\n    onMouseDown: (e, specialEvent = {}) => {\n      e.preventDefault()\n\n      if (e.button === 1 || (e.button === 0 && dragWithPrimary))\n        return changeDragging(true)\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n      if (zoomWithPrimary && e.button === 0) {\n        changeZoomStart(projMouse)\n        changeZoomEnd(projMouse)\n        return\n      }\n      if (e.button === 0) {\n        if (specialEvent.type === \"resize-box\") {\n          // onResizeBox()\n        }\n        if (specialEvent.type === \"move-region\") {\n          // onResizeBox()\n        }\n        const { iw, ih } = layoutParams.current\n        onMouseDown({ x: projMouse.x / iw, y: projMouse.y / ih })\n      }\n    },\n    onMouseUp: e => {\n      e.preventDefault()\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n      if (zoomStart) {\n        const zoomEnd = projMouse\n        if (\n          Math.abs(zoomStart.x - zoomEnd.x) < 10 &&\n          Math.abs(zoomStart.y - zoomEnd.y) < 10\n        ) {\n          if (mat.a < 1) {\n            zoomIn({ to: 1 }, mousePosition.current)\n          } else {\n            zoomIn({ to: 0.25 }, mousePosition.current)\n          }\n        } else {\n          const { iw, ih } = layoutParams.current\n\n          if (zoomStart.x > zoomEnd.x) {\n            ;[zoomStart.x, zoomEnd.x] = [zoomEnd.x, zoomStart.x]\n          }\n          if (zoomStart.y > zoomEnd.y) {\n            ;[zoomStart.y, zoomEnd.y] = [zoomEnd.y, zoomStart.y]\n          }\n\n          // The region defined by zoomStart and zoomEnd should be the new transform\n          let scale = Math.min(\n            (zoomEnd.x - zoomStart.x) / iw,\n            (zoomEnd.y - zoomStart.y) / ih\n          )\n          if (scale < 0.1) scale = 0.1\n          if (scale > 10) scale = 10\n\n          const newMat = getDefaultMat()\n            .translate(zoomStart.x, zoomStart.y)\n            .scaleU(scale)\n\n          changeMat(newMat.clone())\n        }\n\n        changeZoomStart(null)\n        changeZoomEnd(null)\n      }\n      if (e.button === 1 || (e.button === 0 && dragWithPrimary))\n        return changeDragging(false)\n      if (e.button === 0) {\n        const { iw, ih } = layoutParams.current\n        onMouseUp({ x: projMouse.x / iw, y: projMouse.y / ih })\n      }\n    },\n    onWheel: e => {\n      const direction = e.deltaY > 0 ? 1 : e.deltaY < 0 ? -1 : 0\n      zoomIn(direction, mousePosition.current)\n      e.preventDefault()\n    }\n  }\n\n  const { iw, ih } = layoutParams.current\n\n  let zoomBox = !zoomStart\n    ? null\n    : {\n        ...mat\n          .clone()\n          .inverse()\n          .applyToPoint(zoomStart.x, zoomStart.y),\n        w: (zoomEnd.x - zoomStart.x) / mat.a,\n        h: (zoomEnd.y - zoomStart.y) / mat.d\n      }\n  if (zoomBox) {\n    if (zoomBox.w < 0) {\n      zoomBox.x += zoomBox.w\n      zoomBox.w *= -1\n    }\n    if (zoomBox.h < 0) {\n      zoomBox.y += zoomBox.h\n      zoomBox.h *= -1\n    }\n  }\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"100%\",\n        maxHeight: \"calc(100vh - 68px)\",\n        position: \"relative\",\n        overflow: \"hidden\",\n        cursor: createWithPrimary\n          ? \"crosshair\"\n          : dragging\n            ? \"grabbing\"\n            : dragWithPrimary\n              ? \"grab\"\n              : zoomWithPrimary\n                ? mat.a < 1\n                  ? \"zoom-out\"\n                  : \"zoom-in\"\n                : undefined\n      }}\n    >\n      {showCrosshairs && <Crosshairs mousePosition={mousePosition} />}\n      {regions\n        .filter(r => r.visible || r.visible === undefined)\n        .filter(r => !r.locked)\n        .map((r, i) => {\n          const pbox = projectRegionBox(r)\n          const { iw, ih } = layoutParams.current\n          return (\n            <Fragment>\n              <HighlightBox\n                region={r}\n                mouseEvents={mouseEvents}\n                dragWithPrimary={dragWithPrimary}\n                createWithPrimary={createWithPrimary}\n                zoomWithPrimary={zoomWithPrimary}\n                onBeginMovePoint={onBeginMovePoint}\n                onSelectRegion={onSelectRegion}\n                pbox={pbox}\n              />\n              {r.type === \"box\" &&\n                !dragWithPrimary &&\n                !zoomWithPrimary &&\n                !r.locked &&\n                r.highlighted &&\n                mat.a < 1.2 &&\n                [\n                  [0, 0],\n                  [0.5, 0],\n                  [1, 0],\n                  [1, 0.5],\n                  [1, 1],\n                  [0.5, 1],\n                  [0, 1],\n                  [0, 0.5],\n                  [0.5, 0.5]\n                ].map(([px, py], i) => (\n                  <div\n                    key={i}\n                    className={classes.transformGrabber}\n                    {...mouseEvents}\n                    onMouseDown={e => {\n                      if (e.button === 0)\n                        return onBeginBoxTransform(r, [px * 2 - 1, py * 2 - 1])\n                      mouseEvents.onMouseDown(e)\n                    }}\n                    style={{\n                      left: pbox.x - 4 - 2 + pbox.w * px,\n                      top: pbox.y - 4 - 2 + pbox.h * py,\n                      cursor: boxCursorMap[py * 2][px * 2],\n                      borderRadius: px === 0.5 && py === 0.5 ? 4 : undefined\n                    }}\n                  />\n                ))}\n              {r.type === \"polygon\" &&\n                !dragWithPrimary &&\n                !zoomWithPrimary &&\n                !r.locked &&\n                r.highlighted &&\n                r.points.map(([px, py], i) => {\n                  const proj = mat\n                    .clone()\n                    .inverse()\n                    .applyToPoint(px * iw, py * ih)\n                  return (\n                    <div\n                      key={i}\n                      {...mouseEvents}\n                      onMouseDown={e => {\n                        if (e.button === 0 && (!r.open || i === 0))\n                          return onBeginMovePolygonPoint(r, i)\n                        mouseEvents.onMouseDown(e)\n                      }}\n                      className={classes.transformGrabber}\n                      style={{\n                        cursor: !r.open\n                          ? \"move\"\n                          : i === 0\n                            ? \"pointer\"\n                            : undefined,\n                        pointerEvents:\n                          r.open && i === r.points.length - 1\n                            ? \"none\"\n                            : undefined,\n                        left: proj.x - 4,\n                        top: proj.y - 4\n                      }}\n                    />\n                  )\n                })}\n              {r.type === \"polygon\" &&\n                r.highlighted &&\n                !dragWithPrimary &&\n                !zoomWithPrimary &&\n                !r.locked &&\n                !r.open &&\n                r.points.length > 1 &&\n                r.points\n                  .map((p1, i) => [p1, r.points[(i + 1) % r.points.length]])\n                  .map(([p1, p2]) => [(p1[0] + p2[0]) / 2, (p1[1] + p2[1]) / 2])\n                  .map((pa, i) => {\n                    const proj = mat\n                      .clone()\n                      .inverse()\n                      .applyToPoint(pa[0] * iw, pa[1] * ih)\n                    return (\n                      <div\n                        key={i}\n                        {...mouseEvents}\n                        onMouseDown={e => {\n                          if (e.button === 0)\n                            return onAddPolygonPoint(r, pa, i + 1)\n                          mouseEvents.onMouseDown(e)\n                        }}\n                        className={classes.transformGrabber}\n                        style={{\n                          cursor: \"copy\",\n                          left: proj.x - 4,\n                          top: proj.y - 4,\n                          border: \"2px dotted #fff\",\n                          opacity: 0.5\n                        }}\n                      />\n                    )\n                  })}\n            </Fragment>\n          )\n        })}\n      {showTags &&\n        regions\n          .filter(r => r.visible || r.visible === undefined)\n          .map(region => {\n            const pbox = projectRegionBox(region)\n            const { iw, ih } = layoutParams.current\n            let margin = 8\n            if (region.highlighted && region.type === \"box\") margin += 6\n            const labelBoxHeight =\n              region.editingLabels && !region.locked ? 170 : 40\n            const coords =\n              pbox.y > labelBoxHeight\n                ? {\n                    left: pbox.x,\n                    bottom: layoutParams.current.canvasHeight - pbox.y + margin\n                  }\n                : { left: pbox.x, top: pbox.y + pbox.h + margin / 2 }\n            if (region.locked) {\n              return (\n                <Paper\n                  style={{\n                    position: \"absolute\",\n                    ...coords,\n                    zIndex: 10,\n                    backgroundColor: \"#fff\",\n                    borderRadius: 4,\n                    padding: 2,\n                    paddingBottom: 0,\n                    opacity: 0.5,\n                    pointerEvents: \"none\"\n                  }}\n                >\n                  <LockIcon style={{ width: 16, height: 16, color: \"#333\" }} />\n                </Paper>\n              )\n            }\n            return (\n              <div\n                style={{\n                  position: \"absolute\",\n                  ...coords,\n                  zIndex: 10 + (region.editingLabels ? 5 : 0)\n                }}\n                {...(!region.editingLabels ? mouseEvents : {})}\n                onMouseDown={e => e.preventDefault()}\n                onMouseUp={e => e.preventDefault()}\n                onMouseEnter={e => {\n                  if (region.editingLabels) {\n                    mouseEvents.onMouseUp(e)\n                    e.button = 1\n                    mouseEvents.onMouseUp(e)\n                  }\n                }}\n              >\n                <RegionLabel\n                  allowedClasses={regionClsList}\n                  allowedTags={regionTagList}\n                  onOpen={onBeginRegionEdit}\n                  onChange={onChangeRegion}\n                  onClose={onCloseRegionEdit}\n                  onDelete={onDeleteRegion}\n                  editing={region.editingLabels}\n                  region={region}\n                />\n              </div>\n            )\n          })}\n      {zoomWithPrimary &&\n        zoomBox !== null && (\n          <div\n            style={{\n              position: \"absolute\",\n              border: \"1px solid #fff\",\n              pointerEvents: \"none\",\n              left: zoomBox.x,\n              top: zoomBox.y,\n              width: zoomBox.w,\n              height: zoomBox.h\n            }}\n          />\n        )}\n      {showPointDistances && (\n        <svg\n          className={classes.pointDistanceIndicator}\n          style={{\n            pointerEvents: \"none\",\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n            width: \"100%\",\n            height: \"100%\"\n          }}\n        >\n          {regions.filter(r1 => r1.type === \"point\").flatMap((r1, i1) =>\n            regions\n              .filter((r2, i2) => i2 > i1)\n              .filter(r2 => r2.type === \"point\")\n              .map(r2 => {\n                const pr1 = projectRegionBox(r1)\n                const pr2 = projectRegionBox(r2)\n                const prm = {\n                  x: (pr1.x + pr1.w / 2 + pr2.x + pr2.w / 2) / 2,\n                  y: (pr1.y + pr1.h / 2 + pr2.y + pr2.h / 2) / 2\n                }\n                let displayDistance\n                if (realSize) {\n                  const { w, h, unitName } = realSize\n                  displayDistance =\n                    Math.sqrt(\n                      Math.pow(r1.x * w - r2.x * w, 2) +\n                        Math.pow(r1.y * h - r2.y * h, 2)\n                    ).toFixed(pointDistancePrecision) + unitName\n                } else {\n                  displayDistance =\n                    (\n                      Math.sqrt(\n                        Math.pow(r1.x - r2.x, 2) + Math.pow(r1.y - r2.y, 2)\n                      ) * 100\n                    ).toFixed(pointDistancePrecision) + \"%\"\n                }\n                return (\n                  <Fragment>\n                    <path\n                      d={`M${pr1.x + pr1.w / 2},${pr1.y + pr1.h / 2} L${pr2.x +\n                        pr2.w / 2},${pr2.y + pr2.h / 2}`}\n                    />\n                    <text x={prm.x} y={prm.y}>\n                      {displayDistance}\n                    </text>\n                  </Fragment>\n                )\n              })\n          )}\n        </svg>\n      )}\n      <canvas {...mouseEvents} className={classes.canvas} ref={canvasEl} />\n      <div className={classes.zoomIndicator}>\n        {((1 / mat.a) * 100).toFixed(0)}%\n      </div>\n    </div>\n  )\n}\n","import { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  canvas: { width: \"100%\", height: \"100%\" },\n  transformGrabber: {\n    width: 8,\n    height: 8,\n    border: \"2px solid #FFF\",\n    position: \"absolute\"\n  },\n  zoomIndicator: {\n    position: \"absolute\",\n    bottom: 0,\n    right: 0,\n    backgroundColor: \"rgba(0,0,0,0.4)\",\n    color: \"#fff\",\n    opacity: 0.5,\n    fontWeight: \"bolder\",\n    fontSize: 14,\n    padding: 4\n  },\n  pointDistanceIndicator: {\n    \"& text\": {\n      fill: \"#fff\"\n    },\n    \"& path\": {\n      vectorEffect: \"non-scaling-stroke\",\n      strokeWidth: 2,\n      opacity: 0.5,\n      stroke: \"#FFF\",\n      fill: \"none\",\n      strokeDasharray: 5,\n      animationDuration: \"4s\",\n      animationTimingFunction: \"linear\",\n      animationIterationCount: \"infinite\",\n      animationPlayState: \"running\"\n    }\n  }\n}\n","// @flow\n\nexport type BaseRegion = {\n  id: string | number,\n  cls?: string,\n  locked?: boolean,\n  visible?: boolean,\n  color: string,\n  editingLabels?: boolean,\n  highlighted?: boolean,\n  tags?: Array<string>\n}\n\nexport type Point = {|\n  ...$Exact<BaseRegion>,\n  type: \"point\",\n  x: number,\n  y: number\n|}\n\nexport type PixelRegion =\n  | {|\n      ...$Exact<BaseRegion>,\n      type: \"pixel\",\n      sx: number,\n      sy: number,\n      w: number,\n      h: number,\n      src: string\n    |}\n  | {|\n      ...$Exact<BaseRegion>,\n      type: \"pixel\",\n      points: Array<[number, number]>\n    |}\nexport type Box = {|\n  ...$Exact<BaseRegion>,\n  type: \"box\",\n  x: number,\n  y: number,\n  w: number,\n  h: number\n|}\nexport type Polygon = {|\n  ...$Exact<BaseRegion>,\n  type: \"polygon\",\n  open?: boolean,\n  points: Array<[number, number]>\n|}\n\nexport type Region = Point | PixelRegion | Box | Polygon\n\nexport const getEnclosingBox = (region: Region) => {\n  switch (region.type) {\n    case \"polygon\": {\n      const box = {\n        x: Math.min(...region.points.map(([x, y]) => x)),\n        y: Math.min(...region.points.map(([x, y]) => y)),\n        w: 0,\n        h: 0\n      }\n      box.w = Math.max(...region.points.map(([x, y]) => x)) - box.x\n      box.h = Math.max(...region.points.map(([x, y]) => y)) - box.y\n      return box\n    }\n    case \"box\": {\n      return { x: region.x, y: region.y, w: region.w, h: region.h }\n    }\n    case \"point\": {\n      return { x: region.x, y: region.y, w: 0, h: 0 }\n    }\n    case \"pixel\": {\n      if (\n        region.sx !== undefined &&\n        region.sy !== undefined &&\n        region.w &&\n        region.h\n      ) {\n        return { x: region.sx, y: region.sy, w: region.w, h: region.h }\n      }\n      if (region.points) {\n        const box = {\n          x: Math.min(...region.points.map(([x, y]) => x)),\n          y: Math.min(...region.points.map(([x, y]) => y)),\n          w: 0,\n          h: 0\n        }\n        box.w = Math.max(...region.points.map(([x, y]) => x)) - box.x\n        box.h = Math.max(...region.points.map(([x, y]) => y)) - box.y\n        return box\n      }\n    }\n  }\n  throw new Error(\"unknown region\")\n}\n\nexport const moveRegion = (region: Region, x: number, y: number) => {\n  switch (region.type) {\n    case \"point\": {\n      return { ...region, x, y }\n    }\n    case \"box\": {\n      return { ...region, x: x - region.w / 2, y: y - region.h / 2 }\n    }\n  }\n  return region\n}\n","export default `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wMSAxY5oG+lzgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAcSURBVAjXY/jPwPCfAQnA+TAGugLcAhhakRUAAK3lEe8m9qZhAAAAAElFTkSuQmCC`\n","// @flow\n\nimport React, { createContext } from \"react\"\nimport Button from \"@material-ui/core/Button\"\n\nexport const HeaderButtonContext = createContext()\n\nexport default ({ name, Icon }: { name: string, Icon: any }) => {\n  return (\n    <HeaderButtonContext.Consumer>\n      {({ onHeaderButtonClick }: any) => (\n        <Button\n          onClick={() => onHeaderButtonClick(name)}\n          style={{ width: 80, margin: 2 }}\n        >\n          <div>\n            <Icon style={{}} />\n            <div style={{ fontWeight: \"bold\" }}>{name}</div>\n          </div>\n        </Button>\n      )}\n    </HeaderButtonContext.Consumer>\n  )\n}\n","import { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  header: {\n    display: \"flex\",\n    position: \"relative\",\n    flexDirection: \"row\",\n    flexShrink: 0,\n    zIndex: 10,\n    boxShadow: \"0px 3px 8px rgba(0,0,0,.1)\"\n  },\n  fileInfo: {\n    flexGrow: 1,\n    alignItems: \"center\",\n    display: \"flex\",\n    fontWeight: \"bold\",\n    color: grey[800],\n    fontSize: 24,\n    paddingLeft: 16\n  }\n}\n","// @flow\n\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport HeaderButton, { HeaderButtonContext } from \"../HeaderButton\"\nimport BackIcon from \"@material-ui/icons/KeyboardArrowLeft\"\nimport NextIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport SettingsIcon from \"@material-ui/icons/Settings\"\nimport HelpIcon from \"@material-ui/icons/Help\"\nimport FullscreenIcon from \"@material-ui/icons/Fullscreen\"\nimport ExitIcon from \"@material-ui/icons/ExitToApp\"\nimport HotkeysIcon from \"@material-ui/icons/Keyboard\"\nimport styles from \"./styles\"\n\nconst useStyles = makeStyles(styles)\n\ntype Props = {\n  onHeaderButtonClick: string => any,\n  title: string,\n  inFullScreen?: boolean\n}\n\nexport default ({ onHeaderButtonClick, title, inFullScreen }: Props) => {\n  const classes = useStyles()\n  return (\n    <div className={classes.header}>\n      <div className={classes.fileInfo}>{title}</div>\n      <div className={classes.headerActions}>\n        <HeaderButtonContext.Provider value={{ onHeaderButtonClick }}>\n          <HeaderButton name=\"Prev\" Icon={BackIcon} />\n          <HeaderButton name=\"Next\" Icon={NextIcon} />\n          <HeaderButton name=\"Settings\" Icon={SettingsIcon} />\n          {/* <HeaderButton name=\"Help\" Icon={HelpIcon} /> */}\n          {inFullScreen ? (\n            <HeaderButton name=\"Window\" Icon={FullscreenIcon} />\n          ) : (\n            <HeaderButton name=\"Fullscreen\" Icon={FullscreenIcon} />\n          )}\n          {/* <HeaderButton name=\"Hotkeys\" Icon={HotkeysIcon} /> */}\n          <HeaderButton name=\"Done\" Icon={ExitIcon} />\n        </HeaderButtonContext.Provider>\n      </div>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { createContext, useContext } from \"react\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Tooltip from \"@material-ui/core/Tooltip\"\nimport { blue } from \"@material-ui/core/colors\"\n\nexport const SelectedTool = createContext()\n\nexport default ({\n  id,\n  name,\n  icon,\n  selected,\n  togglable,\n  alwaysShowing = false\n}: {\n  id: string,\n  name: string,\n  icon: any,\n  alwaysShowing?: boolean,\n  selected?: boolean,\n  togglable?: boolean\n}) => {\n  const { enabledTools, selectedTool, onClickTool } = useContext(SelectedTool)\n  if (!enabledTools.includes(id) && !alwaysShowing) return null\n  selected = selected || selectedTool === id\n  return (\n    <Tooltip placement=\"right\" title={name}>\n      <div>\n        <IconButton\n          disabled={!togglable ? selected : undefined}\n          aria-label={name}\n          onClick={() => onClickTool(id)}\n          size=\"small\"\n          style={{\n            width: 50,\n            height: 50,\n            margin: 1,\n            color: selected ? blue[500] : undefined\n          }}\n        >\n          {icon}\n        </IconButton>\n      </div>\n    </Tooltip>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport {\n  faArrowsAlt,\n  faMousePointer,\n  faExpandArrowsAlt,\n  faTag,\n  faPaintBrush,\n  faCrosshairs,\n  faDrawPolygon,\n  faVectorSquare,\n  faHandPaper,\n  faSearch\n} from \"@fortawesome/free-solid-svg-icons\"\nimport SmallToolButton, { SelectedTool } from \"../SmallToolButton\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport { grey } from \"@material-ui/core/colors\"\n\nconst useStyles = makeStyles({\n  iconTools: {\n    display: \"flex\",\n    padding: 4,\n    flexDirection: \"column\",\n    zIndex: 9,\n    boxShadow: \"0px 0px 5px rgba(0,0,0,0.1)\",\n    borderRight: `1px solid ${grey[300]}`,\n    backgroundColor: grey[100]\n  }\n})\n\ntype Props = {\n  showTags?: boolean,\n  enabledTools?: Array<string>,\n  selectedTool: string,\n  onClickTool: string => any\n}\n\nexport default ({\n  showTags,\n  selectedTool,\n  onClickTool,\n  enabledTools = [\"select\", \"create-point\", \"create-box\", \"create-polygon\"]\n}: Props) => {\n  const classes = useStyles()\n  return (\n    <div className={classes.iconTools}>\n      <SelectedTool.Provider\n        value={{ enabledTools, selectedTool, onClickTool }}\n      >\n        <SmallToolButton\n          id=\"select\"\n          name=\"Select Region\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faMousePointer} />}\n        />\n        <SmallToolButton\n          alwaysShowing\n          id=\"pan\"\n          name=\"Drag/Pan\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faHandPaper} />}\n        />\n        <SmallToolButton\n          alwaysShowing\n          id=\"zoom\"\n          name=\"Zoom In/Out\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faSearch} />}\n        />\n        {/* <SmallToolButton\n          name=\"Move Region\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faArrowsAlt} />}\n        />\n        <SmallToolButton\n          name=\"Resize Region\"\n          icon={\n            <FontAwesomeIcon size=\"xs\" fixedWidth icon={faExpandArrowsAlt} />\n          }\n        /> */}\n        <SmallToolButton\n          alwaysShowing\n          togglable\n          id=\"show-tags\"\n          selected={showTags}\n          name=\"Show Tags\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faTag} />}\n        />\n        <SmallToolButton\n          id=\"create-point\"\n          name=\"Add Point\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faCrosshairs} />}\n        />\n        <SmallToolButton\n          id=\"create-box\"\n          name=\"Add Bounding Box\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faVectorSquare} />}\n        />\n        <SmallToolButton\n          id=\"create-polygon\"\n          name=\"Add Polygon\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faDrawPolygon} />}\n        />\n        {/* <SmallToolButton\n          id=\"create-pixel\"\n          name=\"Add Pixel Region\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faPaintBrush} />}\n        /> */}\n      </SelectedTool.Provider>\n    </div>\n  )\n}\n","import { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  container: {\n    display: \"flex\",\n    flexGrow: 1,\n    flexDirection: \"column\",\n    minHeight: \"98vh\",\n    maxHeight: \"100vh\",\n    backgroundColor: \"#fff\",\n    overflow: \"hidden\",\n    \"&.fullscreen\": {\n      position: \"absolute\",\n      zIndex: 99999,\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }\n  },\n  workspace: {\n    backgroundColor: grey[200],\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  iconToolsContainer: { display: \"flex\" },\n  imageCanvasContainer: {\n    display: \"flex\",\n    flexGrow: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  noImageSelected: {\n    fontWeight: \"bold\",\n    fontSize: 32,\n    color: grey[500]\n  },\n  sidebarContainer: {\n    width: 300,\n    overflowY: \"auto\",\n    backgroundColor: grey[100],\n    borderLeft: `1px solid ${grey[300]}`,\n    zIndex: 9,\n    maxHeight: \"calc(100% - 68px)\",\n    boxShadow: \"0px 0px 5px rgba(0,0,0,0.1)\"\n  }\n}\n","// @flow\n\nimport React, { createContext, useContext, useState } from \"react\"\n\nconst defaultSettings = {\n  showCrosshairs: false\n}\n\nexport const SettingsContext = createContext(defaultSettings)\n\nconst pullSettingsFromLocalStorage = () => {\n  if (!window || !window.localStorage) return {}\n  let settings = {}\n  for (let i = 0; i < window.localStorage.length; i++) {\n    const key = window.localStorage.key(i)\n    if (key.startsWith(\"settings_\")) {\n      try {\n        settings[key.replace(\"settings_\", \"\")] = JSON.parse(\n          window.localStorage.getItem(key)\n        )\n      } catch (e) {}\n    }\n  }\n  return settings\n}\n\nexport const useSettings = () => useContext(SettingsContext)\n\nexport default ({ children }) => {\n  const [state, changeState] = useState(() => pullSettingsFromLocalStorage())\n  const changeSetting = (setting: string, value: any) => {\n    changeState({ ...state, [setting]: value })\n    window.localStorage.setItem(`settings_${setting}`, JSON.stringify(value))\n  }\n  return (\n    <SettingsContext.Provider value={{ ...state, changeSetting }}>\n      {children}\n    </SettingsContext.Provider>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport Button from \"@material-ui/core/Button\"\nimport Survey from \"material-survey/components/Survey\"\nimport { useSettings } from \"../SettingsProvider\"\n\nexport default ({ open, onClose }) => {\n  const settings = useSettings()\n  return (\n    <Dialog open={open} onClose={onClose}>\n      <DialogTitle>Settings</DialogTitle>\n      <DialogContent style={{ minWidth: 400 }}>\n        <Survey\n          variant=\"flat\"\n          noActions\n          defaultAnswers={settings}\n          onQuestionChange={(q, a, answers) => settings.changeSetting(q, a)}\n          form={{\n            questions: [\n              {\n                type: \"boolean\",\n                title: \"Show Crosshairs\",\n                name: \"showCrosshairs\"\n              }\n            ]\n          }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Grid from \"@material-ui/core/Grid\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport Sidebar from \"../Sidebar\"\nimport ImageCanvas from \"../ImageCanvas\"\nimport Header from \"../Header\"\nimport IconTools from \"../IconTools\"\nimport styles from \"./styles\"\nimport type { MainLayoutState, Action } from \"./types\"\nimport useKey from \"use-key-hook\"\nimport classnames from \"classnames\"\nimport { useSettings } from \"../SettingsProvider\"\nimport SettingsDialog from \"../SettingsDialog\"\nimport Fullscreen from \"react-full-screen\"\n\nconst useStyles = makeStyles(styles)\n\ntype Props = {\n  state: MainLayoutState,\n  dispatch: Action => any\n}\n\nexport default ({ state, dispatch }: Props) => {\n  const classes = useStyles()\n  const settings = useSettings()\n\n  const action = (type: string, ...params: Array<string>) => (...args: any) =>\n    params.length > 0\n      ? dispatch(\n          ({\n            type,\n            ...params.reduce((acc, p, i) => ((acc[p] = args[i]), acc), {})\n          }: any)\n        )\n      : dispatch({ type, ...args[0] })\n\n  const currentImage = state.images.find(img => img.src === state.selectedImage)\n\n  useKey(() => dispatch({ type: \"CANCEL\" }), {\n    detectKeys: [27]\n  })\n\n  return (\n    <Fullscreen\n      enabled={state.fullScreen}\n      onChange={open => {\n        if (!open) {\n          action(\"HEADER_BUTTON_CLICKED\", \"buttonName\")(\"Exit Fullscreen\")\n        }\n      }}\n    >\n      <div\n        className={classnames(\n          classes.container,\n          state.fullScreen && \"Fullscreen\"\n        )}\n      >\n        <div className={classes.headerContainer}>\n          <Header\n            onHeaderButtonClick={action(\"HEADER_BUTTON_CLICKED\", \"buttonName\")}\n            inFullScreen={state.fullScreen}\n            title={currentImage ? currentImage.name : \"No Image Selected\"}\n          />\n        </div>\n        <div className={classes.workspace}>\n          <div className={classes.iconToolsContainer}>\n            <IconTools\n              enabledTools={state.enabledTools}\n              showTags={state.showTags}\n              selectedTool={state.selectedTool}\n              onClickTool={action(\"SELECT_TOOL\", \"selectedTool\")}\n            />\n          </div>\n          <div className={classes.imageCanvasContainer}>\n            {!state.selectedImage ? (\n              <div className={classes.noImageSelected}>No Image Selected</div>\n            ) : (\n              <ImageCanvas\n                {...settings}\n                key={state.selectedImage}\n                showTags={state.showTags}\n                allowedArea={state.allowedArea}\n                regionClsList={state.regionClsList}\n                regionTagList={state.regionTagList}\n                regions={currentImage ? currentImage.regions || [] : []}\n                realSize={currentImage ? currentImage.realSize : undefined}\n                imageSrc={state.selectedImage}\n                pointDistancePrecision={state.pointDistancePrecision}\n                createWithPrimary={state.selectedTool.includes(\"create\")}\n                dragWithPrimary={state.selectedTool === \"pan\"}\n                zoomWithPrimary={state.selectedTool === \"zoom\"}\n                showPointDistances={state.showPointDistances}\n                pointDistancePrecision={state.pointDistancePrecision}\n                onMouseMove={action(\"MOUSE_MOVE\")}\n                onMouseDown={action(\"MOUSE_DOWN\")}\n                onMouseUp={action(\"MOUSE_UP\")}\n                onChangeRegion={action(\"CHANGE_REGION\", \"region\")}\n                onBeginRegionEdit={action(\"OPEN_REGION_EDITOR\", \"region\")}\n                onCloseRegionEdit={action(\"CLOSE_REGION_EDITOR\", \"region\")}\n                onDeleteRegion={action(\"DELETE_REGION\", \"region\")}\n                onBeginBoxTransform={action(\n                  \"BEGIN_BOX_TRANSFORM\",\n                  \"box\",\n                  \"directions\"\n                )}\n                onBeginMovePolygonPoint={action(\n                  \"BEGIN_MOVE_POLYGON_POINT\",\n                  \"polygon\",\n                  \"pointIndex\"\n                )}\n                onAddPolygonPoint={action(\n                  \"ADD_POLYGON_POINT\",\n                  \"polygon\",\n                  \"point\",\n                  \"pointIndex\"\n                )}\n                onSelectRegion={action(\"SELECT_REGION\", \"region\")}\n                onBeginMovePoint={action(\"BEGIN_MOVE_POINT\", \"point\")}\n                onImageLoaded={action(\"IMAGE_LOADED\", \"image\")}\n              />\n            )}\n          </div>\n          <div className={classes.sidebarContainer}>\n            <Sidebar\n              debug={window.localStorage.$ANNOTATE_DEBUG_MODE && state}\n              taskDescription={state.taskDescription}\n              images={state.images}\n              regions={currentImage ? currentImage.regions || [] : []}\n              history={state.history}\n              currentImage={currentImage}\n              labelImages={state.labelImages}\n              imageClsList={state.imageClsList}\n              imageTagList={state.imageTagList}\n              onChangeImage={action(\"CHANGE_IMAGE\", \"delta\")}\n              onSelectRegion={action(\"SELECT_REGION\", \"region\")}\n              onDeleteRegion={action(\"DELETE_REGION\", \"region\")}\n              onSelectImage={action(\"SELECT_IMAGE\", \"image\")}\n              onChangeRegion={action(\"CHANGE_REGION\", \"region\")}\n              onRestoreHistory={action(\"RESTORE_HISTORY\")}\n            />\n          </div>\n        </div>\n        <SettingsDialog\n          open={state.settingsOpen}\n          onClose={() =>\n            dispatch({\n              type: \"HEADER_BUTTON_CLICKED\",\n              buttonName: \"Settings\"\n            })\n          }\n        />\n      </div>\n    </Fullscreen>\n  )\n}\n","// @flow\n\nimport type { MainLayoutState, Action } from \"../MainLayout/types\"\nimport { moveRegion } from \"../ImageCanvas/region-tools.js\"\nimport { setIn, updateIn } from \"seamless-immutable\"\nimport moment from \"moment\"\nimport isEqual from \"lodash/isEqual\"\n\nconst getRandomId = () =>\n  Math.random()\n    .toString()\n    .split(\".\")[1]\n\nconst getRandomInt = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nconst getRandomColor = () => {\n  const h = getRandomInt(0, 360)\n  const s = 100\n  const l = 50\n  return `hsl(${h},${s}%,${l}%)`\n}\n\nconst typesToSaveWithHistory = {\n  BEGIN_BOX_TRANSFORM: \"Transform/Move Box\",\n  BEGIN_MOVE_POINT: \"Move Point\",\n  DELETE_REGION: \"Delete Region\"\n}\n\nexport default (state: MainLayoutState, action: Action) => {\n  if (!action.type.includes(\"MOUSE\")) {\n    state = setIn(state, [\"lastAction\"], action)\n  }\n  let currentImageIndex = state.images.findIndex(\n    img => img.src === state.selectedImage\n  )\n  if (currentImageIndex === -1) currentImageIndex = null\n  const getRegionIndex = region => {\n    const regionId = typeof region === \"string\" ? region : region.id\n    if (currentImageIndex === null) return null\n    const regionIndex = (\n      state.images[currentImageIndex].regions || []\n    ).findIndex(r => r.id === regionId)\n    return regionIndex === -1 ? null : regionIndex\n  }\n  const getRegion = regionId => {\n    const regionIndex = getRegionIndex(regionId)\n    if (regionIndex === null) return [null, null]\n    const region = state.images[currentImageIndex].regions[regionIndex]\n    return [region, regionIndex]\n  }\n  const modifyRegion = (regionId, obj) => {\n    const [region, regionIndex] = getRegion(regionId)\n    if (!region) return state\n    if (obj !== null) {\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"regions\", regionIndex],\n        {\n          ...state.images[currentImageIndex].regions[regionIndex],\n          ...obj\n        }\n      )\n    } else {\n      // delete region\n      const regions = state.images[currentImageIndex].regions\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"regions\"],\n        (regions || []).filter(r => r.id !== region.id)\n      )\n    }\n  }\n  const unselectRegions = (state: MainLayoutState) => {\n    if (currentImageIndex === null) return state\n    return setIn(\n      state,\n      [\"images\", currentImageIndex, \"regions\"],\n      (state.images[currentImageIndex].regions || []).map(r => ({\n        ...r,\n        highlighted: false\n      }))\n    )\n  }\n\n  const saveToHistory = (state: MainLayoutState, name: string) =>\n    updateIn(state, [\"history\"], h =>\n      [\n        {\n          time: moment().toDate(),\n          state,\n          name\n        }\n      ].concat((h || []).slice(0, 9))\n    )\n\n  if (Object.keys(typesToSaveWithHistory).includes(action.type)) {\n    state = saveToHistory(\n      state,\n      typesToSaveWithHistory[action.type] || action.type\n    )\n  }\n\n  const closeEditors = (state: MainLayoutState) => {\n    if (currentImageIndex === null) return state\n    return setIn(\n      state,\n      [\"images\", currentImageIndex, \"regions\"],\n      (state.images[currentImageIndex].regions || []).map(r => ({\n        ...r,\n        editingLabels: false\n      }))\n    )\n  }\n\n  const setNewImage = (newImage: string) => {\n    return setIn(state, [\"selectedImage\"], newImage)\n  }\n\n  switch (action.type) {\n    case \"@@INIT\": {\n      return state\n    }\n    case \"SELECT_IMAGE\": {\n      return setNewImage(action.image.src)\n    }\n    case \"IMAGE_LOADED\": {\n      return setIn(state, [\"images\", currentImageIndex, \"pixelSize\"], {\n        w: action.image.width,\n        h: action.image.height\n      })\n    }\n    case \"CHANGE_REGION\": {\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const oldRegion = state.images[currentImageIndex].regions[regionIndex]\n      if (oldRegion.cls !== action.region.cls) {\n        state = saveToHistory(state, \"Change Region Classification\")\n      }\n      if (!isEqual(oldRegion.tags, action.region.tags)) {\n        state = saveToHistory(state, \"Change Region Tags\")\n      }\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"regions\", regionIndex],\n        action.region\n      )\n    }\n    case \"RESTORE_HISTORY\": {\n      if (state.history.length > 0) {\n        return state.history[0].state\n      }\n      return state\n    }\n    case \"CHANGE_IMAGE\": {\n      if (currentImageIndex === null) return state\n      const { delta } = action\n      for (const key of Object.keys(delta)) {\n        if (key === \"cls\") saveToHistory(state, \"Change Image Class\")\n        if (key === \"tags\") saveToHistory(state, \"Change Image Tags\")\n        state = setIn(state, [\"images\", currentImageIndex, key], delta[key])\n      }\n      return state\n    }\n    case \"SELECT_REGION\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const regions = [...(state.images[currentImageIndex].regions || [])].map(\n        r => ({\n          ...r,\n          highlighted: r.id === region.id,\n          editingLabels: r.id === region.id\n        })\n      )\n      return setIn(state, [\"images\", currentImageIndex, \"regions\"], regions)\n    }\n    case \"BEGIN_MOVE_POINT\": {\n      state = closeEditors(state)\n      return setIn(state, [\"mode\"], {\n        mode: \"MOVE_REGION\",\n        regionId: action.point.id\n      })\n    }\n    case \"BEGIN_BOX_TRANSFORM\": {\n      const { box, directions } = action\n      state = closeEditors(state)\n      if (directions[0] === 0 && directions[1] === 0) {\n        return setIn(state, [\"mode\"], { mode: \"MOVE_REGION\", regionId: box.id })\n      } else {\n        return setIn(state, [\"mode\"], {\n          mode: \"RESIZE_BOX\",\n          regionId: box.id,\n          freedom: directions,\n          original: { x: box.x, y: box.y, w: box.w, h: box.h }\n        })\n      }\n    }\n    case \"BEGIN_MOVE_POLYGON_POINT\": {\n      const { polygon, pointIndex } = action\n      state = closeEditors(state)\n      if (\n        state.mode &&\n        state.mode.mode === \"DRAW_POLYGON\" &&\n        pointIndex === 0\n      ) {\n        return setIn(\n          modifyRegion(polygon, {\n            points: polygon.points.slice(0, -1),\n            open: false\n          }),\n          [\"mode\"],\n          null\n        )\n      } else {\n        state = saveToHistory(state, \"Move Polygon Point\")\n      }\n      return setIn(state, [\"mode\"], {\n        mode: \"MOVE_POLYGON_POINT\",\n        regionId: polygon.id,\n        pointIndex\n      })\n    }\n    case \"ADD_POLYGON_POINT\": {\n      const { polygon, point, pointIndex } = action\n      const regionIndex = getRegionIndex(polygon)\n      if (regionIndex === null) return state\n      const points = [...polygon.points]\n      points.splice(pointIndex, 0, point)\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"regions\", regionIndex],\n        { ...polygon, points }\n      )\n    }\n    case \"MOUSE_MOVE\": {\n      const { x, y } = action\n      if (!state.mode) return state\n      if (currentImageIndex === null) return state\n      switch (state.mode.mode) {\n        case \"MOVE_POLYGON_POINT\": {\n          const { pointIndex, regionId } = state.mode\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [\n              \"images\",\n              currentImageIndex,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              pointIndex\n            ],\n            [x, y]\n          )\n        }\n        case \"MOVE_REGION\": {\n          const { regionId } = state.mode\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [\"images\", currentImageIndex, \"regions\", regionIndex],\n            moveRegion(\n              state.images[currentImageIndex].regions[regionIndex],\n              x,\n              y\n            )\n          )\n        }\n        case \"RESIZE_BOX\": {\n          const {\n            regionId,\n            freedom: [xFree, yFree],\n            original: { x: ox, y: oy, w: ow, h: oh }\n          } = state.mode\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          const box = state.images[currentImageIndex].regions[regionIndex]\n\n          const dx = xFree === 0 ? ox : xFree === -1 ? Math.min(ox + ow, x) : ox\n          const dw =\n            xFree === 0\n              ? ow\n              : xFree === -1\n                ? ow + (ox - dx)\n                : Math.max(0, ow + (x - ox - ow))\n          const dy = yFree === 0 ? oy : yFree === -1 ? Math.min(oy + oh, y) : oy\n          const dh =\n            yFree === 0\n              ? oh\n              : yFree === -1\n                ? oh + (oy - dy)\n                : Math.max(0, oh + (y - oy - oh))\n\n          // determine if we should switch the freedom\n          if (dw <= 0.001) {\n            state = setIn(state, [\"mode\", \"freedom\"], [xFree * -1, yFree])\n          }\n          if (dh <= 0.001) {\n            state = setIn(state, [\"mode\", \"freedom\"], [xFree, yFree * -1])\n          }\n\n          return setIn(\n            state,\n            [\"images\", currentImageIndex, \"regions\", regionIndex],\n            { ...box, x: dx, w: dw, y: dy, h: dh }\n          )\n        }\n        case \"DRAW_POLYGON\": {\n          const { regionId } = state.mode\n          const [region, regionIndex] = getRegion(regionId)\n          if (!region) return setIn(state, [\"mode\"], null)\n          return setIn(\n            state,\n            [\n              \"images\",\n              currentImageIndex,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              (region: any).points.length - 1\n            ],\n            [x, y]\n          )\n        }\n      }\n      return state\n    }\n    case \"MOUSE_DOWN\": {\n      const { x, y } = action\n\n      let newRegion\n      if (currentImageIndex !== null) {\n        const region = state.images[currentImageIndex].regions\n\n        if (state.allowedArea) {\n          const aa = state.allowedArea\n          if (x < aa.x || x > aa.x + aa.w || y < aa.y || y > aa.y + aa.h) {\n            return state\n          }\n        }\n\n        switch (state.selectedTool) {\n          case \"create-point\": {\n            state = saveToHistory(state, \"Create Point\")\n            newRegion = {\n              type: \"point\",\n              x,\n              y,\n              highlighted: true,\n              editingLabels: true,\n              color: getRandomColor(),\n              id: getRandomId()\n            }\n            break\n          }\n          case \"create-box\": {\n            state = saveToHistory(state, \"Create Box\")\n            newRegion = {\n              type: \"box\",\n              x: x,\n              y: x,\n              w: 0.01,\n              h: 0.01,\n              highlighted: true,\n              editingLabels: false,\n              color: getRandomColor(),\n              id: getRandomId()\n            }\n            state = unselectRegions(state)\n            state = setIn(state, [\"mode\"], {\n              mode: \"RESIZE_BOX\",\n              editLabelEditorAfter: true,\n              regionId: newRegion.id,\n              freedom: [1, 1],\n              original: { x, y, w: newRegion.w, h: newRegion.h }\n            })\n            break\n          }\n          case \"create-polygon\": {\n            if (state.mode && state.mode.mode === \"DRAW_POLYGON\") break\n            state = saveToHistory(state, \"Create Polygon\")\n            newRegion = {\n              type: \"polygon\",\n              points: [[x, y], [x, y]],\n              open: true,\n              highlighted: true,\n              color: getRandomColor(),\n              id: getRandomId()\n            }\n            state = setIn(state, [\"mode\"], {\n              mode: \"DRAW_POLYGON\",\n              regionId: newRegion.id\n            })\n            break\n          }\n        }\n      }\n\n      if (newRegion) {\n        state = unselectRegions(state)\n      }\n\n      if (state.mode) {\n        switch (state.mode.mode) {\n          case \"DRAW_POLYGON\": {\n            const [polygon, regionIndex] = getRegion(state.mode.regionId)\n            if (!polygon) break\n            state = setIn(\n              state,\n              [\"images\", currentImageIndex, \"regions\", regionIndex],\n              { ...polygon, points: polygon.points.concat([[x, y]]) }\n            )\n          }\n        }\n      }\n\n      const regions = [...(state.images[currentImageIndex].regions || [])]\n        .map(r => ({\n          ...r,\n          editingLabels: false\n        }))\n        .concat(newRegion ? [newRegion] : [])\n\n      return setIn(state, [\"images\", currentImageIndex, \"regions\"], regions)\n    }\n    case \"MOUSE_UP\": {\n      const { x, y } = action\n      if (!state.mode) return state\n      switch (state.mode.mode) {\n        case \"RESIZE_BOX\": {\n          if (state.mode.editLabelEditorAfter) {\n            return {\n              ...modifyRegion(state.mode.regionId, { editingLabels: true }),\n              mode: null\n            }\n          }\n        }\n        case \"MOVE_REGION\":\n        case \"MOVE_POLYGON_POINT\": {\n          return { ...state, mode: null }\n        }\n      }\n      return state\n    }\n    case \"CHANGE_REGION\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"regions\", regionIndex],\n        region\n      )\n    }\n    case \"OPEN_REGION_EDITOR\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const newRegions = setIn(\n        state.images[currentImageIndex].regions.map(r => ({\n          ...r,\n          highlighted: false,\n          editingLabels: false\n        })),\n        [regionIndex],\n        {\n          ...(state.images[currentImageIndex].regions || [])[regionIndex],\n          highlighted: true,\n          editingLabels: true\n        }\n      )\n      return setIn(state, [\"images\", currentImageIndex, \"regions\"], newRegions)\n    }\n    case \"CLOSE_REGION_EDITOR\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"regions\", regionIndex],\n        {\n          ...(state.images[currentImageIndex].regions || [])[regionIndex],\n          editingLabels: false\n        }\n      )\n    }\n    case \"DELETE_REGION\": {\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"regions\"],\n        (state.images[currentImageIndex].regions || []).filter(\n          r => r.id !== action.region.id\n        )\n      )\n    }\n    case \"HEADER_BUTTON_CLICKED\": {\n      const buttonName = action.buttonName.toLowerCase()\n      switch (buttonName) {\n        case \"prev\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === 0) return state\n          return setNewImage(state.images[currentImageIndex - 1].src)\n        }\n        case \"next\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === state.images.length - 1) return state\n          return setNewImage(state.images[currentImageIndex + 1].src)\n        }\n        case \"settings\": {\n          return setIn(state, [\"settingsOpen\"], !state.settingsOpen)\n        }\n        case \"help\": {\n          return state\n        }\n        case \"fullscreen\": {\n          return setIn(state, [\"fullScreen\"], true)\n        }\n        case \"exit fullscreen\":\n        case \"window\": {\n          return setIn(state, [\"fullScreen\"], false)\n        }\n        case \"hotkeys\": {\n          return state\n        }\n        case \"exit\":\n        case \"done\": {\n          return state\n        }\n      }\n      return state\n      // return setIn(state, [\"\"]\n    }\n    case \"SELECT_TOOL\": {\n      state = setIn(state, [\"mode\"], null)\n      if (action.selectedTool === \"show-tags\") {\n        return setIn(state, [\"showTags\"], !state.showTags)\n      }\n      return setIn(state, [\"selectedTool\"], action.selectedTool)\n    }\n    case \"CANCEL\": {\n      const { mode } = state\n      if (mode) {\n        switch (mode.mode) {\n          case \"DRAW_POLYGON\": {\n            const { regionId } = mode\n            return modifyRegion(regionId, null)\n          }\n          case \"MOVE_POLYGON_POINT\":\n          case \"RESIZE_BOX\":\n          case \"MOVE_REGION\": {\n            return setIn(state, [\"mode\"], null)\n          }\n        }\n      }\n      // Close any open boxes\n      const regions: any = state.images[currentImageIndex].regions\n      if (regions.some(r => r.editingLabels)) {\n        return setIn(\n          state,\n          [\"images\", currentImageIndex, \"regions\"],\n          regions.map(r => ({\n            ...r,\n            editingLabels: false\n          }))\n        )\n      } else {\n        return setIn(\n          state,\n          [\"images\", currentImageIndex, \"regions\"],\n          regions.map(r => ({\n            ...r,\n            highlighted: false\n          }))\n        )\n      }\n    }\n  }\n  return state\n}\n","// @flow\n\nimport React, { useReducer } from \"react\"\nimport MainLayout from \"../MainLayout\"\nimport type {\n  ToolEnum,\n  Image,\n  Mode,\n  MainLayoutState,\n  Action\n} from \"../MainLayout/types\"\nimport SettingsProvider from \"../SettingsProvider\"\nimport reducer from \"./reducer\"\n\ntype Props = {\n  taskDescription: string,\n  allowedArea?: { x: number, y: number, w: number, h: number },\n  regionTagList?: Array<string>,\n  regionClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  imageClsList?: Array<string>,\n  enabledTools?: Array<string>,\n  showTags?: boolean,\n  selectedImage?: string,\n  images: Array<Image>,\n  showPointDistances?: boolean,\n  pointDistancePrecision?: number,\n  onExit: MainLayoutState => any\n}\n\nexport default ({\n  images,\n  allowedArea,\n  selectedImage = images.length > 0 ? images[0].src : undefined,\n  showPointDistances,\n  pointDistancePrecision,\n  showTags = true,\n  enabledTools = [\"select\", \"create-point\", \"create-box\", \"create-polygon\"],\n  regionTagList = [],\n  regionClsList = [],\n  imageTagList = [],\n  imageClsList = [],\n  taskDescription,\n  onExit\n}: Props) => {\n  const [state, dispatchToReducer] = useReducer(reducer, {\n    showTags,\n    allowedArea,\n    selectedImage,\n    showPointDistances,\n    pointDistancePrecision,\n    selectedTool: \"select\",\n    mode: null,\n    taskDescription,\n    images,\n    labelImages: imageClsList.length > 0 || imageTagList.length > 0,\n    regionClsList,\n    regionTagList,\n    imageClsList,\n    imageTagList,\n    enabledTools,\n    history: []\n  })\n\n  const dispatch = (action: Action) => {\n    if (\n      action.type === \"HEADER_BUTTON_CLICKED\" &&\n      (action.buttonName === \"Exit\" ||\n        action.buttonName === \"Done\" ||\n        action.buttonName === \"Complete\")\n    ) {\n      onExit({ ...state, history: undefined })\n    } else {\n      dispatchToReducer(action)\n    }\n  }\n\n  return (\n    <SettingsProvider>\n      <MainLayout debug state={state} dispatch={dispatch} />\n    </SettingsProvider>\n  )\n}\n","// @flow\n\nimport React, { Component } from \"react\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport Button from \"@material-ui/core/Button\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\n\nexport default class ErrorBoundaryDialog extends Component {\n  state = { hasError: false, err: \"\" }\n  componentDidCatch(err, info) {\n    this.setState({\n      hasError: true,\n      err: err.toString() + \"\\n\\n\" + info.componentStack\n    })\n  }\n  render() {\n    if (this.state.hasError) {\n      return (\n        <Dialog open={this.state.hasError} onClose={this.props.onClose}>\n          <DialogTitle>Error Loading Annotator</DialogTitle>\n          <DialogContent>\n            <pre>{this.state.err}</pre>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.props.onClose}>Close</Button>\n          </DialogActions>\n        </Dialog>\n      )\n    }\n    return this.props.children\n  }\n}\n","// @flow\n\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Theme from \"./Theme\"\nimport DemoSite from \"./DemoSite\"\n\nReactDOM.render(\n  <Theme>\n    <DemoSite />\n  </Theme>,\n  document.getElementById(\"root\")\n)\n","// @flow\nimport React, { useState } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Editor, { examples } from \"./Editor\"\nimport Annotator from \"../Annotator\"\nimport ErrorBoundaryDialog from \"./ErrorBoundaryDialog.js\"\n\nexport default () => {\n  const [annotatorOpen, changeAnnotatorOpen] = useState(false)\n  const [annotatorProps, changeAnnotatorProps] = useState(examples[\"Custom\"]())\n  const [lastOutput, changeLastOutput] = useState()\n\n  return (\n    <div>\n      {annotatorOpen ? (\n        <ErrorBoundaryDialog\n          onClose={() => {\n            changeAnnotatorOpen(false)\n          }}\n        >\n          <Annotator\n            {...(annotatorProps: any)}\n            onExit={output => {\n              delete (output: any)[\"lastAction\"]\n              changeLastOutput(output)\n              changeAnnotatorOpen(false)\n            }}\n          />\n        </ErrorBoundaryDialog>\n      ) : (\n        <Editor\n          lastOutput={lastOutput}\n          onOpenAnnotator={props => {\n            changeAnnotatorProps(props)\n            changeAnnotatorOpen(true)\n          }}\n        />\n      )}\n    </div>\n  )\n}\n"],"sourceRoot":""}
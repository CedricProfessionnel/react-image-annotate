(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{290:function(e,t,n){e.exports=n(910)},720:function(e,t,n){},909:function(e,t,n){},910:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(16),r=n.n(i),c=n(947),l=n(275),s=n(950),u=Object(c.a)({container:{fontFamily:'"Inter", sans-serif'}}),d=Object(l.a)({typography:{fontFamily:'"Inter", "Roboto", sans-serif'},overrides:{MuiButton:{root:{textTransform:"none"}}}}),g=function(e){var t=e.children,n=u();return o.a.createElement(s.a,{theme:d},o.a.createElement("div",{className:n.container},t))},m=n(8),h=n(188),f=n(58),p=n(968),b=n(970),y=n(954),v=n(955),E=n(956),O=n(167),x=n.n(O),w=Object(c.a)({editBar:{padding:10,borderBottom:"1px solid #ccc",backgroundColor:"#f8f8f8",display:"flex",alignItems:"center","& .button":{margin:5}},select:{width:240,fontSize:14},contentArea:{padding:10},specificationArea:{padding:10}}),j=function(){try{return JSON.parse(window.localStorage.getItem("customInput")||"{}")}catch(e){return{}}},I={"Simple Bounding Box":function(){return{taskDescription:"Annotate each image according to this _markdown_ specification.",regionTagList:["has-bun"],regionClsList:["hotdog","not-hotdog"],enabledTools:["select","create-box"],images:[{src:"https://images.unsplash.com/photo-1496905583330-eb54c7e5915a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=634&q=80",name:"hot-dogs-1"},{src:"https://www.bianchi.com/wp-content/uploads/2019/07/YPB17I555K.jpg",name:"bianchi-oltre-xr4"}]}},"Simple Segmentation":function(){return{taskDescription:"Annotate each image according to this _markdown_ specification.",regionClsList:["car","truck"],enabledTools:["select","create-polygon"],images:[{src:"https://images.unsplash.com/photo-1561518776-e76a5e48f731?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80",name:"car-image-1"}]}},Custom:function(){return j()}},T=function(e){var t=e.onOpenAnnotator,n=e.lastOutput,i=w(),r=Object(a.useState)(),c=Object(m.a)(r,2),l=c[0],s=c[1],u=Object(a.useState)(window.localStorage.getItem("customInput")?"Custom":"Simple Bounding Box"),d=Object(m.a)(u,2),g=d[0],O=d[1],T=Object(a.useState)(!1),C=Object(m.a)(T,2),S=C[0],M=C[1],N=Object(a.useState)(JSON.stringify(I[g](),null,"  ")),A=Object(m.a)(N,2),L=A[0],k=A[1];return o.a.createElement("div",null,o.a.createElement("div",{className:i.editBar},o.a.createElement("h3",null,"React Image Annotate"),o.a.createElement("div",{style:{flexGrow:1}}),o.a.createElement("div",null,o.a.createElement("div",{style:{display:"inline-flex"}},o.a.createElement(f.default,{className:i.select,value:{label:g,value:g},options:Object.keys(I).map(function(e){return{label:e,value:e}}),onChange:function(e){O(e.value),k(JSON.stringify("Custom"===e.value?j():I[e.value](),null,"  "))}})),o.a.createElement(h.a,{className:"button",disabled:!n,onClick:function(){return M(!0)}},"View Output"),o.a.createElement(h.a,{className:"button",variant:"outlined",disabled:Boolean(l),onClick:function(){t("Custom"===g?j():I[g])}},"Open Annotator"))),o.a.createElement("div",{className:i.contentArea,style:l?{border:"2px solid #f00"}:{border:"2px solid #fff"}},o.a.createElement("div",null,o.a.createElement(x.a,{value:L,language:"javascript",onChange:function(e){try{window.localStorage.setItem("customInput",JSON.stringify(JSON.parse(e))),s(null)}catch(t){s(t.toString())}k(e)},width:"100%",height:"550px"}))),o.a.createElement("div",{className:i.specificationArea},o.a.createElement("h2",null,"React Image Annotate Format"),o.a.createElement(p.a,{language:"javascript"},'\n{\n  taskDescription?: string, // markdown\n  regionTagList?: Array<string>,\n  regionClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  imageClsList?: Array<string>,\n  // all tools are enabled by default\n  enabledTools?: Array< "select" | "create-point" | "create-box" | "create-polygon">,\n  selectedImage?: string, // initial selected image\n  images: Array<{\n    src: string,\n    thumbnailSrc?: string, // use this if you are using high-res images\n    name: string,\n    regions?: Array<{\n      id: string | number,\n      cls?: string,\n      color?: string,\n      tags?: Array<string>,\n\n      // Point\n      type: "point",\n      x: number, // [0-1] % of image width\n      y: number, // [0-1] % of image height\n\n      // Bounding Box\n      type: "box",\n      x: number, // [0-1] % of image width\n      y: number, // [0-1] % of image height\n      w: number, // [0-1] % of image width\n      h: number, // [0-1] % of image height\n\n      // Polygon\n      type: "polygon",\n      open?: boolean, // should last and first points be connected, default: true\n      points: Array<[number, number]> // [0-1] % of image width/height\n    }>\n  }>,\n}\n')),o.a.createElement(b.a,{fullScreen:!0,open:S},o.a.createElement(y.a,null,"React Image Annotate Output"),o.a.createElement(v.a,{style:{minWidth:400}},o.a.createElement(x.a,{value:JSON.stringify(n,null,"  "),language:"javascript",width:"100%",height:"550px"})),o.a.createElement(E.a,null,o.a.createElement(h.a,{onClick:function(){return M(!1)}},"Close"))))},C=n(9),S=n(18),M=n(142),N=n(952),A=n(246),L=n.n(A),k=n(915),P=n(957),D=n(81),_=n(35),R=n.n(_),B=n(22),W=Object(c.a)({container:{margin:8},header:{display:"flex",flexDirection:"row",alignItems:"center",padding:8,paddingLeft:16,paddingRight:16},title:{fontSize:14,fontWeight:"bold",flexGrow:1,paddingLeft:8,color:D.a[800],"& span":{color:D.a[600],fontSize:12}},expandButton:{padding:0,width:30,height:30,"& .icon":{marginTop:-6,width:20,height:20,transition:"500ms transform","&.expanded":{transform:"rotate(180deg)"}}},expandedContent:{maxHeight:300,overflowY:"auto","&.noScroll":{overflowY:"visible",overflow:"visible"}}}),z=Object(a.memo)(function(e){var t=e.icon,n=e.title,i=e.subTitle,r=e.children,c=e.noScroll,l=void 0!==c&&c,s=e.expandedByDefault,u=void 0!==s&&s,d=W(),g=o.a.createElement("div",{className:R()(d.expandedContent,l&&"noScroll")},r),h=Object(a.useState)(u),f=Object(m.a)(h,2),p=f[0],b=f[1],y=Object(B.a)(function(){return b(!p)});return o.a.createElement(N.a,{className:d.container},o.a.createElement("div",{className:d.header},t,o.a.createElement("div",{className:d.title},n," ",o.a.createElement("span",null,i)),o.a.createElement(k.a,{onClick:y,className:d.expandButton},o.a.createElement(L.a,{className:R()("icon",p&&"expanded")}))),l?p?g:null:o.a.createElement(P.a,{in:p},g))},function(e,t){return e.title===t.title&&e.children===t.children}),G=n(247),H=n.n(G),V=n(973),F=n(131),U=n.n(F),Y=Object(V.a)("div")({paddingLeft:16,paddingRight:16,fontSize:12,"& h1":{fontSize:18},"& h2":{fontSize:14},"& h3":{fontSize:12},"& h4":{fontSize:12},"& h5":{fontSize:12},"& h6":{fontSize:12},"& p":{fontSize:12},"& a":{},"& img":{width:"100%"}}),K=Object(a.memo)(function(e){var t=e.description;return o.a.createElement(z,{title:"Task Description",icon:o.a.createElement(H.a,{style:{color:D.a[700]}}),expandedByDefault:!t||""===t},o.a.createElement(Y,null,o.a.createElement(U.a,{source:t})))}),X=n(248),J=n.n(X),Z=n(958),q=n(959),Q=n(211),$=n(57),ee=n.n($),te=Object(c.a)({img:{width:40,height:40,borderRadius:8}}),ne=function(e){return[e.name,(e.regions||[]).length,e.src]},ae=Object(a.memo)(function(e){var t=e.images,n=e.onSelect,a=te();return o.a.createElement(z,{title:"Images",subTitle:"(".concat(t.length,")"),icon:o.a.createElement(J.a,{style:{color:D.a[700]}})},o.a.createElement("div",null,o.a.createElement(Z.a,null,t.map(function(e,t){return o.a.createElement(q.a,{button:!0,onClick:function(){return n(e)},dense:!0,key:t},o.a.createElement("img",{className:a.img,src:e.src}),o.a.createElement(Q.a,{primary:e.name,secondary:"".concat((e.regions||[]).length," Labels")}))}))))},function(e,t){return ee()(e.images.map(ne),t.images.map(ne))}),oe=n(253),ie=n.n(oe),re=n(960),ce=n(249),le=n.n(ce),se=n(250),ue=n.n(se),de=n(64),ge=n.n(de),me=n(102),he=n.n(me),fe=n(251),pe=n.n(fe),be=n(168),ye=n.n(be),ve=n(252),Ee=n.n(ve),Oe=n(86),xe={container:{fontSize:11,fontWeight:"bold",color:D.a[700],"& .icon":{marginTop:4,width:16,height:16},"& .icon2":{opacity:.5,width:16,height:16,transition:"200ms opacity","&:hover":{cursor:"pointer",opacity:1}}},row:{padding:4,cursor:"pointer","&.header:hover":{backgroundColor:"#fff"},"&.highlighted":{backgroundColor:Oe.a[100]},"&:hover":{backgroundColor:Oe.a[50],color:D.a[800]}},chip:{display:"flex",flexDirection:"row",padding:2,borderRadius:2,paddingLeft:4,paddingRight:4,alignItems:"center","& .color":{borderRadius:5,width:10,height:10,marginRight:4},"& .text":{}}},we=Object(c.a)(xe),je=Object(V.a)("div")({borderTop:"1px solid ".concat(D.a[200]),marginTop:2,marginBottom:2}),Ie=function(e){var t=e.color,n=e.text,a=we();return o.a.createElement("span",{className:a.chip},o.a.createElement("div",{className:"color",style:{backgroundColor:t}}),o.a.createElement("div",{className:"text"},n))},Te=function(e){var t=e.header,n=e.highlighted,i=e.order,r=e.classification,c=e.area,l=(e.tags,e.trash),s=e.lock,u=e.visible,d=e.onClick,g=we(),h=Object(a.useState)(!1),f=Object(m.a)(h,2),p=(f[0],f[1]);return o.a.createElement("div",{onClick:d,onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},className:R()(g.row,{header:t,highlighted:n})},o.a.createElement(re.a,{container:!0,alignItems:"center"},o.a.createElement(re.a,{item:!0,xs:2},o.a.createElement("div",{style:{textAlign:"right",paddingRight:10}},i)),o.a.createElement(re.a,{item:!0,xs:5},r),o.a.createElement(re.a,{item:!0,xs:2},o.a.createElement("div",{style:{textAlign:"right",paddingRight:6}},c)),o.a.createElement(re.a,{item:!0,xs:1},l),o.a.createElement(re.a,{item:!0,xs:1},s),o.a.createElement(re.a,{item:!0,xs:1},u)))},Ce=Object(a.memo)(function(){return o.a.createElement(Te,{header:!0,highlighted:!1,order:o.a.createElement(le.a,{className:"icon"}),classification:o.a.createElement("div",{style:{paddingLeft:10}},"Class"),area:o.a.createElement(ue.a,{className:"icon"}),trash:o.a.createElement(ge.a,{className:"icon"}),lock:o.a.createElement(he.a,{className:"icon"}),visible:o.a.createElement(ye.a,{className:"icon"})})}),Se=Object(a.memo)(function(e){var t=e.region,n=e.highlighted,a=e.onSelectRegion,i=e.onDeleteRegion,r=e.onChangeRegion,c=(e.visible,e.locked,e.color),l=e.cls,s=e.index;return o.a.createElement(Te,{header:!1,highlighted:n,onClick:function(){return a(t)},order:"#".concat(s+1),classification:o.a.createElement(Ie,{text:l||"",color:c||"#ddd"}),area:"",trash:o.a.createElement(ge.a,{onClick:function(){return i(t)},className:"icon2"}),lock:t.locked?o.a.createElement(he.a,{onClick:function(){return r(Object(C.a)({},t,{locked:!1}))},className:"icon2"}):o.a.createElement(pe.a,{onClick:function(){return r(Object(C.a)({},t,{locked:!0}))},className:"icon2"}),visible:t.visible||void 0===t.visible?o.a.createElement(ye.a,{onClick:function(){return r(Object(C.a)({},t,{visible:!1}))},className:"icon2"}):o.a.createElement(Ee.a,{onClick:function(){return r(Object(C.a)({},t,{visible:!0}))},className:"icon2"})})},function(e,t){return e.highlighted===t.highlighted&&e.visible===t.visible&&e.locked===t.locked&&e.id===t.id&&e.index===t.index&&e.cls===t.cls&&e.color===t.color}),Me=function(e){return[e.id,e.color,e.locked,e.visible,e.highlighted]},Ne=Object(a.memo)(function(e){var t=e.regions,n=e.onDeleteRegion,a=e.onChangeRegion,i=e.onSelectRegion,r=we();return o.a.createElement(z,{title:"Regions",subTitle:"",icon:o.a.createElement(ie.a,{style:{color:D.a[700]}}),expandedByDefault:!0},o.a.createElement("div",{className:r.container},o.a.createElement(Ce,null),o.a.createElement(je,null),t.map(function(e,t){return o.a.createElement(Se,Object.assign({key:e.id},e,{region:e,index:t,onSelectRegion:i,onDeleteRegion:n,onChangeRegion:a}))})))},function(e,t){return ee()(e.regions.map(Me),t.regions.map(Me))}),Ae=n(254),Le=n.n(Ae),ke=n(961),Pe=n(163),De=n.n(Pe),_e=n(90),Re=n.n(_e),Be=Object(c.a)({emptyText:{fontSize:14,fontWeight:"bold",color:D.a[500],textAlign:"center",padding:20}}),We=Object(a.memo)(function(e){var t=e.history,n=e.onRestoreHistory,a=Be();return o.a.createElement(z,{title:"History",icon:o.a.createElement(Le.a,{style:{color:D.a[700]}}),expandedByDefault:!0},o.a.createElement(Z.a,null,0===t.length&&o.a.createElement("div",{className:a.emptyText},"No History Yet"),t.map(function(e,t){var a=e.name,i=e.time;return o.a.createElement(q.a,{button:!0,dense:!0,key:t},o.a.createElement(Q.a,{primary:a,secondary:Re()(i).format("LT")}),0===t&&o.a.createElement(ke.a,{onClick:function(){return n()}},o.a.createElement(k.a,null,o.a.createElement(De.a,null))))})))},function(e,t){return ee()(e.history.map(function(e){return[e.name,e.time]}),t.history.map(function(e){return[e.name,e.time]}))}),ze=function(e){var t=e.state,n=e.lastAction,a=(t.images||[]).find(function(e){return e.src===t.selectedImage}),i=a?(a.regions||[]).find(function(e){return e.highlighted}):null;return o.a.createElement(z,{title:"Debug",icon:o.a.createElement("span",null),expandedByDefault:!0},o.a.createElement("div",{style:{padding:4}},o.a.createElement("div",null,o.a.createElement("b",null,"region"),":"),o.a.createElement("pre",null,JSON.stringify(i,null,"  ")),o.a.createElement("div",null,o.a.createElement("b",null,"lastAction"),":"),o.a.createElement("pre",null,JSON.stringify(n,null,"  ")),o.a.createElement("div",null,o.a.createElement("b",null,"mode"),":"),o.a.createElement("pre",null,JSON.stringify(t.mode,null,"  ")),o.a.createElement("div",null,o.a.createElement("b",null,"frame:")),o.a.createElement("pre",null,JSON.stringify(t.selectedImageFrameTime,null,"  "))))},Ge=n(255),He=n.n(Ge),Ve=n(7),Fe=n.n(Ve),Ue=(Object(c.a)({}),[]),Ye=Object(a.memo)(function(e){var t=e.currentImage,n=e.imageClsList,i=void 0===n?Ue:n,r=e.imageTagList,c=void 0===r?Ue:r,l=e.onChangeImage;if(!t)return null;var s=t.tags,u=void 0===s?[]:s,d=t.cls,g=void 0===d?null:d,m=Object(B.a)(function(e){return l({cls:e.value})}),h=Object(B.a)(function(e){return l({tags:e.map(function(e){return e.value})})}),p=Object(a.useMemo)(function(){return g?{value:g,label:g}:null},[g]),b=Object(a.useMemo)(function(){return Object(Ve.asMutable)(i.map(function(e){return{value:e,label:e}}))},[i]),y=Object(a.useMemo)(function(){return Object(Ve.asMutable)(c.map(function(e){return{value:e,label:e}}))},[c]),v=Object(a.useMemo)(function(){return u.map(function(e){return{value:e,label:e}})},[u]);return o.a.createElement(z,{title:"Image Tags",expandedByDefault:!0,noScroll:!0,icon:o.a.createElement(He.a,{style:{color:D.a[700]}})},i.length>0&&o.a.createElement("div",{style:{padding:8}},o.a.createElement(f.default,{placeholder:"Image Classification",onChange:m,value:p,options:b})),c.length>0&&o.a.createElement("div",{style:{padding:8,paddingTop:0}},o.a.createElement(f.default,{isMulti:!0,placeholder:"Image Tags",onChange:h,value:v,options:y})))},function(e,t){return e.currentImage.cls===t.currentImage.cls&&e.currentImage.tags===t.currentImage.tags&&e.imageClsList===t.imageClsList&&e.imageTagList===t.imageTagList}),Ke=n(256),Xe=n.n(Ke),Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e<1e3)return e+"ms";var n=e/1e3;if(n<60)return Number.isInteger(n)?n+"s":n.toFixed(t)+"s";var a=n/60;return Number.isInteger(a)?a+"m":a.toFixed(t)+"m"},Ze=Object(V.a)("div")({cursor:"pointer",display:"flex",alignItems:"center",padding:8,fontSize:14,color:D.a[700],"&.current":{backgroundColor:Oe.a[100]},"&:hover":{backgroundColor:D.a[100]},"& .time":{flexGrow:1,fontWeight:"bold","& .regionCount":{marginLeft:8,fontWeight:"normal",color:D.a[500]}},"& .trash":{"& .icon":{fontSize:18,color:D.a[600],transition:"transform 80ms","&:hover":{color:D.a[800],transform:"scale(1.25,1.25)"}}}}),qe=function(e){var t=e.currentVideoTime,n=e.keyframes,a=e.onChangeVideoTime,i=e.onDeleteKeyframe,r=Object.keys(n).map(function(e){return parseInt(e)});return o.a.createElement(z,{title:"Keyframes",subTitle:"",icon:o.a.createElement(Xe.a,{style:{color:D.a[700]}}),expandedByDefault:!0},r.map(function(e){return o.a.createElement(Ze,{fullWidth:!0,key:e,className:t===e?"current":"",onClick:function(){return a(e)}},o.a.createElement("div",{className:"time"},Je(e,2),o.a.createElement("span",{className:"regionCount"},"(",(n[e].regions||[]).length,")")),o.a.createElement("div",{className:"trash"},o.a.createElement(ge.a,{onClick:function(t){i(e),t.stopPropagation()},className:"icon"})))}))},Qe=(n(238),Object(c.a)({shortcutKeyFieldWrapper:{paddingTop:8,display:"inline-flex",width:"100%"},shortcutKeyText:{lineHeight:0},shortcutTextfield:{width:"100%",boxSizing:"border-box",textAlign:"center"}}),Object(c.a)({})),$e=[],et=function(e){var t=e.debug,n=e.taskDescription,a=e.keyframes,i=e.images,r=e.regions,c=e.history,l=e.labelImages,s=e.currentImage,u=e.currentVideoTime,d=e.imageClsList,g=e.imageTagList,m=e.onChangeImage,h=e.onSelectRegion,f=e.onSelectImage,p=e.onChangeRegion,b=e.onDeleteRegion,y=e.onRestoreHistory,v=e.onChangeVideoTime,E=e.onDeleteKeyframe;e.onShortcutActionDispatched,Qe();return r||(r=$e),o.a.createElement("div",null,t&&o.a.createElement(ze,{state:t,lastAction:t.lastAction}),n&&(n||"").length>1&&o.a.createElement(K,{description:n}),l&&o.a.createElement(Ye,{currentImage:s,imageClsList:d,imageTagList:g,onChangeImage:m,expandedByDefault:!0}),i&&i.length>1&&o.a.createElement(ae,{onSelect:f,images:i}),o.a.createElement(Ne,{regions:r,onSelectRegion:h,onChangeRegion:p,onDeleteRegion:b}),a&&o.a.createElement(qe,{currentVideoTime:u,keyframes:a,onChangeVideoTime:v,onDeleteKeyframe:E}),o.a.createElement(We,{history:c,onRestoreHistory:function(){return y()}}))},tt=n(11),nt=n(133),at=function(e){var t=e.mousePosition,n=e.x,i=e.y,r=Object(a.useState)(),c=Object(m.a)(r,2),l=(c[0],c[1]);return t&&(n=t.current.x,i=t.current.y),Object(a.useEffect)(function(){if(t){var e=setInterval(function(){n===t.current.x&&i===t.current.y||l([t.current.x,t.current.y])},10);return function(){return clearInterval(e)}}}),o.a.createElement(a.Fragment,null,o.a.createElement("div",{style:{position:"absolute",height:"100%",width:1,zIndex:10,backgroundColor:"#f00",left:n,pointerEvents:"none",top:0}}),o.a.createElement("div",{style:{position:"absolute",width:"100%",zIndex:10,height:1,backgroundColor:"#f00",top:i,pointerEvents:"none",left:0}}))},ot=n(966),it=Object(V.a)("div")({"& > div":{width:"100%",height:"100%"}}),rt=function(e){var t=e.children,n=Object(M.a)(e,["children"]),i=Object(a.useState)(!1),r=Object(m.a)(i,2),c=r[0],l=r[1],s=Object(B.a)(function(e){c||l(!0),n.onMouseMove&&n.onMouseMove(e)}),u=Object(B.a)(function(e){setTimeout(function(){c&&l(!1)},100)});return o.a.createElement(it,Object.assign({},n,{onMouseMove:s,onMouseLeave:u}),o.a.createElement(ot.a,{enabled:c,removeScrollBar:!1},t))},ct=n(971),lt=n(965),st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n="undefined"!==typeof window,o=Object(ct.a)({width:n?window.innerWidth:e,height:n?window.innerHeight:t}),i=Object(m.a)(o,2),r=i[0],c=i[1];return Object(a.useEffect)(function(){if(n){var e=function(){c({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}},[]),Object(lt.a)(function(){n&&(window.innerWidth===r.width&&window.innerHeight===r.height||c({width:window.innerWidth,height:window.innerHeight}))},100),r},ut=function(e){var t=e.canvasEl,n=e.changeMat,o=e.changeDragging,i=e.zoomStart,r=(e.zoomEnd,e.changeZoomStart),c=e.changeZoomEnd,l=e.layoutParams,s=e.zoomWithPrimary,u=e.dragWithPrimary,d=e.mat,g=e.onMouseMove,m=e.onMouseUp,h=e.onMouseDown,f=e.dragging,p=Object(a.useRef)({x:0,y:0}),b=Object(a.useRef)({x:0,y:0}),y=function(e,t){var a=[t.x,t.y],o=a[0],i=a[1],r="object"===typeof e?e.to/d.a:1+.2*e;d.translate(o,i).scaleU(r),d.a>2&&d.scaleU(2/d.a),d.a<.05&&d.scaleU(.05/d.a),d.translate(-o,-i),n(d.clone())};return{mouseEvents:{onMouseMove:function(e){var a=t.current.getBoundingClientRect(),o=a.left,r=a.top;b.current.x=p.current.x,b.current.y=p.current.y,p.current.x=e.clientX-o,p.current.y=e.clientY-r;var u=d.applyToPoint(p.current.x,p.current.y);s&&i&&c(u);var m=l.current,h=m.iw,y=m.ih;g({x:u.x/h,y:u.y/y}),f&&(d.translate(b.current.x-p.current.x,b.current.y-p.current.y),n(d.clone())),e.preventDefault()},onMouseDown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.preventDefault(),1===e.button||0===e.button&&u)return o(!0);var n=d.applyToPoint(p.current.x,p.current.y);if(s&&0===e.button)return r(n),void c(n);if(0===e.button){t.type,t.type;var a=l.current,i=a.iw,g=a.ih;h({x:n.x/i,y:n.y/g})}},onMouseUp:function(e){e.preventDefault();var t=d.applyToPoint(p.current.x,p.current.y);if(i){var a=t;if(Math.abs(i.x-a.x)<10&&Math.abs(i.y-a.y)<10)d.a<1?y({to:1},p.current):y({to:.25},p.current);else{var s=l.current,g=s.iw,h=s.ih;if(i.x>a.x){var f=[a.x,i.x];i.x=f[0],a.x=f[1]}if(i.y>a.y){var b=[a.y,i.y];i.y=b[0],a.y=b[1]}var v=Math.min((a.x-i.x)/g,(a.y-i.y)/h);v<.05&&(v=.05),v>10&&(v=10);var E=nt.Matrix.from(1,0,0,1,-10,-10).translate(i.x,i.y).scaleU(v);n(E.clone())}r(null),c(null)}if(1===e.button||0===e.button&&u)return o(!1);if(0===e.button){var O=l.current,x=O.iw,w=O.ih;m({x:t.x/x,y:t.y/w})}},onWheel:function(e){var t=e.deltaY>0?1:e.deltaY<0?-1:0;y(t,p.current)}},mousePosition:p}},dt=function(e){var t=e.layoutParams,n=e.mat;return Object(B.a)(function(e){var a=t.current,o=a.iw,i=a.ih,r=function(e){switch(e.type){case"polygon":var t={x:Math.min.apply(Math,Object(tt.a)(e.points.map(function(e){var t=Object(m.a)(e,2),n=t[0];return t[1],n}))),y:Math.min.apply(Math,Object(tt.a)(e.points.map(function(e){var t=Object(m.a)(e,2);return t[0],t[1]}))),w:0,h:0};return t.w=Math.max.apply(Math,Object(tt.a)(e.points.map(function(e){var t=Object(m.a)(e,2),n=t[0];return t[1],n})))-t.x,t.h=Math.max.apply(Math,Object(tt.a)(e.points.map(function(e){var t=Object(m.a)(e,2);return t[0],t[1]})))-t.y,t;case"expanding-line":var n={x:Math.min.apply(Math,Object(tt.a)(e.points.map(function(e){var t=e.x;return e.y,t}))),y:Math.min.apply(Math,Object(tt.a)(e.points.map(function(e){return e.x,e.y}))),w:0,h:0};return n.w=Math.max.apply(Math,Object(tt.a)(e.points.map(function(e){var t=e.x;return e.y,t})))-n.x,n.h=Math.max.apply(Math,Object(tt.a)(e.points.map(function(e){return e.x,e.y})))-n.y,n;case"box":return{x:e.x,y:e.y,w:e.w,h:e.h};case"point":return{x:e.x,y:e.y,w:0,h:0};default:return{x:0,y:0,w:0,h:0}}throw new Error("unknown region")}(e),c="point"===e.type?15:2,l={x:r.x*o-c,y:r.y*i-c,w:r.w*o+2*c,h:r.h*i+2*c};return Object(C.a)({},n.clone().inverse().applyToPoint(l.x,l.y),{w:l.w/n.a,h:l.h/n.d})})},gt=Object(V.a)("svg")({pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,width:"100%",height:"100%","& text":{fill:"#fff"},"& path":{vectorEffect:"non-scaling-stroke",strokeWidth:2,opacity:.5,stroke:"#FFF",fill:"none",strokeDasharray:5,animationDuration:"4s",animationTimingFunction:"linear",animationIterationCount:"infinite",animationPlayState:"running"}}),mt=function(e){var t=e.projectRegionBox,n=e.regions,i=e.pointDistancePrecision,r=e.realSize;return o.a.createElement(gt,null,n.filter(function(e){return"point"===e.type}).flatMap(function(e,c){return n.filter(function(e,t){return t>c}).filter(function(e){return"point"===e.type}).map(function(n){var c,l=t(e),s=t(n),u={x:(l.x+l.w/2+s.x+s.w/2)/2,y:(l.y+l.h/2+s.y+s.h/2)/2};if(r){var d=r.w,g=r.h,m=r.unitName;c=Math.sqrt(Math.pow(e.x*d-n.x*d,2)+Math.pow(e.y*g-n.y*g,2)).toFixed(i)+m}else c=(100*Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))).toFixed(i)+"%";return o.a.createElement(a.Fragment,null,o.a.createElement("path",{d:"M".concat(l.x+l.w/2,",").concat(l.y+l.h/2," L").concat(s.x+s.w/2,",").concat(s.y+s.h/2)}),o.a.createElement("text",{x:u.x,y:u.y},c))})}))},ht={regionInfo:{fontSize:12,cursor:"default",transition:"opacity 200ms",opacity:.5,"&:hover":{opacity:.9,cursor:"pointer"},"&.highlighted":{opacity:.9,"&:hover":{opacity:1}},fontWeight:600,color:D.a[900],padding:8,"& .name":{display:"flex",flexDirection:"row",alignItems:"center","& .circle":{marginRight:4,boxShadow:"0px 0px 2px rgba(0,0,0,0.4)",width:10,height:10,borderRadius:5}},"& .tags":{"& .tag":{color:D.a[700],display:"inline-block",margin:1,fontSize:10,textDecoration:"underline"}}}},ft=n(164),pt=n.n(ft),bt=Object(c.a)(ht),yt=Object(a.memo)(function(e){var t=e.region,n=e.editing,a=e.allowedClasses,i=e.allowedTags,r=e.onDelete,c=e.onChange,l=e.onClose,s=e.onOpen,u=bt();return o.a.createElement(N.a,{onClick:function(){return n?null:s(t)},className:R()(u.regionInfo,{highlighted:t.highlighted})},n?o.a.createElement("div",{style:{width:200}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{display:"flex",backgroundColor:t.color,color:"#fff",padding:4,paddingLeft:8,paddingRight:8,borderRadius:4,fontWeight:"bold",textShadow:"0px 0px 5px rgba(0,0,0,0.4)"}},t.type),o.a.createElement("div",{style:{flexGrow:1}}),o.a.createElement(k.a,{onClick:function(){return r(t)},tabIndex:-1,style:{width:22,height:22},size:"small",variant:"outlined"},o.a.createElement(ge.a,{style:{marginTop:-8,width:16,height:16}}))),(a||[]).length>0&&o.a.createElement("div",{style:{marginTop:6}},o.a.createElement(f.default,{placeholder:"Classification",onChange:function(e){return c(Object(C.a)({},t,{cls:e.value}))},value:t.cls?{label:t.cls,value:t.cls}:null,options:Object(Ve.asMutable)(a.map(function(e){return{value:e,label:e}}))})),(i||[]).length>0&&o.a.createElement("div",{style:{marginTop:4}},o.a.createElement(f.default,{onChange:function(e){return c(Object(C.a)({},t,{tags:e.map(function(e){return e.value})}))},placeholder:"Tags",value:(t.tags||[]).map(function(e){return{label:e,value:e}}),isMulti:!0,options:Object(Ve.asMutable)(i.map(function(e){return{value:e,label:e}}))})),l&&o.a.createElement("div",{style:{marginTop:4,display:"flex"}},o.a.createElement("div",{style:{flexGrow:1}}),o.a.createElement(h.a,{onClick:function(){return l(t)},size:"small",variant:"contained",color:"primary"},o.a.createElement(pt.a,null)))):o.a.createElement("div",null,t.cls&&o.a.createElement("div",{className:"name"},o.a.createElement("div",{className:"circle",style:{backgroundColor:t.color}}),t.cls),t.tags&&o.a.createElement("div",{className:"tags"},t.tags.map(function(e){return o.a.createElement("div",{key:e,className:"tag"},e)}))))},function(e,t){return e.editing===t.editing&&e.region.x===t.region.x&&e.region.y===t.region.y&&e.region.tags===t.region.tags&&e.region.cls===t.region.cls&&e.region.color===t.region.color&&e.region.highlighted===t.region.highlighted}),vt=function(e){var t=e.regions,n=e.projectRegionBox,a=e.mouseEvents,i=e.regionClsList,r=e.regionTagList,c=e.onBeginRegionEdit,l=e.onChangeRegion,s=e.onCloseRegionEdit,u=e.onDeleteRegion,d=e.layoutParams,g=e.imageSrc,m=e.RegionEditLabel,h=null!=m?m:yt;return t.filter(function(e){return e.visible||void 0===e.visible}).map(function(e){var m=n(e),f=d.current,p=(f.iw,f.ih,8);e.highlighted&&"box"===e.type&&(p+=6);var b=e.editingLabels&&!e.locked?170:e.tags?60:50,y=m.y>b,v=y?{left:m.x,top:m.y-p/2}:{left:m.x,top:m.y+m.h+p/2};return e.locked?o.a.createElement("div",{key:e.id,style:Object(C.a)({position:"absolute"},v,{zIndex:10+(e.editingLabels?5:0)})},o.a.createElement(N.a,{style:Object(C.a)({position:"absolute",left:0},y?{bottom:0}:{top:0},{zIndex:10,backgroundColor:"#fff",borderRadius:4,padding:2,paddingBottom:0,opacity:.5,pointerEvents:"none"})},o.a.createElement(he.a,{style:{width:16,height:16,color:"#333"}}))):o.a.createElement("div",{key:e.id,style:Object(C.a)({position:"absolute"},v,{zIndex:10+(e.editingLabels?5:0),width:200}),onMouseDown:function(e){return e.preventDefault()},onMouseUp:function(e){return e.preventDefault()},onMouseEnter:function(t){e.editingLabels&&(a.onMouseUp(t),t.button=1,a.onMouseUp(t))}},o.a.createElement("div",Object.assign({style:Object(C.a)({position:"absolute",zIndex:20,left:0},y?{bottom:0}:{top:0})},e.editingLabels?{}:function(e){for(var t=Object(C.a)({},e),n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];for(var i=0,r=a;i<r.length;i++)delete t[r[i]];return t}(a,"onMouseDown","onMouseUp")),o.a.createElement(h,{allowedClasses:i,allowedTags:r,onOpen:c,onChange:l,onClose:s,onDelete:u,editing:e.editingLabels,region:e,regions:t,imageSrc:g})))})},Et=n(84),Ot=n(87),xt=n(85),wt=n(212),jt=n(213),It=n(83),Tt=n(214),Ct=n(82),St=n(215),Mt=n(216),Nt=n(217),At=[Et.a[500],Oe.a[500],Ot.a[500],xt.a[800],wt.a[500],jt.a[700],It.a[500],Tt.a[500],Ct.a[500],St.a[500],Mt.a[500],Nt.a[500]];var Lt=At.map(function(e){return(2281701376|function(e){var t=(e=e.replace("#","")).substr(4,2)+e.substr(2,2)+e.substr(0,2);return parseInt(t,16)}(e))>>>0}),kt=At,Pt=n(974),Dt=n(257),_t=n.n(Dt);function Rt(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw i}}}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Wt=function(e){var t=e.regions,n=e.regionClsList,i=e.imageSrc,r=e.imagePosition,c=e.zIndex,l=void 0===c?1:c,s=e.hide,u=void 0!==s&&s;window.mmgc||(window.mmgc=_t()());var d=window.mmgc,g=Object(a.useState)(null),h=Object(m.a)(g,2),f=h[0],p=h[1],b=Object(a.useRef)(!1),y=Object(a.useState)(),v=Object(m.a)(y,2),E=v[0],O=v[1];Object(a.useEffect)(function(){if(i){var e=document.createElement("canvas"),t=e.getContext("2d"),n=new Image;n.crossOrigin="anonymous",n.src=i,n.onload=function(){e.width=n.naturalWidth,e.height=n.naturalHeight,t.drawImage(n,0,0);var a=t.getImageData(0,0,n.naturalWidth,n.naturalHeight);b.current=!1,O(a)}}},[i]),Object(Pt.a)(function(){if(!u&&f&&E&&!(t.filter(function(e){return e.cls}).length<3)&&d.setImageSize){var e=f.getContext("2d");if(!b.current){b.current="processing",d.setMaxClusters(1e4),d.setImageSize(E.width,E.height),d.setClassColor(0,0);for(var a=0;a<Lt.length;a++)d.setClassColor(a+1,Lt[a]);var o=d.getImageAddr();d.HEAPU8.set(E.data,o),d.computeSuperPixels(),b.current="done"}if("done"===b.current)if(["bg","background","nothing"].includes(n[0].toLowerCase())){d.clearClassElements();var i,r=Rt(t.filter(function(e){return"point"===e.type}).filter(function(e){return e.cls}));try{for(r.s();!(i=r.n()).done;){var c=i.value;if(!(c.x<0||c.x>=1)&&!(c.y<0||c.y>=1)){var l=n.indexOf(c.cls);l>Lt.length?console.log("Too many classes to draw on mask!"):d.addClassPoint(l,Math.floor(c.y*E.height),Math.floor(c.x*E.width))}}}catch(O){r.e(O)}finally{r.f()}var s,g=Rt(t.filter(function(e){return"polygon"===e.type}).filter(function(e){return e.cls}));try{var h=function(){var e,t=s.value,a=t.points,o=n.indexOf(t.cls),i=d.addPolygon(o),r=Rt(a.map(function(e,t){return[e,a[(t+1)%a.length]]}));try{for(r.s();!(e=r.n()).done;){var c=e.value,l=Object(m.a)(c,2),u=l[0],g=l[1],h=Math.round(u[1]*E.height),f=Math.round(u[0]*E.width),p=Math.round(g[1]*E.height),b=Math.round(g[0]*E.width);d.addLineToPolygon(i,h,f,p,b)}}catch(O){r.e(O)}finally{r.f()}};for(g.s();!(s=g.n()).done;)h()}catch(O){g.e(O)}finally{g.f()}d.computeMasks();var p=d.getColoredMask(),y=new Uint8ClampedArray(d.HEAPU8.buffer,p,E.data.length),v=new ImageData(y,E.width,E.height);e.clearRect(0,0,E.width,E.height),e.putImageData(v,0,0)}else console.log('first region cls must be "bg" or "background" or "nothing"')}},1e3,[f,E,t,u]);var x=Object(a.useMemo)(function(){var e=r.bottomRight.x-r.topLeft.x,t=r.bottomRight.y-r.topLeft.y;return{display:u?"none":void 0,imageRendering:"pixelated",transform:"translateZ(0px)",left:r.topLeft.x,top:r.topLeft.y,width:isNaN(e)?0:e,height:isNaN(t)?0:t,zIndex:l,position:"absolute",pointerEvents:"none"}},[r.topLeft.x,r.topLeft.y,r.bottomRight.x,r.bottomRight.y,l,u]);return o.a.createElement("canvas",{style:x,width:E?E.width:0,height:E?E.height:0,ref:p})},zt=Object(c.a)({"@keyframes borderDance":{from:{strokeDashoffset:0},to:{strokeDashoffset:100}},highlightBox:{zIndex:2,transition:"opacity 500ms","&.highlighted":{zIndex:3},"&:not(.highlighted)":{opacity:0},"&:not(.highlighted):hover":{opacity:.6},"& path":{vectorEffect:"non-scaling-stroke",strokeWidth:2,stroke:"#FFF",fill:"none",strokeDasharray:5,animationName:"$borderDance",animationDuration:"4s",animationTimingFunction:"linear",animationIterationCount:"infinite",animationPlayState:"running"}}}),Gt=function(e){var t=e.mouseEvents,n=e.dragWithPrimary,a=e.zoomWithPrimary,i=e.createWithPrimary,r=e.onBeginMovePoint,c=e.onSelectRegion,l=e.region,s=e.pbox,u=zt();if(!s.w||s.w===1/0)return null;if(!s.h||s.h===1/0)return null;if(l.unfinished)return null;var d="point"===l.type?{left:s.x+s.w/2-30,top:s.y+s.h/2-30,width:60,height:60}:{left:s.x-5,top:s.y-5,width:s.w+10,height:s.h+10},g="point"===l.type?"M5,5 L".concat(d.width-5," 5L").concat(d.width-5," ").concat(d.height-5,"L5 ").concat(d.height-5,"Z"):"M5,5 L".concat(s.w+5,",5 L").concat(s.w+5,",").concat(s.h+5," L5,").concat(s.h+5," Z");return o.a.createElement("svg",Object.assign({key:l.id,className:R()(u.highlightBox,{highlighted:l.highlighted})},t,a||n?{}:{onMouseDown:function(e){return!l.locked&&"point"===l.type&&l.highlighted&&0===e.button?r(l):0!==e.button||i?void t.onMouseDown(e):c(l)}},{style:Object(C.a)({},l.highlighted?{pointerEvents:"point"!==l.type?"none":void 0,cursor:"grab"}:{cursor:a||n||i?void 0:"pointer",pointerEvents:a||n||i&&!l.highlighted?"none":void 0},{position:"absolute"},d)}),o.a.createElement("path",{d:g}))},Ht=Object(V.a)("div")({width:8,height:8,zIndex:2,border:"2px solid #FFF",position:"absolute"}),Vt=[["nw-resize","n-resize","ne-resize"],["w-resize","grab","e-resize"],["sw-resize","s-resize","se-resize"]],Ft=Object(a.memo)(function(e){var t=e.region,n=e.mouseEvents,i=e.projectRegionBox,r=e.dragWithPrimary,c=e.createWithPrimary,l=e.zoomWithPrimary,s=e.onBeginMovePoint,u=e.onSelectRegion,d=e.layoutParams,g=(e.fullImageSegmentationMode,e.mat),h=e.onBeginBoxTransform,f=e.onBeginMovePolygonPoint,p=e.onAddPolygonPoint,b=e.showHighlightBox,y=i(t),v=d.current,E=v.iw,O=v.ih;return o.a.createElement(a.Fragment,null,o.a.createElement(rt,null,b&&"polygon"!==t.type&&o.a.createElement(Gt,{region:t,mouseEvents:n,dragWithPrimary:r,createWithPrimary:c,zoomWithPrimary:l,onBeginMovePoint:s,onSelectRegion:u,pbox:y}),"box"===t.type&&!r&&!l&&!t.locked&&t.highlighted&&g.a<1.2&&[[0,0],[.5,0],[1,0],[1,.5],[1,1],[.5,1],[0,1],[0,.5],[.5,.5]].map(function(e,a){var i=Object(m.a)(e,2),r=i[0],c=i[1];return o.a.createElement(Ht,Object.assign({key:a},n,{onMouseDown:function(e){if(0===e.button)return h(t,[2*r-1,2*c-1]);n.onMouseDown(e)},style:{left:y.x-4-2+y.w*r,top:y.y-4-2+y.h*c,cursor:Vt[2*c][2*r],borderRadius:.5===r&&.5===c?4:void 0}}))}),"polygon"===t.type&&!r&&!l&&!t.locked&&t.highlighted&&t.points.map(function(e,a){var i=Object(m.a)(e,2),r=i[0],c=i[1],l=g.clone().inverse().applyToPoint(r*E,c*O);return o.a.createElement(Ht,Object.assign({key:a},n,{onMouseDown:function(e){if(0===e.button&&(!t.open||0===a))return f(t,a);n.onMouseDown(e)},style:{cursor:t.open?0===a?"pointer":void 0:"move",zIndex:10,pointerEvents:t.open&&a===t.points.length-1?"none":void 0,left:l.x-4,top:l.y-4}}))}),"polygon"===t.type&&t.highlighted&&!r&&!l&&!t.locked&&!t.open&&t.points.length>1&&t.points.map(function(e,n){return[e,t.points[(n+1)%t.points.length]]}).map(function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return[(n[0]+a[0])/2,(n[1]+a[1])/2]}).map(function(e,a){var i=g.clone().inverse().applyToPoint(e[0]*E,e[1]*O);return o.a.createElement(Ht,Object.assign({key:a},n,{onMouseDown:function(o){if(0===o.button)return p(t,e,a+1);n.onMouseDown(o)},style:{cursor:"copy",zIndex:10,left:i.x-4,top:i.y-4,border:"2px dotted #fff",opacity:.5}}))})))},function(e,t){return e.region===t.region&&e.dragWithPrimary===t.dragWithPrimary&&e.createWithPrimary===t.createWithPrimary&&e.zoomWithPrimary===t.zoomWithPrimary&&e.mat===t.mat}),Ut=Object(a.memo)(function(e){return e.regions.filter(function(e){return e.visible||void 0===e.visible}).filter(function(e){return!e.locked}).map(function(t,n){return o.a.createElement(Ft,Object.assign({key:t.id},e,{region:t}))})},function(e,t){return e.regions===t.regions&&e.mat===t.mat}),Yt=Object(a.createContext)({showCrosshairs:!1,showHighlightBox:!0,wasdMode:!0}),Kt=function(){return Object(a.useContext)(Yt)},Xt=function(e){var t=e.children,n=Object(a.useState)(function(){return function(){if(!window||!window.localStorage)return{};for(var e={},t=0;t<window.localStorage.length;t++){var n=window.localStorage.key(t);if(n.startsWith("settings_"))try{e[n.replace("settings_","")]=JSON.parse(window.localStorage.getItem(n))}catch(a){}}return e}()}),i=Object(m.a)(n,2),r=i[0],c=i[1];return o.a.createElement(Yt.Provider,{value:Object(C.a)({},r,{changeSetting:function(e,t){c(Object(C.a)({},r,Object(S.a)({},e,t))),window.localStorage.setItem("settings_".concat(e),JSON.stringify(t))}})},t)},Jt=Object(V.a)("video")({zIndex:0,position:"absolute"}),Zt=Object(V.a)("img")({zIndex:0,position:"absolute"}),qt=function(e){var t=e.imagePosition,n=e.mouseEvents,i=e.videoTime,r=e.videoSrc,c=e.imageSrc,l=e.onLoad,s=e.videoPlaying,u=e.onChangeVideoTime,d=e.onChangeVideoPlaying,g=Kt(),m=Object(a.useRef)(),h=Object(a.useRef)();Object(a.useEffect)(function(){!s&&m.current&&(m.current.currentTime=(i||0)/1e3)},[i]),Object(a.useEffect)(function(){var e=!1;return m.current&&(s?(m.current.play(),e=!0,g.videoPlaybackSpeed&&(m.current.playbackRate=parseFloat(g.videoPlaybackSpeed))):m.current.pause()),function t(){if(e&&m.current){var n=Math.floor(1e3*m.current.currentTime);i!==n&&u(n),m.current.paused&&(e=!1,d(!1)),requestAnimationFrame(t)}}(),function(){e=!1}},[s]);var f=Object(B.a)(function(e){var t=e.currentTarget;t.currentTime=(i||0)/1e3,l&&l({naturalWidth:t.videoWidth,naturalHeight:t.videoHeight,videoElm:t,duration:t.duration})}),p=Object(B.a)(function(e){var t=e.currentTarget;l&&l({naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight,imageElm:t})}),b=Object(a.useMemo)(function(){var e=t.bottomRight.x-t.topLeft.x,n=t.bottomRight.y-t.topLeft.y;return{imageRendering:"pixelated",left:t.topLeft.x,top:t.topLeft.y,width:isNaN(e)?0:e,height:isNaN(n)?0:n}},[t.topLeft.x,t.topLeft.y,t.bottomRight.x,t.bottomRight.y]);return r||c?c&&void 0===i?o.a.createElement(Zt,Object.assign({},n,{src:c,ref:h,style:b,onLoad:p})):o.a.createElement(Jt,Object.assign({},n,{ref:m,style:b,onLoadedMetadata:f,src:r||c})):"No imageSrc or videoSrc provided"},Qt=n(52),$t=n.n(Qt);function en(e,t,n){return e<=t?t:e>=n?n:e}var tn,nn={point:Object(a.memo)(function(e){var t=e.region,n=e.iw,a=e.ih;return o.a.createElement("g",{transform:"translate(".concat(t.x*n," ").concat(t.y*a,")")},o.a.createElement("path",{d:"M0 8L8 0L0 -8L-8 0Z",strokeWidth:2,stroke:t.color,fill:"transparent"}))}),box:Object(a.memo)(function(e){var t=e.region,n=e.iw,a=e.ih;return o.a.createElement("g",{transform:"translate(".concat(t.x*n," ").concat(t.y*a,")")},o.a.createElement("rect",{strokeWidth:2,x:0,y:0,width:t.w*n,height:t.h*a,stroke:$t()(t.color,.75),fill:$t()(t.color,.25)}))}),polygon:Object(a.memo)(function(e){var t=e.region,n=e.iw,a=e.ih,i=(e.fullSegmentationMode,t.open?"polyline":"polygon");return o.a.createElement(i,{points:t.points.map(function(e){var t=Object(m.a)(e,2),o=t[0],i=t[1];return[o*n,i*a]}).map(function(e){return e.join(" ")}).join(" "),strokeWidth:2,stroke:$t()(t.color,.75),fill:$t()(t.color,.25)})}),"expanding-line":Object(a.memo)(function(e){var t=e.region,n=e.iw,a=e.ih,i=t.expandingWidth,r=void 0===i?.005:i,c=t.points;r=c.slice(-1)[0].width||r;var l=c.map(function(e,t){var n=e.x,a=e.y,o=e.angle,i=e.width;if(!o){var l=c[en(t+1,0,c.length-1)],s=c[en(t-1,0,c.length-1)];o=Math.atan2(s.x-l.x,s.y-l.y)+Math.PI/2}var u=Math.sin(o)*(i||r)/2,d=Math.cos(o)*(i||r)/2;return[{x:n+u,y:a+d},{x:n-u,y:a-d}]}),s=l.map(function(e){var t=Object(m.a)(e,2),n=t[0];t[1];return n}),u=l.map(function(e){var t=Object(m.a)(e,2);t[0];return t[1]}).asMutable();u.reverse();var d=c.slice(-1)[0];return o.a.createElement(o.a.Fragment,null,o.a.createElement("polygon",{points:s.concat(t.candidatePoint?[t.candidatePoint]:[]).concat(u).map(function(e){return"".concat(e.x*n," ").concat(e.y*a)}).join(" "),strokeWidth:2,stroke:$t()(t.color,.75),fill:$t()(t.color,.25)}),c.map(function(e,i){var r=e.x,c=e.y,l=e.angle;return o.a.createElement("g",{transform:"translate(".concat(r*n," ").concat(c*a,") rotate(").concat(180*-(l||0)/Math.PI,")")},o.a.createElement("g",null,o.a.createElement("rect",{x:-5,y:-5,width:10,height:10,strokeWidth:2,stroke:$t()(t.color,.75),fill:$t()(t.color,.25)})))}),o.a.createElement("rect",{x:d.x*n-8,y:d.y*a-8,width:16,height:16,strokeWidth:4,stroke:$t()(t.color,.5),fill:"transparent"}))}),pixel:function(){return null}},an=Object(a.memo)(function(e){var t=e.regions,n=e.iw,a=e.ih,i=e.fullSegmentationMode;return t.filter(function(e){return!1!==e.visible}).map(function(e){var t=nn[e.type];return o.a.createElement(t,{key:e.regionId,region:e,iw:n,ih:a,fullgeSegmentationMode:i})})},function(e,t){return e.regions===t.regions&&e.iw===t.iw&&e.ih===t.ih}),on=function(e){e.mat;var t=e.imagePosition,n=e.regions,a=void 0===n?[]:n,i=e.fullSegmentationMode,r=t.bottomRight.x-t.topLeft.x,c=t.bottomRight.y-t.topLeft.y;return isNaN(r)||isNaN(c)?null:o.a.createElement("svg",{width:r,height:c,style:{position:"absolute",zIndex:2,left:t.topLeft.x,top:t.topLeft.y,pointerEvents:"none",width:r,height:c}},o.a.createElement(an,{regions:a,iw:r,ih:c,fullSegmentationMode:i}))},rn=Object(c.a)({canvas:{width:"100%",height:"100%",position:"relative",zIndex:1},zoomIndicator:{position:"absolute",bottom:16,right:0,backgroundColor:"rgba(0,0,0,0.4)",color:"#fff",opacity:.5,fontWeight:"bolder",fontSize:14,padding:4},fixedRegionLabel:{position:"absolute",zIndex:10,top:10,left:10,opacity:.5,transition:"opacity 500ms","&:hover":{opacity:1}}}),cn=function(e){var t=e.regions,n=e.imageSrc,i=e.videoSrc,r=e.videoTime,c=e.realSize,l=e.showTags,s=e.onMouseMove,u=void 0===s?function(e){return null}:s,d=e.onMouseDown,g=void 0===d?function(e){return null}:d,h=e.onMouseUp,f=void 0===h?function(e){return null}:h,p=e.dragWithPrimary,b=void 0!==p&&p,y=e.zoomWithPrimary,v=void 0!==y&&y,E=e.createWithPrimary,O=void 0!==E&&E,x=e.pointDistancePrecision,w=void 0===x?0:x,j=e.regionClsList,I=e.regionTagList,T=e.showCrosshairs,S=e.showHighlightBox,M=void 0===S||S,N=e.showPointDistances,A=e.allowedArea,L=e.RegionEditLabel,k=void 0===L?null:L,P=e.videoPlaying,D=void 0!==P&&P,_=e.showMask,R=void 0===_||_,W=e.fullImageSegmentationMode,z=e.onImageOrVideoLoaded,G=e.onChangeRegion,H=e.onBeginRegionEdit,V=e.onCloseRegionEdit,F=e.onBeginBoxTransform,U=e.onBeginMovePolygonPoint,Y=e.onAddPolygonPoint,K=e.onSelectRegion,X=e.onBeginMovePoint,J=e.onDeleteRegion,Z=e.onChangeVideoTime,q=e.onChangeVideoPlaying,Q=rn(),$=Object(a.useRef)(null),ee=Object(a.useRef)({}),te=Object(ct.a)(!1),ne=Object(m.a)(te,2),ae=ne[0],oe=ne[1],ie=Object(ct.a)(0),re=Object(m.a)(ie,2),ce=(re[0],re[1],Object(ct.a)(null)),le=Object(m.a)(ce,2),se=le[0],ue=le[1],de=Object(ct.a)(null),ge=Object(m.a)(de,2),me=ge[0],he=ge[1],fe=Object(ct.a)(nt.Matrix.from(1,0,0,1,-10,-10)),pe=Object(m.a)(fe,2),be=pe[0],ye=pe[1],ve=(Object(a.useRef)({}),st());!function(e){var t=e.getLatestMat,n=e.changeMat,o=Kt().wasdMode;Object(a.useEffect)(function(){if(o){var e={w:[0,-10],a:[-10,0],s:[0,10],d:[10,0]},a={},i=Object.keys(e),r=function(e){i.includes(e.key)&&(a[e.key]=!0,e.preventDefault(),e.stopPropagation())},c=function(e){i.includes(e.key)&&(a[e.key]=!1,e.preventDefault(),e.stopPropagation())},l=setInterval(function(){var o=t().clone(),i=!1;for(var r in a){var c;a[r]&&(o=(c=o).translate.apply(c,Object(tt.a)(e[r])),i=!0)}i&&n(o)},16);return window.addEventListener("keydown",r),window.addEventListener("keyup",c),function(){clearInterval(l),window.removeEventListener("keydown",r),window.removeEventListener("keyup",c)}}},[o])}({getLatestMat:Object(B.a)(function(){return be}),changeMat:ye});var Ee=ut({canvasEl:$,dragging:ae,mat:be,layoutParams:ee,changeMat:ye,zoomStart:se,zoomEnd:me,changeZoomStart:ue,changeZoomEnd:he,changeDragging:oe,zoomWithPrimary:v,dragWithPrimary:b,onMouseMove:u,onMouseDown:g,onMouseUp:f}),Oe=Ee.mouseEvents,xe=Ee.mousePosition;Object(a.useLayoutEffect)(function(){return ye(be.clone())},[ve]);be.applyToPoint(xe.current.x,xe.current.y);var we=dt({layoutParams:ee,mat:be}),je=Object(a.useState)(),Ie=Object(m.a)(je,2),Te=Ie[0],Ce=Ie[1],Se=Boolean(Te&&Te.naturalWidth),Me=Object(B.a)(function(e){var t={naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight,duration:e.duration};z&&z(t),Ce(t),setTimeout(function(){return Ce(t)},10)}),Ne=function(){var e=Object(a.useRef)(null);if(null===e.current){e.current={image:new Image,pattern:null};var t=document.createElement("canvas");t.width=100,t.height=100;var n=t.getContext("2d");e.current.image.onload=function(){e.current.pattern=n.createPattern(e.current.image,"repeat")},e.current.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wMSAxY5oG+lzgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAcSURBVAjXY/jPwPCfAQnA+TAGugLcAhhakRUAAK3lEe8m9qZhAAAAAElFTkSuQmCC"}return e.current.pattern}(),Ae=$.current;if(Ae&&Se){var Le=Ae.clientWidth,ke=Ae.clientHeight,Pe=Math.max(Te.naturalWidth/(Le-20),Te.naturalHeight/(ke-20)),De=Te.naturalWidth/Pe,_e=Te.naturalHeight/Pe;ee.current={iw:De,ih:_e,fitScale:Pe,canvasWidth:Le,canvasHeight:ke}}Object(a.useLayoutEffect)(function(){if(Te){var e=Ae.clientWidth,t=Ae.clientHeight;Ae.width=e,Ae.height=t;var n=Ae.getContext("2d");n.save(),n.transform.apply(n,Object(tt.a)(be.clone().inverse().toArray()));var a=ee.current,o=a.iw,i=a.ih;if(A){var r=A.x,c=A.y,l=A.w,s=A.h;n.save(),n.globalAlpha=1;var u=[[0,0],[o,0],[o,i],[0,i]],d=[[r*o,c*i],[r*o+l*o,c*i],[r*o+l*o,c*i+s*i],[r*o,c*i+s*i]];n.moveTo.apply(n,Object(tt.a)(u[0])),u.forEach(function(e){return n.lineTo.apply(n,Object(tt.a)(e))}),n.lineTo.apply(n,Object(tt.a)(u[0])),n.closePath(),d.reverse(),n.moveTo.apply(n,Object(tt.a)(d[0])),d.forEach(function(e){return n.lineTo.apply(n,Object(tt.a)(e))}),n.lineTo.apply(n,Object(tt.a)(d[0])),n.fillStyle=Ne||"#f00",n.fill(),n.restore()}n.restore()}});var Re=ee.current,Be=Re.iw,We=Re.ih,ze=se&&me?Object(C.a)({},be.clone().inverse().applyToPoint(se.x,se.y),{w:(me.x-se.x)/be.a,h:(me.y-se.y)/be.d}):null;ze&&(ze.w<0&&(ze.x+=ze.w,ze.w*=-1),ze.h<0&&(ze.y+=ze.h,ze.h*=-1));var Ge={topLeft:be.clone().inverse().applyToPoint(0,0),bottomRight:be.clone().inverse().applyToPoint(Be,We)},He=Object(a.useMemo)(function(){return t.find(function(e){return e.highlighted})},[t]);return o.a.createElement("div",{style:{width:"100%",height:"100%",maxHeight:"calc(100vh - 68px)",position:"relative",overflow:"hidden",cursor:O?"crosshair":ae?"grabbing":b?"grab":v?be.a<1?"zoom-out":"zoom-in":void 0}},T&&o.a.createElement(at,{key:"crossHairs",mousePosition:xe}),Se&&!ae&&o.a.createElement(Ut,{key:"regionSelectAndTransformBoxes",regions:t,mouseEvents:Oe,projectRegionBox:we,dragWithPrimary:b,createWithPrimary:O,zoomWithPrimary:v,onBeginMovePoint:X,onSelectRegion:K,layoutParams:ee,mat:be,onBeginBoxTransform:F,onBeginMovePolygonPoint:U,onAddPolygonPoint:Y,showHighlightBox:M}),Se&&l&&!ae&&o.a.createElement(rt,{key:"regionTags"},o.a.createElement(vt,{regions:t,projectRegionBox:we,mouseEvents:Oe,regionClsList:j,regionTagList:I,onBeginRegionEdit:H,onChangeRegion:G,onCloseRegionEdit:V,onDeleteRegion:J,layoutParams:ee,imageSrc:n,RegionEditLabel:k})),!l&&He&&o.a.createElement("div",{key:"topLeftTag",className:Q.fixedRegionLabel},o.a.createElement(yt,{disableClose:!0,allowedClasses:j,allowedTags:I,onChange:G,onDelete:J,editing:!0,region:He,imageSrc:n})),v&&null!==ze&&o.a.createElement("div",{key:"zoomBox",style:{position:"absolute",zIndex:1,border:"1px solid #fff",pointerEvents:"none",left:ze.x,top:ze.y,width:ze.w,height:ze.h}}),N&&o.a.createElement(mt,{key:"pointDistances",regions:t,realSize:c,projectRegionBox:we,pointDistancePrecision:w}),o.a.createElement(rt,Object.assign({style:{width:"100%",height:"100%"}},Oe),o.a.createElement(o.a.Fragment,null,W&&o.a.createElement(Wt,{hide:!R,imagePosition:Ge,regionClsList:j,imageSrc:n,regions:t}),o.a.createElement("canvas",{style:{opacity:.25},className:Q.canvas,ref:$}),o.a.createElement(on,{mat:be,imagePosition:Ge,regions:t,fullSegmentationMode:W}),o.a.createElement(qt,{videoPlaying:D,imagePosition:Ge,mouseEvents:Oe,onLoad:Me,videoTime:r,videoSrc:i,imageSrc:n,onChangeVideoTime:Z,onChangeVideoPlaying:q}))),o.a.createElement("div",{className:Q.zoomIndicator},(1/be.a*100).toFixed(0),"%"))},ln=Object(V.a)(h.a)({width:80,margin:2}),sn=Object(V.a)("div")({fontWeight:"bold"}),un=Object(a.createContext)(),dn=Object(a.memo)(function(e){var t=e.name,n=e.disabled,a=e.Icon,i=e.onClick;return o.a.createElement(ln,{disabled:n,onClick:i},o.a.createElement("div",null,o.a.createElement(a,null),o.a.createElement(sn,null,t)))},function(e,t){return e.name===t.name&&e.disabled===t.disabled}),gn=function(e){var t=e.name,n=e.disabled,i=e.Icon,r=Object(a.useContext)(un).onHeaderButtonClick,c=Object(B.a)(function(){return r(t)});return o.a.createElement(dn,{name:t,disabled:n,Icon:i,onClick:c})},mn=n(165),hn=n.n(mn),fn=n(166),pn=n.n(fn),bn=n(260),yn=n.n(bn),vn=n(261),En=n.n(vn),On=n(262),xn=n.n(On),wn=n(171),jn=n.n(wn),In=n(263),Tn=n.n(In),Cn=n(259),Sn=n.n(Cn),Mn={header:{display:"flex",position:"relative",flexDirection:"row",flexShrink:0,zIndex:10,boxShadow:"0px 3px 8px rgba(0,0,0,.1)"},fileInfo:{alignItems:"center",flexGrow:1,"&.videoMode":{flexMode:.1},display:"flex",fontWeight:"bold",color:D.a[800],marginRight:16,fontSize:24,paddingLeft:16}},Nn=n(169),An=n.n(Nn),Ln=n(258);function kn(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw i}}}}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Dn=Object(V.a)("div")({position:"relative",display:"flex",flexGrow:1,minWidth:240,marginLeft:16,marginRight:16}),_n=Object(V.a)("div")({position:"absolute",width:2,marginLeft:-1,height:"100%",backgroundColor:D.a[300],bottom:0}),Rn=Object(V.a)("div")({position:"absolute",userSelect:"none",fontSize:10,color:D.a[600],fontWeight:"bold",bottom:0}),Bn=Object(V.a)("div")({position:"absolute",bottom:"calc(50% + 6px)",fontSize:10,fontWeight:"bold",color:"#fff",display:"grid",placeItems:"center",width:48,marginLeft:-24,borderRadius:2,height:24,backgroundColor:Oe.a[500],userSelect:"none",fontVariantNumeric:"tabular-nums","&::before":{position:"absolute",bottom:-6,left:16,content:'""',width:0,height:0,borderTop:"8px solid ".concat(Oe.a[500]),borderLeft:"8px solid transparent",borderRight:"8px solid transparent"}}),Wn=Object(V.a)("div")((tn={position:"absolute",bottom:8,cursor:"pointer",opacity:.75,fontSize:10,fontWeight:"bold",color:"#fff",display:"grid",placeItems:"center",width:16,marginLeft:0,borderTopLeftRadius:2,borderTopRightRadius:2,height:12},Object(S.a)(tn,"marginLeft",-8),Object(S.a)(tn,"backgroundColor",Et.a[500]),Object(S.a)(tn,"userSelect","none"),Object(S.a)(tn,"fontVariantNumeric","tabular-nums"),Object(S.a)(tn,"&::before",{position:"absolute",bottom:-8,left:0,content:'""',width:0,height:0,borderTop:"8px solid ".concat(Et.a[500]),borderLeft:"8px solid transparent",borderRight:"8px solid transparent"}),tn)),zn=[[50,250],[100,500],[250,1e3],[1e3,5e3],[5e3,3e4],[1e4,6e4],[3e4,12e4],[6e4,3e5],[3e5,18e5],[6e5,36e5],[18e5,108e5],[36e5,18e6]],Gn=function(e){var t=e.currentTime,n=void 0===t?0:t,i=e.duration,r=e.onChangeCurrentTime,c=e.keyframes,l=Object(Ln.a)(),s=Object(m.a)(l,2),u=s[0],d=s[1],g=Object(a.useState)(n),h=Object(m.a)(g,2),f=h[0],p=h[1],b=Object(ct.a)(!1),y=Object(m.a)(b,2),v=y[0],E=y[1],O=Object.keys(c||{}).map(function(e){return parseInt(e)}).filter(function(e){return!isNaN(e)}).sort(function(e,t){return e-t});Object(a.useEffect)(function(){n!==f&&p(n)},[n]);var x=Object(a.useMemo)(function(){return function(e){var t,n=kn(zn);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Object(m.a)(a,2),i=o[0],r=o[1];if(e/r<6&&e/r>2)return[i,r]}}catch(c){n.e(c)}finally{n.f()}return[e/4,e]}(i)},[i]),w=Object(m.a)(x,2),j=w[0],I=w[1],T=Object(B.a)(function(e){if(v){var t=(e.clientX-d.left)/d.width;p(Math.min(i,Math.max(0,Math.floor(t*i))))}}),C=Object(B.a)(function(e){E(!1);var t=(e.clientX-d.left)/d.width,n=Math.min(i,Math.max(0,Math.floor(t*i)));p(n),r(n)});return i?o.a.createElement(Dn,{onMouseMove:T,onMouseUp:C,ref:u},An()(0,i,I).map(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_n,{key:e,style:{left:e/i*d.width,height:"50%"}}),o.a.createElement(Rn,{style:{left:e/i*d.width+8,bottom:"calc(50% - 12px)"}},Je(e)))}),An()(0,i,j).filter(function(e){return!Number.isInteger(e/I)}).map(function(e){return o.a.createElement(_n,{key:e,style:{left:e/i*d.width,height:"25%"}})}),O.map(function(e){return o.a.createElement(Wn,{onClick:function(){return r(e)},key:e,style:{left:e/i*d.width}})}),o.a.createElement(Bn,{onMouseDown:function(e){return E(!0)},style:{cursor:v?"grabbing":"grab",left:f/i*d.width}},Je(f))):null},Hn=Object(c.a)(Mn),Vn=function(e){var t=e.onHeaderButtonClick,n=e.title,a=e.inFullScreen,i=e.videoMode,r=(e.isAVideoFrame,e.nextVideoFrameHasRegions),c=void 0!==r&&r,l=e.videoDuration,s=e.currentVideoTime,u=e.multipleImages,d=e.videoPlaying,g=e.onChangeCurrentTime,m=e.keyframes,h=e.alwaysShowPrevButton,f=e.alwaysShowNextButton,p=Hn();return o.a.createElement("div",{className:p.header},o.a.createElement("div",{className:R()(p.fileInfo,i&&"videoMode")},n),i&&o.a.createElement(Gn,{key:"keyframeTimeline",currentTime:s,duration:l,onChangeCurrentTime:g,keyframes:m}),o.a.createElement("div",{className:p.headerActions},o.a.createElement(un.Provider,{value:{onHeaderButtonClick:t}},(u||h)&&o.a.createElement(gn,{name:"Prev",Icon:hn.a}),(u||f)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(gn,{name:"Next",Icon:pn.a}),o.a.createElement(gn,{name:"Clone",disabled:c,Icon:Sn.a})),i&&o.a.createElement(o.a.Fragment,null,d?o.a.createElement(gn,{key:"pause",name:"Pause",Icon:En.a}):o.a.createElement(gn,{key:"play",name:"Play",Icon:yn.a})),o.a.createElement(gn,{name:"Settings",Icon:xn.a}),a?o.a.createElement(gn,{name:"Window",Icon:jn.a}):o.a.createElement(gn,{name:"Fullscreen",Icon:jn.a}),o.a.createElement(gn,{name:"Save",Icon:Tn.a}))))},Fn=n(53),Un=n(54),Yn=n(972),Kn=Object(a.createContext)(),Xn=Object(a.memo)(function(e){var t=e.id,n=e.name,i=e.icon,r=e.selected,c=e.togglable,l=e.alwaysShowing,s=void 0!==l&&l,u=Object(a.useContext)(Kn),d=u.enabledTools,g=u.selectedTool,m=u.onClickTool;return d.includes(t)||s?(r=r||g===t,o.a.createElement(Yn.a,{placement:"right",title:n},o.a.createElement("div",null,o.a.createElement(k.a,{disabled:c?void 0:r,"aria-label":n,onClick:function(){return m(t)},size:"small",style:{width:50,height:50,margin:1,color:r?Oe.a[500]:void 0}},i)))):null},function(e,t){return e.togglable===t.togglable&&e.selected===t.selected&&e.name===t.name&&e.id===t.id}),Jn=Object(c.a)({iconTools:{display:"flex",padding:4,flexDirection:"column",zIndex:9,boxShadow:"0px 0px 5px rgba(0,0,0,0.1)",borderRight:"1px solid ".concat(D.a[300]),backgroundColor:D.a[100]},grow:{flexGrow:1}}),Zn=["select","create-point","create-box","create-polygon","create-expanding-line"],qn=function(e){var t=e.showTags,n=e.showMask,i=e.selectedTool,r=e.onClickTool,c=e.enabledTools,l=void 0===c?Zn:c,s=Jn(),u=Object(a.useMemo)(function(){return{enabledTools:l,selectedTool:i,onClickTool:r}},[l,i]);return o.a.createElement("div",{className:s.iconTools},o.a.createElement(Kn.Provider,{value:u},o.a.createElement(Xn,{id:"select",name:"Select Region",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.f})}),o.a.createElement(Xn,{alwaysShowing:!0,id:"pan",name:"Drag/Pan",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.d})}),o.a.createElement(Xn,{alwaysShowing:!0,id:"zoom",name:"Zoom In/Out",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.g})}),o.a.createElement(Xn,{alwaysShowing:!0,togglable:!0,id:"show-tags",selected:t,name:"Show Tags",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.h})}),o.a.createElement(Xn,{id:"create-point",name:"Add Point",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.a})}),o.a.createElement(Xn,{id:"create-box",name:"Add Bounding Box",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.i})}),o.a.createElement(Xn,{id:"create-polygon",name:"Add Polygon",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.b})}),o.a.createElement(Xn,{id:"create-expanding-line",name:"Add Expanding Line",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.c})}),o.a.createElement(Xn,{togglable:!0,selected:n,id:"show-mask",name:"Show / Hide Mask",icon:o.a.createElement(Fn.a,{size:"xs",fixedWidth:!0,icon:Un.e})})))},Qn={container:{display:"flex",flexGrow:1,flexDirection:"column",height:"100%",maxHeight:"100vh",backgroundColor:"#fff",overflow:"hidden","&.fullscreen":{position:"absolute",zIndex:99999,left:0,right:0,top:0,bottom:0}},workspace:{backgroundColor:D.a[200],flexGrow:1,display:"flex",flexDirection:"row",height:"100%",overflow:"hidden"},iconToolsContainer:{display:"flex"},imageCanvasContainer:{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"center"},noImageSelected:{fontWeight:"bold",fontSize:32,color:D.a[500]},sidebarContainer:{width:300,flexShrink:0,overflowY:"auto",backgroundColor:D.a[100],borderLeft:"1px solid ".concat(D.a[300]),zIndex:9,height:"100%",boxShadow:"0px 0px 5px rgba(0,0,0,0.1)"}},$n=n(265),ea=n.n($n),ta=n(266),na=n.n(ta),aa=function(e){var t=e.open,n=e.onClose,a=Kt();return o.a.createElement(b.a,{open:t||!1,onClose:n},o.a.createElement(y.a,null,"Settings"),o.a.createElement(v.a,{style:{minWidth:400}},o.a.createElement(na.a,{variant:"flat",noActions:!0,defaultAnswers:a,onQuestionChange:function(e,t,n){return a.changeSetting(e,t)},form:{questions:[{type:"boolean",title:"Show Crosshairs",name:"showCrosshairs"},{type:"boolean",title:"Show Highlight Box",name:"showHighlightBox"},{type:"boolean",title:"WASD Mode",name:"wasdMode"},{type:"dropdown",title:"Video Playback Speed",name:"videoPlaybackSpeed",defaultValue:"1x",choices:["0.25x","0.5x","1x","2x"]}]}})),o.a.createElement(E.a,null,o.a.createElement(h.a,{onClick:n},"Close")))},oa=n(271),ia=n.n(oa),ra=function(e){return e.enabled?o.a.createElement(ia.a,e,e.children):e.children},ca=function(e){var t,n,a=null;return"image"===e.annotationType?-1===(a=e.images.findIndex(function(t){return t.src===e.selectedImage&&(void 0===e.selectedImageFrameTime||t.frameTime===e.selectedImageFrameTime)}))?(a=null,n=null):(t=["images",a],n=Object(Ve.getIn)(e,t)):"video"===e.annotationType&&(t=["keyframes",e.currentVideoTime||0],n=Object(Ve.getIn)(e,t)||null),{currentImageIndex:a,pathToActiveImage:t,activeImage:n}};function la(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sa(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw i}}}}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}for(var ua=[],da=function(e,t){if(e[t||0])return e[t||0].regions;var n=Object.keys(e).map(function(e){return parseInt(e)}).filter(function(e){return!isNaN(e)});if(0===n.length)return ua;n.sort(function(e,t){return e-t});var a=n.findIndex(function(e){return e>=t});if(-1===a)return e[n[n.length-1]].regions||ua;if(0===a)return ua;var o,i=n[a-1],r=e[i],c=n[a],l=e[c],s={},u={},d=la(r.regions);try{for(d.s();!(o=d.n()).done;){var g=o.value;s[g.id]=g}}catch(O){d.e(O)}finally{d.f()}var m,h=la(l.regions);try{for(h.s();!(m=h.n()).done;){var f=m.value;u[f.id]=f}}catch(O){h.e(O)}finally{h.f()}var p=[],b=(c-t)/(c-i),y=1-b,v=function(e){var t=[s[e],u[e]],n=t[0],a=t[1];if(!a)return p.push(Object(C.a)({},n,{highlighted:!1,editingLabels:!1})),"continue";switch(n.type){case"point":p.push(Object(C.a)({},n,{highlighted:!1,editingLabels:!1,x:n.x*b+a.x*y,y:n.y*b+a.y*y}));break;case"box":p.push(Object(C.a)({},n,{highlighted:!1,editingLabels:!1,x:n.x*b+a.x*y,y:n.y*b+a.y*y,w:n.w*b+a.w*y,h:n.h*b+a.h*y}));break;case"polygon":a.points.length===n.points.length?p.push(Object(C.a)({},n,{highlighted:!1,editingLabels:!1,points:n.points.map(function(e,t){return[e[0]*b+a.points[t][0]*y,e[1]*b+a.points[t][1]*y]})})):p.push(n)}};for(var E in s)v(E);return p},ga=[],ma=n(135),ha={},fa=0,pa=[{id:"select_tool",description:"Switch to the Select Tool",binding:"escape"},{id:"zoom_tool",description:"Select the Zoom Tool",binding:"z"},{id:"create_point",description:"Create a point"},{id:"create_bounding_box",description:"Create a bounding box",binding:"b"},{id:"pan_tool",description:"Select the Pan Tool",binding:"m"},{id:"create_polygon",description:"Create a Polygon",binding:"p"},{id:"create_pixel",description:"Create a Pixel Mask"},{id:"save_and_previous_sample",description:"Save and go to previous sample",binding:"ArrowLeft"},{id:"save_and_next_sample",description:"Save and go to next sample",binding:"ArrowRight"},{id:"save_and_exit_sample",description:"Save and exit current sample"},{id:"exit_sample",description:"Exit sample without saving"}];fa<pa.length;fa++){var ba=pa[fa],ya=ba.id,va=ba.binding;ha[ya]=va}var Ea=function(e){var t=e.dispatch;return Object(a.useMemo)(function(){return{select_tool:function(){t({type:"SELECT_TOOL",selectedTool:"select"})},zoom_tool:function(){t({type:"SELECT_TOOL",selectedTool:"zoom"})},create_point:function(){t({type:"SELECT_TOOL",selectedTool:"create-point"})},create_bounding_box:function(){t({type:"SELECT_TOOL",selectedTool:"create-box"})},pan_tool:function(){t({type:"SELECT_TOOL",selectedTool:"pan"})},create_polygon:function(){t({type:"SELECT_TOOL",selectedTool:"create-polygon"})},create_pixel:function(){t({type:"SELECT_TOOL",selectedTool:"create-pixel"})},save_and_previous_sample:function(){t({type:"HEADER_BUTTON_CLICKED",buttonName:"Prev"})},save_and_next_sample:function(){t({type:"HEADER_BUTTON_CLICKED",buttonName:"Next"})},save_and_exit_sample:function(){t({type:"HEADER_BUTTON_CLICKED",buttonName:"Save"})}}},[t])},Oa=Object(c.a)(Qn),xa=Object(ma.withHotKeys)(function(e){var t=e.hotKeys,n=e.children,a=e.divRef,i=Object(M.a)(e,["hotKeys","children","divRef"]);return o.a.createElement("div",Object.assign({},Object(C.a)({},t,i),{ref:a}),n)}),wa=function(e){var t,n,i=e.state,r=e.dispatch,c=e.alwaysShowNextButton,l=void 0!==c&&c,s=e.alwaysShowPrevButton,u=void 0!==s&&s,d=e.RegionEditLabel,g=Oa(),m=Kt(),h=Object(a.useRef)({}),f=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o="".concat(e,"(").concat(n.join(","),")");if(h.current[o])return h.current[o];var i=function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n.length>0?r(Object(C.a)({type:e},n.reduce(function(e,t,n){return e[t]=a[n],e},{}))):r(Object(C.a)({type:e},a[0]))};return h.current[o]=i,i},p=ca(i),b=p.currentImageIndex,y=p.activeImage;null!==b&&(n=i.images[b+1]),ea()(function(){return r({type:"CANCEL"})},{detectKeys:[27]});var v=y&&void 0!==y.frameTime,E=Object(a.useRef)(),O=Ea({dispatch:r}),x=function(e){if("video"!==e.annotationType)return ga;var t=e.keyframes,n=e.currentVideoTime,o=void 0===n?0:n;return Object(a.useMemo)(function(){return da(t,o)},[t,o])}(i),w=Object(a.useCallback)(function(e){E.current&&(E.current.contains(document.activeElement)||E.current.contains(e.target)&&(E.current.focus(),e.target.focus()))},[]);return o.a.createElement(ra,{enabled:i.fullScreen,onChange:function(e){e||f("HEADER_BUTTON_CLICKED","buttonName")("Exit Fullscreen")}},o.a.createElement(xa,{tabIndex:-1,divRef:E,onMouseDown:w,onMouseOver:w,allowChanges:!0,handlers:O,className:R()(g.container,i.fullScreen&&"Fullscreen")},o.a.createElement("div",{className:g.headerContainer},o.a.createElement(Vn,{onHeaderButtonClick:f("HEADER_BUTTON_CLICKED","buttonName"),videoMode:"video"===i.annotationType,alwaysShowNextButton:l,alwaysShowPrevButton:u,inFullScreen:i.fullScreen,isAVideoFrame:v,nextVideoFrameHasRegions:!n||n.regions&&n.regions.length>0,videoDuration:i.videoDuration,multipleImages:i.images&&i.images.length>1,title:"image"===i.annotationType?y?y.name:"No Image Selected":i.videoName||"",onChangeCurrentTime:f("CHANGE_VIDEO_TIME","newTime"),videoPlaying:i.videoPlaying,currentVideoTime:i.currentVideoTime,keyframes:i.keyframes})),o.a.createElement("div",{className:g.workspace},o.a.createElement("div",{className:g.iconToolsContainer},o.a.createElement(qn,{enabledTools:i.enabledTools,showTags:i.showTags,showMask:i.showMask,selectedTool:i.selectedTool,onClickTool:f("SELECT_TOOL","selectedTool")})),o.a.createElement("div",{className:g.imageCanvasContainer},"image"!==i.annotationType||i.selectedImage?o.a.createElement("div",{style:{height:"100%",width:"100%"}},o.a.createElement(cn,Object.assign({},m,(t={key:i.selectedImage,showMask:i.showMask,fullImageSegmentationMode:i.fullImageSegmentationMode,showTags:i.showTags,allowedArea:i.allowedArea,regionClsList:i.regionClsList,regionTagList:i.regionTagList,regions:"image"===i.annotationType?y.regions||[]:x,realSize:y?y.realSize:void 0,videoPlaying:i.videoPlaying,imageSrc:"image"===i.annotationType?i.selectedImage:null,videoSrc:"video"===i.annotationType?i.videoSrc:null,pointDistancePrecision:i.pointDistancePrecision,createWithPrimary:i.selectedTool.includes("create"),dragWithPrimary:"pan"===i.selectedTool,zoomWithPrimary:"zoom"===i.selectedTool,showPointDistances:i.showPointDistances},Object(S.a)(t,"pointDistancePrecision",i.pointDistancePrecision),Object(S.a)(t,"videoTime","image"===i.annotationType?i.selectedImageFrameTime:i.currentVideoTime),Object(S.a)(t,"onMouseMove",f("MOUSE_MOVE")),Object(S.a)(t,"onMouseDown",f("MOUSE_DOWN")),Object(S.a)(t,"onMouseUp",f("MOUSE_UP")),Object(S.a)(t,"onChangeRegion",f("CHANGE_REGION","region")),Object(S.a)(t,"onBeginRegionEdit",f("OPEN_REGION_EDITOR","region")),Object(S.a)(t,"onCloseRegionEdit",f("CLOSE_REGION_EDITOR","region")),Object(S.a)(t,"onDeleteRegion",f("DELETE_REGION","region")),Object(S.a)(t,"onBeginBoxTransform",f("BEGIN_BOX_TRANSFORM","box","directions")),Object(S.a)(t,"onBeginMovePolygonPoint",f("BEGIN_MOVE_POLYGON_POINT","polygon","pointIndex")),Object(S.a)(t,"onAddPolygonPoint",f("ADD_POLYGON_POINT","polygon","point","pointIndex")),Object(S.a)(t,"onSelectRegion",f("SELECT_REGION","region")),Object(S.a)(t,"onBeginMovePoint",f("BEGIN_MOVE_POINT","point")),Object(S.a)(t,"onImageLoaded",f("IMAGE_LOADED","image")),Object(S.a)(t,"RegionEditLabel",d),Object(S.a)(t,"onImageOrVideoLoaded",f("IMAGE_OR_VIDEO_LOADED","metadata")),Object(S.a)(t,"onChangeVideoTime",f("CHANGE_VIDEO_TIME","newTime")),Object(S.a)(t,"onChangeVideoPlaying",f("CHANGE_VIDEO_PLAYING","isPlaying")),t)))):o.a.createElement("div",{className:g.noImageSelected},"No Image Selected")),o.a.createElement("div",{className:g.sidebarContainer},o.a.createElement(et,{debug:window.localStorage.$ANNOTATE_DEBUG_MODE&&i,taskDescription:i.taskDescription,images:i.images,regions:y?y.regions:null,history:i.history,currentImage:y,labelImages:i.labelImages,imageClsList:i.imageClsList,imageTagList:i.imageTagList,keyframes:i.keyframes,currentVideoTime:i.currentVideoTime,onChangeImage:f("CHANGE_IMAGE","delta"),onSelectRegion:f("SELECT_REGION","region"),onDeleteRegion:f("DELETE_REGION","region"),onSelectImage:f("SELECT_IMAGE","image"),onChangeRegion:f("CHANGE_REGION","region"),onRestoreHistory:f("RESTORE_HISTORY"),onChangeVideoTime:f("CHANGE_VIDEO_TIME","newTime"),onDeleteKeyframe:f("DELETE_KEYFRAME","time"),onShortcutActionDispatched:r}))),o.a.createElement(aa,{open:i.settingsOpen,onClose:function(){return r({type:"HEADER_BUTTON_CLICKED",buttonName:"Settings"})}})))};function ja(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ia(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw i}}}}function Ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ta={BEGIN_BOX_TRANSFORM:"Transform/Move Box",BEGIN_MOVE_POINT:"Move Point",DELETE_REGION:"Delete Region"},Ca=function(e,t){return Object(Ve.updateIn)(e,["history"],function(n){return[{time:Re()().toDate(),state:Object(Ve.without)(e,"history"),name:t}].concat((n||[]).slice(0,9))})};function Sa(e,t,n){return e<=t?t:e>=n?n:e}var Ma=function(e){var t=e.expandingWidth||.005,n=e.points.map(function(n,a){var o=n.x,i=n.y,r=n.angle,c=n.width;if(!r){var l=e.points[Sa(a+1,0,e.points.length-1)],s=e.points[Sa(a-1,0,e.points.length-1)];r=Math.atan2(s.x-l.x,s.y-l.y)+Math.PI/2}var u=Math.sin(r)*(c||t)/2,d=Math.cos(r)*(c||t)/2;return[{x:o+u,y:i+d},{x:o-u,y:i-d}]}),a=n.map(function(e){var t=Object(m.a)(e,2),n=t[0];t[1];return n}),o=n.map(function(e){var t=Object(m.a)(e,2);t[0];return t[1]}).asMutable();o.reverse();var i=a.concat(o).map(function(e){return[e.x,e.y]});return Object(C.a)({},e,{type:"polygon",open:!1,points:i,unfinished:void 0,candidatePoint:void 0})},Na=function(){return Math.random().toString().split(".")[1]},Aa=function(e,t){if("MOUSE_MOVE"===t.type){if(Date.now()-(e.lastMouseMoveCall||0)<16)return e;e=Object(Ve.setIn)(e,["lastMouseMoveCall"],Date.now())}t.type.includes("MOUSE")||(e=Object(Ve.setIn)(e,["lastAction"],t));var n=ca(e),a=n.currentImageIndex,o=n.pathToActiveImage,i=n.activeImage,r=function(e){var t="string"===typeof e?e:e.id;if(!i)return null;var n=(i.regions||[]).findIndex(function(e){return e.id===t});return-1===n?null:n},c=function(e){if(!i)return null;var t=r(e);return null===t?[null,null]:[i.regions[t],t]},l=function(t,n){var a=c(t),r=Object(m.a)(a,2),l=r[0],s=r[1];if(!l)return e;if(null!==n)return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",s]),Object(C.a)({},l,n));var u=i.regions;return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions"]),(u||[]).filter(function(e){return e.id!==l.id}))},s=function(e){return null===a?e:Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions"]),(i.regions||[]).map(function(e){return Object(C.a)({},e,{editingLabels:!1})}))},u=function(t){var n="object"===typeof t?t:{src:t},a=n.src,o=n.frameTime;return Object(Ve.setIn)(Object(Ve.setIn)(e,["selectedImage"],a),["selectedImageFrameTime"],o)};switch(t.type){case"@@INIT":return e;case"SELECT_IMAGE":return u(t.image);case"CHANGE_REGION":var d=r(t.region);if(null===d)return e;var g=i.regions[d];if(g.cls!==t.region.cls){var h=(e=Ca(e,"Change Region Classification")).regionClsList.indexOf(t.region.cls);-1!==h&&(t.region.color=kt[h%kt.length])}return ee()(g.tags,t.region.tags)||(e=Ca(e,"Change Region Tags")),Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",d]),t.region);case"CHANGE_IMAGE":if(!i)return e;for(var f=t.delta,p=0,b=Object.keys(f);p<b.length;p++){var y=b[p];"cls"===y&&Ca(e,"Change Image Class"),"tags"===y&&Ca(e,"Change Image Tags"),e=Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),[y]),f[y])}return e;case"SELECT_REGION":var v=t.region;if(null===r(t.region))return e;var E=Object(tt.a)(i.regions||[]).map(function(e){return Object(C.a)({},e,{highlighted:e.id===v.id,editingLabels:e.id===v.id})});return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions"]),E);case"BEGIN_MOVE_POINT":return e=s(e),Object(Ve.setIn)(e,["mode"],{mode:"MOVE_REGION",regionId:t.point.id});case"BEGIN_BOX_TRANSFORM":var O=t.box,x=t.directions;return e=s(e),0===x[0]&&0===x[1]?Object(Ve.setIn)(e,["mode"],{mode:"MOVE_REGION",regionId:O.id}):Object(Ve.setIn)(e,["mode"],{mode:"RESIZE_BOX",regionId:O.id,freedom:x,original:{x:O.x,y:O.y,w:O.w,h:O.h}});case"BEGIN_MOVE_POLYGON_POINT":var w=t.polygon,j=t.pointIndex;return(e=s(e)).mode&&"DRAW_POLYGON"===e.mode.mode&&0===j?Object(Ve.setIn)(l(w,{points:w.points.slice(0,-1),open:!1}),["mode"],null):(e=Ca(e,"Move Polygon Point"),Object(Ve.setIn)(e,["mode"],{mode:"MOVE_POLYGON_POINT",regionId:w.id,pointIndex:j}));case"ADD_POLYGON_POINT":var I=t.polygon,T=t.point,S=t.pointIndex,M=r(I);if(null===M)return e;var N=Object(tt.a)(I.points);return N.splice(S,0,T),Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",M]),Object(C.a)({},I,{points:N}));case"MOUSE_MOVE":var A=t.x,L=t.y;if(!e.mode)return e;if(!i)return e;e.mouseDownAt;switch(e.mode.mode){case"MOVE_POLYGON_POINT":var k=e.mode,P=k.pointIndex,D=k.regionId,_=r(D);return null===_?e:Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",_,"points",P]),[A,L]);case"MOVE_REGION":var R=e.mode.regionId,B=r(R);return null===B?e:Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",B]),function(e,t,n){switch(e.type){case"point":return Object(C.a)({},e,{x:t,y:n});case"box":return Object(C.a)({},e,{x:t-e.w/2,y:n-e.h/2})}return e}(i.regions[B],A,L));case"RESIZE_BOX":var W=e.mode,z=W.regionId,G=Object(m.a)(W.freedom,2),H=G[0],V=G[1],F=W.original,U=F.x,Y=F.y,K=F.w,X=F.h,J=r(z);if(null===J)return e;var Z=i.regions[J],q=0===H?U:-1===H?Math.min(U+K,A):U,Q=0===H?K:-1===H?K+(U-q):Math.max(0,K+(A-U-K)),$=0===V?Y:-1===V?Math.min(Y+X,L):Y,te=0===V?X:-1===V?X+(Y-$):Math.max(0,X+(L-Y-X));return Q<=.001&&(e=Object(Ve.setIn)(e,["mode","freedom"],[-1*H,V])),te<=.001&&(e=Object(Ve.setIn)(e,["mode","freedom"],[H,-1*V])),Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",J]),Object(C.a)({},Z,{x:q,w:Q,y:$,h:te}));case"DRAW_POLYGON":var ne=e.mode.regionId,ae=c(ne),oe=Object(m.a)(ae,2),ie=oe[0],re=oe[1];return ie?Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",re,"points",ie.points.length-1]),[A,L]):Object(Ve.setIn)(e,["mode"],null);case"DRAW_EXPANDING_LINE":var ce=e.mode.regionId,le=c(ce),se=Object(m.a)(le,2),ue=se[0],de=se[1];if(!ue)return e;if(Boolean(e.mouseDownAt)){var ge=ue.points.slice(-1)[0],me=Math.sqrt(Math.pow(ge.x-A,2)+Math.pow(ge.y-L,2));return me<.002&&!ge.width?e:Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",de,"points"]),ue.points.slice(0,-1).concat([Object(C.a)({},ge,{width:2*me,angle:Math.atan2(ge.x-A,ge.y-L)})]))}return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",de]),Object(C.a)({},ue,{candidatePoint:{x:A,y:L}}));case"SET_EXPANDING_LINE_WIDTH":var he=e.mode.regionId,fe=c(he),pe=Object(m.a)(fe,2),be=pe[0],ye=pe[1];if(!be)return e;var ve=be.points.slice(-1)[0];e.mouseDownAt;return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",ye,"expandingWidth"]),Math.sqrt(Math.pow(ve.x-A,2)+Math.pow(ve.y-L,2)));default:return e}case"MOUSE_DOWN":if(!i)return e;var Ee,Oe=t.x,xe=t.y;if((e=Object(Ve.setIn)(e,["mouseDownAt"],{x:Oe,y:xe})).allowedArea){var we=e.allowedArea;if(Oe<we.x||Oe>we.x+we.w||xe<we.y||xe>we.y+we.h)return e}if(e.mode)switch(e.mode.mode){case"DRAW_POLYGON":var je=c(e.mode.regionId),Ie=Object(m.a)(je,2),Te=Ie[0],Ce=Ie[1];if(!Te)break;return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",Ce]),Object(C.a)({},Te,{points:Te.points.concat([[Oe,xe]])}));case"DRAW_EXPANDING_LINE":var Se=c(e.mode.regionId),Me=Object(m.a)(Se,2),Ne=Me[0],Ae=Me[1];if(!Ne)break;var Le=Ne.points.slice(-1)[0];return Ne.points.length>1&&Math.sqrt(Math.pow(Le.x-Oe,2)+Math.pow(Le.y-xe,2))<.002?Le.width?e.setIn([].concat(Object(tt.a)(o),["regions",Ae]),Ma(Ne)).setIn(["mode"],null):Object(Ve.setIn)(e,["mode"],{mode:"SET_EXPANDING_LINE_WIDTH",regionId:e.mode.regionId}):Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",Ae,"points"]),Ne.points.concat([{x:Oe,y:xe,angle:null,width:null}]));case"SET_EXPANDING_LINE_WIDTH":var ke=c(e.mode.regionId),Pe=Object(m.a)(ke,2),De=Pe[0],_e=Pe[1];if(!De)break;var Re=De.expandingWidth;return e.setIn([].concat(Object(tt.a)(o),["regions",_e]),Ma(Object(C.a)({},De,{points:De.points.map(function(e){return e.width?e:Object(C.a)({},e,{width:Re})}),expandingWidth:void 0}))).setIn(["mode"],null)}var Be=void 0,We="#ff0000";if(i&&(i.regions||[]).length>0){Be=i.regions.slice(-1)[0].cls;var ze=(e.regionClsList||[]).indexOf(Be);-1!==ze&&(We=kt[ze%kt.length])}switch(e.selectedTool){case"create-point":e=Ca(e,"Create Point"),Ee={type:"point",x:Oe,y:xe,highlighted:!0,editingLabels:!0,color:We,id:Na(),cls:Be};break;case"create-box":e=Ca(e,"Create Box"),Ee={type:"box",x:Oe,y:xe,w:.01,h:.01,highlighted:!0,editingLabels:!1,color:We,cls:Be,id:Na()},e=Object(Ve.setIn)(e,["mode"],{mode:"RESIZE_BOX",editLabelEditorAfter:!0,regionId:Ee.id,freedom:[1,1],original:{x:Oe,y:xe,w:Ee.w,h:Ee.h},isNew:!0});break;case"create-polygon":if(e.mode&&"DRAW_POLYGON"===e.mode.mode)break;e=Ca(e,"Create Polygon"),Ee={type:"polygon",points:[[Oe,xe],[Oe,xe]],open:!0,highlighted:!0,color:We,cls:Be,id:Na()},e=Object(Ve.setIn)(e,["mode"],{mode:"DRAW_POLYGON",regionId:Ee.id});break;case"create-expanding-line":e=Ca(e,"Create Expanding Line"),Ee={type:"expanding-line",unfinished:!0,points:[{x:Oe,y:xe,angle:null,width:null}],open:!0,highlighted:!0,color:We,cls:Be,id:Na()},e=Object(Ve.setIn)(e,["mode"],{mode:"DRAW_EXPANDING_LINE",regionId:Ee.id})}var Ge=Object(tt.a)(Object(Ve.getIn)(e,o).regions||[]).map(function(e){return Object(Ve.setIn)(e,["editingLabels"],!1).setIn(["highlighted"],!1)}).concat(Ee?[Ee]:[]);return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions"]),Ge);case"MOUSE_UP":var He=t.x,Fe=t.y,Ue=e.mouseDownAt,Ye=void 0===Ue?{x:He,y:Fe}:Ue;if(!e.mode)return e;switch((e=Object(Ve.setIn)(e,["mouseDownAt"],null)).mode.mode){case"RESIZE_BOX":if(e.mode.isNew&&Math.abs(e.mode.original.x-He)<.002&&Math.abs(e.mode.original.y-Fe)<.002)return Object(Ve.setIn)(l(e.mode.regionId,null),["mode"],null);if(e.mode.editLabelEditorAfter)return Object(C.a)({},l(e.mode.regionId,{editingLabels:!0}),{mode:null});case"MOVE_REGION":case"MOVE_POLYGON_POINT":return Object(C.a)({},e,{mode:null});case"CREATE_POINT_LINE":return e;case"DRAW_EXPANDING_LINE":var Ke=c(e.mode.regionId),Xe=Object(m.a)(Ke,2),Je=Xe[0],Ze=Xe[1];if(!Je)return e;var qe=Je,Qe=0!==Je.points.length?Je.points.slice(-1)[0]:Ye;if(Je.points.length>1?Je.points.slice(-2)[0]:Qe,!(Math.sqrt(Math.pow(Qe.x-He,2)+Math.pow(Qe.y-Fe,2))>.002))return e;for(var $e=Object(tt.a)(Je.points),et=0;et<$e.length-1;et++)$e[et].width||($e[et]=Object(C.a)({},$e[et],{width:Qe.width}));return qe=Object(Ve.setIn)(Je,["points"],$e),Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",Ze]),qe);default:return e}case"OPEN_REGION_EDITOR":t.region;var nt=r(t.region);if(null===nt)return e;var at=Object(Ve.setIn)(i.regions.map(function(e){return Object(C.a)({},e,{highlighted:!1,editingLabels:!1})}),[nt],Object(C.a)({},(i.regions||[])[nt],{highlighted:!0,editingLabels:!0}));return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions"]),at);case"CLOSE_REGION_EDITOR":t.region;var ot=r(t.region);return null===ot?e:Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions",ot]),Object(C.a)({},(i.regions||[])[ot],{editingLabels:!1}));case"DELETE_REGION":return null===r(t.region)?e:Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions"]),(i.regions||[]).filter(function(e){return e.id!==t.region.id}));case"HEADER_BUTTON_CLICKED":switch(t.buttonName.toLowerCase()){case"prev":return null===a?e:0===a?e:u(e.images[a-1]);case"next":return null===a?e:a===e.images.length-1?e:u(e.images[a+1]);case"clone":return null===a?e:a===e.images.length-1?e:Object(Ve.setIn)(u(e.images[a+1]),["images",a+1,"regions"],i.regions);case"settings":return Object(Ve.setIn)(e,["settingsOpen"],!e.settingsOpen);case"help":return e;case"fullscreen":return Object(Ve.setIn)(e,["fullScreen"],!0);case"exit fullscreen":case"window":return Object(Ve.setIn)(e,["fullScreen"],!1);case"hotkeys":return e;case"exit":case"done":default:return e}case"SELECT_TOOL":return"show-tags"===t.selectedTool?Object(Ve.setIn)(e,["showTags"],!e.showTags):"show-mask"===t.selectedTool?Object(Ve.setIn)(e,["showMask"],!e.showMask):(e=Object(Ve.setIn)(e,["mode"],null),Object(Ve.setIn)(e,["selectedTool"],t.selectedTool));case"CANCEL":var it=e.mode;if(it)switch(it.mode){case"DRAW_EXPANDING_LINE":case"SET_EXPANDING_LINE_WIDTH":case"DRAW_POLYGON":return l(it.regionId,null);case"MOVE_POLYGON_POINT":case"RESIZE_BOX":case"MOVE_REGION":return Object(Ve.setIn)(e,["mode"],null);default:return e}var rt=i.regions;if(rt&&rt.some(function(e){return e.editingLabels}))return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions"]),rt.map(function(e){return Object(C.a)({},e,{editingLabels:!1})}));if(rt)return Object(Ve.setIn)(e,[].concat(Object(tt.a)(o),["regions"]),rt.map(function(e){return Object(C.a)({},e,{highlighted:!1})}))}return e},La=function(e,t){var n=ca(e),a=n.currentImageIndex;n.pathToActiveImage,n.activeImage;switch(t.type){case"IMAGE_OR_VIDEO_LOADED":return Object(Ve.setIn)(e,["images",a,"pixelSize"],{w:t.metadata.naturalWidth,h:t.metadata.naturalHeight})}return e},ka=function(e,t){var n=function(){return Object(Ve.setIn)(Ca(e,"Add Keyframe"),["keyframes",e.currentVideoTime],{regions:da(e.keyframes,e.currentVideoTime)})};switch(t.type){case"IMAGE_OR_VIDEO_LOADED":var a=t.metadata.duration;if("number"===typeof a)return Object(Ve.setIn)(e,["videoDuration"],1e3*a);case"HEADER_BUTTON_CLICKED":switch(t.buttonName.toLowerCase()){case"play":return Object(Ve.setIn)(e,["videoPlaying"],!0);case"pause":return Object(Ve.setIn)(e,["videoPlaying"],!1)}case"CHANGE_VIDEO_TIME":return Object(Ve.setIn)(e,["currentVideoTime"],t.newTime);case"CHANGE_VIDEO_PLAYING":return Object(Ve.setIn)(e,["videoPlaying"],t.isPlaying);case"DELETE_KEYFRAME":return Object(Ve.setIn)(e,["keyframes"],Object(Ve.without)(e.keyframes,t.time))}if(!e.keyframes[e.currentVideoTime])switch(t.type){case"BEGIN_BOX_TRANSFORM":case"BEGIN_MOVE_POINT":case"BEGIN_MOVE_POLYGON_POINT":case"BEGIN_BOX_TRANSFORM":case"BEGIN_MOVE_POLYGON_POINT":case"ADD_POLYGON_POINT":case"SELECT_REGION":case"CHANGE_REGION":case"DELETE_REGION":case"OPEN_REGION_EDITOR":return n();case"MOUSE_DOWN":switch(e.selectedTool){case"create-point":case"create-polygon":case"create-box":return n()}}return e},Pa=function(e){var t=e.images,n=e.allowedArea,i=e.selectedImage,r=void 0===i?t&&t.length>0?t[0].src:void 0:i,c=e.showPointDistances,l=e.pointDistancePrecision,s=e.showTags,u=void 0===s||s,d=e.enabledTools,g=void 0===d?["select","create-point","create-box","create-polygon","create-expanding-line","show-mask"]:d,h=e.selectedTool,f=void 0===h?"select":h,p=e.regionTagList,b=void 0===p?[]:p,y=e.regionClsList,v=void 0===y?[]:y,E=e.imageTagList,O=void 0===E?[]:E,x=e.imageClsList,w=void 0===x?[]:x,j=e.keyframes,I=void 0===j?{}:j,T=e.taskDescription,S=e.fullImageSegmentationMode,M=void 0!==S&&S,N=e.RegionEditLabel,A=e.videoSrc,L=e.videoTime,k=void 0===L?0:L,P=e.videoName,D=e.onExit,_=e.onNextImage,R=e.onPrevImage;if(!t&&!A)return'Missing required prop "images" or "videoSrc"';var W,z=t?"image":"video",G=Object(a.useReducer)((W=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var a,o=ja(t);try{for(o.s();!(a=o.n()).done;)e=(0,a.value)(e,n)}catch(i){o.e(i)}finally{o.f()}return e}}("image"===z?La:ka,Aa),function(e,t){var n=e,a=W(e,t);if("RESTORE_HISTORY"===t.type){if(e.history.length>0)return Object(Ve.setIn)(a.history[0].state,["history"],a.history.slice(1))}else if(n!==a&&Object.keys(Ta).includes(t.type))return Object(Ve.setIn)(a,["history"],[{time:Re()().toDate(),state:Object(Ve.without)(n,"history"),name:Ta[t.type]||t.type}].concat(a.history||[]).slice(0,9));return a}),Fe()(Object(C.a)({annotationType:z,showTags:u,allowedArea:n,showPointDistances:c,pointDistancePrecision:l,selectedTool:f,fullImageSegmentationMode:M,mode:null,taskDescription:T,showMask:!0,labelImages:w.length>0||O.length>0,regionClsList:v,regionTagList:b,imageClsList:w,imageTagList:O,currentVideoTime:k,enabledTools:g,history:[],videoName:P},"image"===z?{selectedImage:r,images:t,selectedImageFrameTime:t&&t.length>0?t[0].frameTime:void 0}:{videoSrc:A,keyframes:I}))),H=Object(m.a)(G,2),V=H[0],F=H[1],U=Object(B.a)(function(e){if("HEADER_BUTTON_CLICKED"===e.type){if(["Exit","Done","Save","Complete"].includes(e.buttonName))return D(Object(Ve.without)(V,"history"));if("Next"===e.buttonName&&_)return _(Object(Ve.without)(V,"history"));if("Prev"===e.buttonName&&R)return R(Object(Ve.without)(V,"history"))}F(e)});return Object(a.useEffect)(function(){r&&F({type:"SELECT_IMAGE",image:V.images.find(function(e){return e.src===r})})},[r]),o.a.createElement(Xt,null,o.a.createElement(wa,{RegionEditLabel:N,alwaysShowNextButton:Boolean(_),alwaysShowPrevButton:Boolean(R),state:V,dispatch:U}))},Da=n(91),_a=n(136),Ra=n(138),Ba=n(137),Wa=n(140),za=function(e){function t(){var e,n;Object(Da.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(Ra.a)(this,(e=Object(Ba.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1,err:""},n}return Object(Wa.a)(t,e),Object(_a.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,err:e.toString()+"\n\n"+t.componentStack})}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(b.a,{open:this.state.hasError,onClose:this.props.onClose},o.a.createElement(y.a,null,"Error Loading Annotator"),o.a.createElement(v.a,null,o.a.createElement("pre",null,this.state.err)),o.a.createElement(E.a,null,o.a.createElement(h.a,{onClick:this.props.onClose},"Close"))):this.props.children}}]),t}(a.Component),Ga=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(I.Custom()),c=Object(m.a)(r,2),l=c[0],s=c[1],u=Object(a.useState)(),d=Object(m.a)(u,2),g=d[0],h=d[1];return o.a.createElement("div",null,n?o.a.createElement(za,{onClose:function(){i(!1)}},o.a.createElement(Pa,Object.assign({},l,{onExit:function(e){delete e.lastAction,h(e),i(!1)}}))):o.a.createElement(T,{lastOutput:g,onOpenAnnotator:function(e){s(e),i(!0)}}))},Ha=n(272),Va=(n(720),n(969)),Fa=n(274),Ua=Object(V.a)("div")({display:"flex",flexDirection:"column",alignItems:"center"}),Ya=Object(V.a)("div")({width:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",maxWidth:1200}),Ka=Object(V.a)("div")({width:"100%",display:"flex",justifyContent:"center",backgroundColor:Oe.a[600],padding:8,boxSizing:"border-box"}),Xa=Object(V.a)(h.a)({color:"white",margin:8,padding:16,paddingLeft:24,paddingRight:24}),Ja=Object(V.a)("div")({display:"flex",justifyContent:"center",width:"100%",backgroundColor:Oe.a[500],padding:16,color:"white",boxSizing:"border-box"}),Za=Object(V.a)("div")({fontSize:48,fontWeight:"bold",paddingTop:64,textShadow:"0px 1px 5px rgba(0,0,0,0.3)"}),qa=Object(V.a)("div")({paddingTop:32,lineHeight:1.5,fontSize:24,textShadow:"0px 1px 3px rgba(0,0,0,0.2)"}),Qa=Object(V.a)("div")({paddingTop:32,paddingBottom:48}),$a=Object(V.a)("div")({display:"flex",padding:16,paddingTop:32,flexDirection:"column"}),eo=function(e){var t=e.language,n=e.value;return o.a.createElement(Va.a,{language:t,style:Fa.docco},n)};function to(e,t){return"string"===typeof t?e+t:o.a.Children.toArray(t.props.children).reduce(to,e)}function no(e){var t=o.a.Children.toArray(e.children).reduce(to,"").toLowerCase().replace(/\W/g,"-");return o.a.createElement("h"+e.level,{id:t},e.children)}var ao=function(){return o.a.createElement(Ua,null,o.a.createElement(Ka,{id:"about"},o.a.createElement(Ya,{style:{flexDirection:"row",flexGrow:1}},o.a.createElement(Xa,{href:"#features"},"Features"),o.a.createElement(Xa,{href:"#usage"},"Usage"),o.a.createElement(Xa,{href:"#props"},"Props"),o.a.createElement(Xa,{href:"./demo"},"Demo Playground"))),o.a.createElement(Ja,null,o.a.createElement(Ya,null,o.a.createElement(Za,null,"React Image Annotate"),o.a.createElement(qa,null,"Powerful React component for image annotations with bounding boxes, tagging, classification, multiple images and polygon segmentation."),o.a.createElement(Qa,null,o.a.createElement(Ha.a,{href:"https://github.com/waoai/react-image-annotate","data-size":"large","data-show-count":"true","aria-label":"Star waoai/react-image-annotate on GitHub"},"Star")))),o.a.createElement(Ya,{className:"markdown-body"},o.a.createElement($a,{className:"markdown-body"},o.a.createElement(U.a,{escapeHtml:!1,source:'# Features\n\n- Simple input/output format\n- Bounding Box, Point and Polygon Annotation\n- Zooming, Scaling, Panning\n- Multiple Images\n- Cursor Crosshair\n\n![Screenshot of Annotator](https://user-images.githubusercontent.com/1910070/51199716-83c72080-18c5-11e9-837c-c3a89c8caef4.png)\n\n# Usage\n\n## Installation\n\n```bash\nnpm install react-image-annotate\n```\n\n## Basic Example\n\n```javascript\nimport ReactImageAnnotate from "react-image-annotate"\n\nconst App = () => (\n  <ReactImageAnnotate\n    selectedImage="https://example.com/image1.png"\n    taskDescription="# Draw region around each animal."\n    images={[{ src: "https://example.com/image1.png", name: "Image 1" }]}\n    regionClsList={["Dog", "Cat"]}\n    enabledTools={["create-box"]}\n  />\n)\n```\n\n# Props\n\nAll of the following properties can be defined on the `ReactImageAnnotate` component...\n\n| Prop                     | Type (\\* = required)                             | Description                                                                             | Default       |\n| ------------------------ | ------------------------------------------------ | --------------------------------------------------------------------------------------- | ------------- |\n| `taskDescription`        | \\*`string`                                       | Markdown description for what to do in the image.                                       |               |\n| `allowedArea`            | `{ x: number, y: number, w: number, h: number }` | Area that is available for annotation.                                                  | Entire image. |\n| `regionTagList`          | `Array<string>`                                  | Allowed "tags" (mutually inclusive classifications) for regions.                        |               |\n| `regionClsList`          | `Array<string>`                                  | Allowed "classes" (mutually exclusive classifications) for regions.                     |               |\n| `imageTagList`           | `Array<string>`                                  | Allowed tags for entire image.                                                          |               |\n| `imageClsList`           | `Array<string>`                                  | Allowed classes for entire image.                                                       |               |\n| `enabledTools`           | `Array<string>`                                  | Tools allowed to be used. e.g. "select", "create-point", "create-box", "create-polygon" | Everything.   |\n| `showTags`               | `boolean`                                        | Show tags and allow tags on regions.                                                    | `true`        |\n| `selectedImage`          | `string`                                         | URL of initially selected image.                                                        |               |\n| `images`                 | `Array<Image>`                                   | Array of images to load into annotator                                                  |               |\n| `showPointDistances`     | `boolean`                                        | Show distances between points.                                                          | `false`       |\n| `pointDistancePrecision` | `number`                                         | Precision on displayed points (e.g. 3 => 0.123)                                         |               |\n| `onExit`                 | `MainLayoutState => any`                         | Called when "Save" is called.                                                           |               |\n\n# Sponsors\n\n[![wao.ai sponsorship image](https://s3.amazonaws.com/asset.workaround.online/sponsorship-banner-1.png)](https://wao.ai)\n',renderers:{code:eo,heading:no}}))))},oo=(n(909),function(){var e=window.location.pathname.replace(/\/$/,"").split("/").slice(-1)[0];return o.a.createElement(g,null,"demo"===e?o.a.createElement(Ga,null):o.a.createElement(ao,null))});r.a.render(o.a.createElement(oo,null),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.ac5a3e82.chunk.js.map